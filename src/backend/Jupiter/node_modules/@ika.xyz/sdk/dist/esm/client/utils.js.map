{
  "version": 3,
  "sources": ["../../../src/client/utils.ts"],
  "sourcesContent": ["// Copyright (c) dWallet Labs, Ltd.\n// SPDX-License-Identifier: BSD-3-Clause-Clear\n\nimport type { DynamicFieldInfo, SuiClient, SuiObjectResponse } from '@mysten/sui/client';\n\nimport { InvalidObjectError } from './errors.js';\n\n/**\n * Extract BCS (Binary Canonical Serialization) bytes from a Sui object response.\n * This function validates the response and extracts the serialized object data.\n *\n * @param resp - The Sui object response from a blockchain query\n * @returns The BCS-encoded bytes of the object\n * @throws {InvalidObjectError} If the response doesn't contain valid BCS data\n */\nexport function objResToBcs(resp: SuiObjectResponse): string {\n\tif (resp.data?.bcs?.dataType !== 'moveObject') {\n\t\tthrow new InvalidObjectError(\n\t\t\t`Response bcs missing: ${JSON.stringify(resp.data?.type, null, 2)}`,\n\t\t);\n\t}\n\n\treturn resp.data.bcs.bcsBytes;\n}\n\nexport async function fetchAllDynamicFields(\n\tsuiClient: SuiClient,\n\tparentId: string,\n): Promise<DynamicFieldInfo[]> {\n\tconst allFields: any[] = [];\n\tlet cursor: string | null = null;\n\n\t// eslint-disable-next-line no-constant-condition\n\twhile (true) {\n\t\tconst response = await suiClient.getDynamicFields({\n\t\t\tparentId,\n\t\t\tcursor,\n\t\t});\n\t\tallFields.push(...response.data);\n\t\tif (response.nextCursor === cursor) {\n\t\t\tbreak;\n\t\t}\n\t\tcursor = response.nextCursor;\n\t}\n\n\treturn allFields;\n}\n\n/**\n * Encode a string to ASCII bytes.\n * Converts each character to its ASCII character code and returns as a Uint8Array.\n *\n * @param input - The string to encode to ASCII\n * @returns The ASCII-encoded bytes of the string\n */\nexport function encodeToASCII(input: string): Uint8Array {\n\tconst asciiValues: number[] = [];\n\tfor (let i = 0; i < input.length; i++) {\n\t\tasciiValues.push(input.charCodeAt(i));\n\t}\n\treturn Uint8Array.from(asciiValues);\n}\n\n/**\n * Convert a 64-bit unsigned integer to bytes in big-endian format.\n * This function handles both number and bigint inputs and ensures proper 64-bit representation.\n *\n * @param value - The 64-bit unsigned integer value to convert (number or bigint)\n * @returns The value as an 8-byte Uint8Array in big-endian format\n */\nexport function u64ToBytesBigEndian(value: number | bigint): Uint8Array {\n\t// Ensure the input is a BigInt for accurate 64-bit operations\n\tconst bigIntValue = BigInt(value);\n\n\t// Create an 8-byte (64-bit) ArrayBuffer\n\tconst buffer = new ArrayBuffer(8);\n\t// Create a DataView to manipulate the buffer with specific endianness\n\tconst view = new DataView(buffer);\n\n\t// Write the BigInt value as a BigInt64 (signed 64-bit integer)\n\t// or BigUint64 (unsigned 64-bit integer) depending on the context.\n\t// For u64, use setBigUint64.\n\tview.setBigUint64(0, bigIntValue, false); // false for big-endian\n\n\t// Return the Uint8Array representation of the buffer\n\treturn new Uint8Array(buffer);\n}\n\n/**\n * Converts a string to a Uint8Array by encoding each character as its ASCII value.\n * This function is similar to encodeToASCII but with a more descriptive name.\n *\n * @param input - The string to convert\n * @returns The Uint8Array representation of the string's ASCII values\n */\nexport function stringToUint8Array(input: string): Uint8Array {\n\tconst asciiValues: number[] = [];\n\n\tfor (let i = 0; i < input.length; i++) {\n\t\tasciiValues.push(input.charCodeAt(i));\n\t}\n\n\treturn Uint8Array.from(asciiValues);\n}\n"],
  "mappings": "AAKA,SAAS,0BAA0B;AAU5B,SAAS,YAAY,MAAiC;AAC5D,MAAI,KAAK,MAAM,KAAK,aAAa,cAAc;AAC9C,UAAM,IAAI;AAAA,MACT,yBAAyB,KAAK,UAAU,KAAK,MAAM,MAAM,MAAM,CAAC,CAAC;AAAA,IAClE;AAAA,EACD;AAEA,SAAO,KAAK,KAAK,IAAI;AACtB;AAEA,eAAsB,sBACrB,WACA,UAC8B;AAC9B,QAAM,YAAmB,CAAC;AAC1B,MAAI,SAAwB;AAG5B,SAAO,MAAM;AACZ,UAAM,WAAW,MAAM,UAAU,iBAAiB;AAAA,MACjD;AAAA,MACA;AAAA,IACD,CAAC;AACD,cAAU,KAAK,GAAG,SAAS,IAAI;AAC/B,QAAI,SAAS,eAAe,QAAQ;AACnC;AAAA,IACD;AACA,aAAS,SAAS;AAAA,EACnB;AAEA,SAAO;AACR;AASO,SAAS,cAAc,OAA2B;AACxD,QAAM,cAAwB,CAAC;AAC/B,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACtC,gBAAY,KAAK,MAAM,WAAW,CAAC,CAAC;AAAA,EACrC;AACA,SAAO,WAAW,KAAK,WAAW;AACnC;AASO,SAAS,oBAAoB,OAAoC;AAEvE,QAAM,cAAc,OAAO,KAAK;AAGhC,QAAM,SAAS,IAAI,YAAY,CAAC;AAEhC,QAAM,OAAO,IAAI,SAAS,MAAM;AAKhC,OAAK,aAAa,GAAG,aAAa,KAAK;AAGvC,SAAO,IAAI,WAAW,MAAM;AAC7B;AASO,SAAS,mBAAmB,OAA2B;AAC7D,QAAM,cAAwB,CAAC;AAE/B,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACtC,gBAAY,KAAK,MAAM,WAAW,CAAC,CAAC;AAAA,EACrC;AAEA,SAAO,WAAW,KAAK,WAAW;AACnC;",
  "names": []
}
