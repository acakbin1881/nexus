{
  "version": 3,
  "sources": ["../../../../src/generated/ika_dwallet_2pc_mpc/sessions_manager.ts"],
  "sourcesContent": ["/**************************************************************\n * THIS FILE IS GENERATED AND SHOULD NOT BE MANUALLY MODIFIED *\n **************************************************************/\nimport { MoveStruct, MoveEnum } from '../utils/index.js';\nimport { bcs, type BcsType } from '@mysten/sui/bcs';\nimport * as object_table from './deps/sui/object_table.js';\nimport * as bag from './deps/sui/bag.js';\nimport * as table from './deps/sui/table.js';\nimport * as object from './deps/sui/object.js';\nimport * as balance from './deps/sui/balance.js';\nconst $moduleName = '@local-pkg/2pc-mpc::sessions_manager';\nexport const SessionsKeeper = new MoveStruct({ name: `${$moduleName}::SessionsKeeper`, fields: {\n        /** Active sessions indexed by sequence number */\n        sessions: object_table.ObjectTable,\n        /** Events for sessions, keyed by session ID */\n        session_events: bag.Bag,\n        /** Count of started sessions */\n        started_sessions_count: bcs.u64(),\n        /** Count of completed sessions */\n        completed_sessions_count: bcs.u64(),\n        /**\n         * The sequence number to assign to the next session. Initialized to `1` and\n         * incremented at every new session creation.\n         */\n        next_session_sequence_number: bcs.u64()\n    } });\nexport const SessionsManager = new MoveStruct({ name: `${$moduleName}::SessionsManager`, fields: {\n        /**\n           * Registered user session identifiers, keyed by the session identifier bytes -> to\n           * session object ID\n           */\n        registered_user_session_identifiers: table.Table,\n        /** Holds the data for user-initiated sessions */\n        user_sessions_keeper: SessionsKeeper,\n        /** Holds the data for system-initiated sessions */\n        system_sessions_keeper: SessionsKeeper,\n        /**\n         * The last MPC session to process in the current epoch. The validators of the Ika\n         * network must always begin sessions, when they become available to them, so long\n         * their sequence number is lesser or equal to this value. Initialized to `0`, as\n         * when the system is initialized no user-requested session exists so none should\n         * be started and we shouldn't wait for any to complete before advancing epoch\n         * (until the first session is created), and updated at every new session creation\n         * or completion, and when advancing epochs, to the latest session whilst assuring\n         * a maximum of `max_active_sessions_buffer` sessions to be completed in the\n         * current epoch. Validators should complete every session they start before\n         * switching epochs.\n         */\n        last_user_initiated_session_to_complete_in_current_epoch: bcs.u64(),\n        /**\n         * Denotes whether the `last_user_initiated_session_to_complete_in_current_epoch`\n         * field is locked or not. This field gets locked before performing the epoch\n         * switch.\n         */\n        locked_last_user_initiated_session_to_complete_in_current_epoch: bcs.bool(),\n        /**\n         * The maximum number of active MPC sessions Ika nodes may run during an epoch.\n         * Validators should complete every session they start before switching epochs.\n         */\n        max_active_sessions_buffer: bcs.u64()\n    } });\nexport const SessionIdentifier = new MoveStruct({ name: `${$moduleName}::SessionIdentifier`, fields: {\n        id: object.UID,\n        identifier_preimage: bcs.vector(bcs.u8())\n    } });\nexport const DWalletSession = new MoveStruct({ name: `${$moduleName}::DWalletSession`, fields: {\n        id: object.UID,\n        /** Session identifier */\n        session_identifier: SessionIdentifier,\n        /** Sequential number for session ordering */\n        session_sequence_number: bcs.u64(),\n        /** Associated network encryption key */\n        dwallet_network_encryption_key_id: bcs.Address,\n        /** IKA fees for the session */\n        fee_charged_ika: balance.Balance,\n        /** SUI balance for gas reimbursement */\n        gas_fee_reimbursement_sui: balance.Balance\n    } });\nexport const UserSessionIdentifierRegisteredEvent = new MoveStruct({ name: `${$moduleName}::UserSessionIdentifierRegisteredEvent`, fields: {\n        /** ID of the session object */\n        session_object_id: bcs.Address,\n        /** Unique session identifier */\n        session_identifier_preimage: bcs.vector(bcs.u8())\n    } });\n/**\n * Type of dWallet MPC session for scheduling and epoch management.\n *\n * User-initiated sessions have sequence numbers for multi-epoch completion\n * scheduling. System sessions are guaranteed to complete within their creation\n * epoch.\n */\nexport const SessionType = new MoveEnum({ name: `${$moduleName}::SessionType`, fields: {\n        /** User-initiated session (across epochs scheduling) */\n        User: null,\n        /** System-initiated session (always completes in current epoch) */\n        System: null\n    } });\n/**\n * Generic wrapper for dWallet-related events with session context.\n *\n * Provides standardized metadata for all dWallet operations including epoch\n * information, session type, and session ID for tracking and debugging.\n */\nexport function DWalletSessionEvent<E extends BcsType<any>>(...typeParameters: [\n    E\n]) {\n    return new MoveStruct({ name: `${$moduleName}::DWalletSessionEvent<${typeParameters[0].name as E['name']}>`, fields: {\n            /** Epoch when the event occurred */\n            epoch: bcs.u64(),\n            /** ID of the session object */\n            session_object_id: bcs.Address,\n            /** Type of session (User or System) */\n            session_type: SessionType,\n            /** Sequential number for session ordering */\n            session_sequence_number: bcs.u64(),\n            /** Unique session identifier */\n            session_identifier_preimage: bcs.vector(bcs.u8()),\n            /** Event-specific data */\n            event_data: typeParameters[0]\n        } });\n}\n/**\n * The status of a dWallet session result event.\n *\n * This enum represents the possible outcomes of a dWallet session event. It can\n * either be successful or rejected, with event-specific data for each case.\n */\nexport function DWalletSessionStatusEvent<Success extends BcsType<any>, Rejected extends BcsType<any>>(...typeParameters: [\n    Success,\n    Rejected\n]) {\n    return new MoveEnum({ name: `${$moduleName}::DWalletSessionStatusEvent<${typeParameters[0].name as Success['name']}, ${typeParameters[1].name as Rejected['name']}>`, fields: {\n            /** The event was successful */\n            Success: typeParameters[0],\n            /** The event was rejected */\n            Rejected: typeParameters[1]\n        } });\n}\n/**\n * Event emitted when a dWallet session result is completed.\n *\n * This event signals that a dWallet session has been completed and provides the\n * status of the session (success or rejection) along with the event-specific data\n * for each case.\n */\nexport function DWalletSessionResultEvent<E extends BcsType<any>, Success extends BcsType<any>, Rejected extends BcsType<any>>(...typeParameters: [\n    E,\n    Success,\n    Rejected\n]) {\n    return new MoveStruct({ name: `${$moduleName}::DWalletSessionResultEvent<${typeParameters[0].name as E['name']}, ${typeParameters[1].name as Success['name']}, ${typeParameters[2].name as Rejected['name']}>`, fields: {\n            /** Epoch when the event occurred */\n            epoch: bcs.u64(),\n            /** Epoch when the event was initiated */\n            event_initiated_at_epoch: bcs.u64(),\n            /** ID of the session object */\n            session_object_id: bcs.Address,\n            /** Type of session (User or System) */\n            session_type: SessionType,\n            /** Sequential number for session ordering */\n            session_sequence_number: bcs.u64(),\n            /** The identifier of the session */\n            session_identifier_preimage: bcs.vector(bcs.u8()),\n            /** Event-specific data of the session initiator */\n            session_initiator_event_data: typeParameters[0],\n            /** The status of the event */\n            status: DWalletSessionStatusEvent(typeParameters[1], typeParameters[2])\n        } });\n}"],
  "mappings": "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",
  "names": []
}
