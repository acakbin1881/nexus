"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[434],{30401:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(68755).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},92451:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(68755).Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},92934:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(68755).Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},92438:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(68755).Z)("circle-dot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]])},99388:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(68755).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},78867:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(68755).Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},53121:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(68755).Z)("file-pen-line",[["path",{d:"m18.226 5.226-2.52-2.52A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.351",key:"1k2beg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]])},33245:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(68755).Z)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},51817:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(68755).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},66337:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(68755).Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},99397:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(68755).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},91804:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(68755).Z)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},32489:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(68755).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},87807:function(e,t,r){r.d(t,{Kb:function(){return $},Lg:function(){return b},Te:function(){return g},VN:function(){return h},XT:function(){return w},_H:function(){return m},od:function(){return d},ow:function(){return k},qb:function(){return v},vU:function(){return y},xj:function(){return f}});var n=r(26887),i=r(60168),s=r(68651),a=r(19661),o=r(79433),c=r(83343),u=r(52558),l=r(17533);async function d(e,t){let r,n;if(32!==e.length)throw Error("Seed must be 32 bytes");if(t===c.Hy.SECP256K1||t===c.Hy.SECP256R1||t===c.Hy.RISTRETTO||t===c.Hy.ED25519)[r,n]=await (0,l.Nl)((0,o.PO)(t),e);else throw Error("Only SECP256K1, SECP256R1, RISTRETTO, and ED25519 curves are supported for now");return{encryptionKey:Uint8Array.from(r),decryptionKey:Uint8Array.from(n)}}async function h(e,t,r,n){let i=await (0,l.OC)((0,o.PO)(e),t,r,n);return Uint8Array.from(i)}async function p(e,t,r,i,a){let c=n.$5.Address.serialize(a).toBytes(),[d,p,f]=await (0,l.WS)((0,o.PO)(t),e,function(e,t){let r=(0,s.fr)(Uint8Array.from([...t,...e])),n=Uint8Array.from([...(0,u.KW)(0),...(0,u.BP)("USER"),...r]),i=(0,s.fr)(n);return Uint8Array.from(i)}(i,c)),g=await h(t,f,r,e);return{userDKGMessage:Uint8Array.from(d),userPublicOutput:Uint8Array.from(p),encryptedUserShareAndProof:Uint8Array.from(g),userSecretKeyShare:Uint8Array.from(f)}}async function f(e,t,r,n,i){return p(await e.getProtocolPublicParameters(void 0,t),t,r.encryptionKey,n,i)}async function g(e,t){return Uint8Array.from(await (0,l.VT)((0,o.PO)(e),t))}async function y(e,t,r){return Uint8Array.from(await (0,l.s$)((0,o.PO)(e),t,r))}async function m(e,t,r,n){return await (0,l.js)((0,o.PO)(e),t,r,n)}async function w(e,t){return Uint8Array.from(await (0,l.oP)((0,o.PO)(e),t))}async function b(e,t,r){if("ED25519"!==i.ex[r.flag()])throw Error("Only ED25519 public keys are supported.");if(!e.state.Active?.public_output)throw Error("DWallet is not in active state");if(!t.state.KeyHolderSigned?.user_output_signature)throw Error("User output signature is undefined");let n=Uint8Array.from(e.state.Active.public_output),s=Uint8Array.from(t.state.KeyHolderSigned?.user_output_signature);if(!await r.verify(n,s))throw Error("Invalid signature");if(r.toSuiAddress()!==t.encryption_key_address)throw Error("Invalid Sui address. The encryption key address does not match the signing keypair address.");return Uint8Array.from(e.state.Active.public_output)}async function v(e,t,r){return await (0,l.Lh)((0,o.PO)(e),t,r)}async function $(e,t,r){return Uint8Array.from(await (0,l.mL)((0,o.PO)(e),(0,o.gX)(e,t),r))}function k(){return Uint8Array.from((0,a.O6)(32))}},25798:function(e,t,r){r.d(t,{F7:function(){return a},uH:function(){return i},x3:function(){return s}});class n extends Error{constructor(e,t){super(e),this.cause=t,this.name="IkaClientError"}}class i extends n{constructor(e,t,r){super(`${e} object${t?` with ID ${t}`:""} not found`,r),this.name="ObjectNotFoundError"}}class s extends n{constructor(e,t,r){super(`Invalid ${e} object${t?` (ID: ${t})`:""}: Expected structure not found`,r),this.name="InvalidObjectError"}}class a extends n{constructor(e,t){super(`Network error: ${e}`,t),this.name="NetworkError"}}},79433:function(e,t,r){r.d(t,{CM:function(){return d},Em:function(){return f},PO:function(){return h},_v:function(){return l},ej:function(){return y},gX:function(){return p},kx:function(){return m},qb:function(){return g}});var n=r(83343);let i={[n.Ye.ECDSASecp256k1]:[n.kb.KECCAK256,n.kb.SHA256,n.kb.DoubleSHA256],[n.Ye.Taproot]:[n.kb.SHA256],[n.Ye.ECDSASecp256r1]:[n.kb.SHA256],[n.Ye.EdDSA]:[n.kb.SHA512],[n.Ye.SchnorrkelSubstrate]:[n.kb.Merlin]},s={[n.Ye.ECDSASecp256k1]:n.Hy.SECP256K1,[n.Ye.Taproot]:n.Hy.SECP256K1,[n.Ye.ECDSASecp256r1]:n.Hy.SECP256R1,[n.Ye.EdDSA]:n.Hy.ED25519,[n.Ye.SchnorrkelSubstrate]:n.Hy.RISTRETTO};n.Ye.ECDSASecp256k1,n.Ye.Taproot,n.Ye.ECDSASecp256r1,n.Ye.EdDSA,n.Ye.SchnorrkelSubstrate,n.kb.KECCAK256,n.kb.SHA256,n.kb.DoubleSHA256,n.kb.SHA512,n.kb.Merlin;let a={[n.Hy.SECP256K1]:{curveNumber:0,signatureAlgorithms:{[n.Ye.ECDSASecp256k1]:{signatureAlgorithmNumber:0,hashes:{[n.kb.KECCAK256]:0,[n.kb.SHA256]:1,[n.kb.DoubleSHA256]:2}},[n.Ye.Taproot]:{signatureAlgorithmNumber:1,hashes:{[n.kb.SHA256]:0}}}},[n.Hy.SECP256R1]:{curveNumber:1,signatureAlgorithms:{[n.Ye.ECDSASecp256r1]:{signatureAlgorithmNumber:0,hashes:{[n.kb.SHA256]:0}}}},[n.Hy.ED25519]:{curveNumber:2,signatureAlgorithms:{[n.Ye.EdDSA]:{signatureAlgorithmNumber:0,hashes:{[n.kb.SHA512]:0}}}},[n.Hy.RISTRETTO]:{curveNumber:3,signatureAlgorithms:{[n.Ye.SchnorrkelSubstrate]:{signatureAlgorithmNumber:0,hashes:{[n.kb.Merlin]:0}}}}};function o(e){switch(e){case n.kb.KECCAK256:return"KECCAK256 (SHA3)";case n.kb.SHA256:return"SHA256";case n.kb.DoubleSHA256:return"DoubleSHA256";case n.kb.SHA512:return"SHA512";case n.kb.Merlin:return"Merlin";default:return`Unknown Hash (${e})`}}function c(e){switch(e){case n.Ye.ECDSASecp256k1:return"ECDSASecp256k1";case n.Ye.Taproot:return"Taproot";case n.Ye.ECDSASecp256r1:return"ECDSASecp256r1";case n.Ye.EdDSA:return"EdDSA";case n.Ye.SchnorrkelSubstrate:return"SchnorrkelSubstrate (Ristretto)";default:return`Unknown SignatureAlgorithm (${e})`}}function u(e){switch(e){case n.Hy.SECP256K1:return"secp256k1";case n.Hy.SECP256R1:return"secp256r1";case n.Hy.ED25519:return"Ed25519";case n.Hy.RISTRETTO:return"Ristretto";default:return`Unknown Curve (${e})`}}function l(e,t){let r=i[t];if(!r.includes(e)){let n=r.map(o).join(", ");throw Error(`Invalid hash and signature algorithm combination: ${c(t)} does not support ${o(e)}. Supported hash algorithms for ${c(t)}: ${n}`)}}function d(e,t){let r=s[t];if(e!==r)throw Error(`Invalid curve and signature algorithm combination: ${c(t)} requires ${u(r)}, but ${u(e)} was provided.`)}function h(e){let t=a[e];if(!t)throw Error(`Unknown curve: ${e}`);return t.curveNumber}function p(e,t){let r=a[e];if(!r)throw Error(`Unknown curve: ${e}`);let n=r.signatureAlgorithms[t];if(!n)throw Error(`Invalid signature algorithm ${t} for curve ${e}. Valid algorithms: ${Object.keys(r.signatureAlgorithms).join(", ")}`);return n.signatureAlgorithmNumber}function f(e,t,r){let n=a[e];if(!n)throw Error(`Unknown curve: ${e}`);let i=n.signatureAlgorithms[t];if(!i)throw Error(`Invalid signature algorithm ${t} for curve ${e}. Valid algorithms: ${Object.keys(n.signatureAlgorithms).join(", ")}`);let s=i.hashes[r];if(void 0===s)throw Error(`Invalid hash ${r} for ${t} on ${e}. Valid hashes: ${Object.keys(i.hashes).join(", ")}`);return s}function g(e,t){return{curveNumber:h(e),signatureAlgorithmNumber:p(e,t)}}function y(e,t,r){return{curveNumber:h(e),signatureAlgorithmNumber:p(e,t),hashNumber:f(e,t,r)}}function m(e){for(let[t,r]of Object.entries(a))if(r.curveNumber===e)return t;throw Error(`Unknown curve number: ${e}`)}},97895:function(e,t,r){let n;r.d(t,{W:function(){return rn}});var i,s,a,o,c,u,l,d,h,p,f,g,y,m,w,b,v,$,k,_,S,j,E,O,I,A,x,C,P,R,T,D,M,U,B,N,V,K,z,W,F,G,q=r(97655),L=r(49488),X=r(77861),H=r(97488);function J(e){let t=Object.entries(e).map(([e,t])=>(0,X.Ryn)({[e]:t}));return(0,X.zGw)((0,X.G0j)(t),(0,X.vs)(e=>({...e,$kind:Object.keys(e)[0]})))}let Z=(0,X.zGw)((0,X.Z_8)(),(0,X.vs)(e=>(0,H.yT)(e)),(0,X.BF5)(H.oI)),Y=(0,X.Z_8)(),Q=(0,X.zGw)((0,X.G0j)([(0,X.Z_8)(),(0,X.zGw)((0,X.Rxh)(),(0,X._LP)())]),(0,X.BF5)(e=>{try{return BigInt(e),BigInt(e)>=0&&0xffffffffffffffffn>=BigInt(e)}catch{return!1}},"Invalid u64")),ee=(0,X.Ryn)({objectId:Z,version:Q,digest:(0,X.Z_8)()}),et=(0,X.zGw)((0,X.G0j)([(0,X.Ryn)({GasCoin:(0,X.i0J)(!0)}),(0,X.Ryn)({Input:(0,X.zGw)((0,X.Rxh)(),(0,X._LP)()),type:(0,X.jtO)((0,X.i0J)("pure"))}),(0,X.Ryn)({Input:(0,X.zGw)((0,X.Rxh)(),(0,X._LP)()),type:(0,X.jtO)((0,X.i0J)("object"))}),(0,X.Ryn)({Result:(0,X.zGw)((0,X.Rxh)(),(0,X._LP)())}),(0,X.Ryn)({NestedResult:(0,X.bcc)([(0,X.zGw)((0,X.Rxh)(),(0,X._LP)()),(0,X.zGw)((0,X.Rxh)(),(0,X._LP)())])})]),(0,X.vs)(e=>({...e,$kind:Object.keys(e)[0]}))),er=(0,X.Ryn)({budget:(0,X.AG3)(Q),price:(0,X.AG3)(Q),owner:(0,X.AG3)(Z),payment:(0,X.AG3)((0,X.IXX)(ee))});(0,X.Ryn)({address:(0,X.Z_8)(),module:(0,X.Z_8)(),name:(0,X.Z_8)(),typeParams:(0,X.IXX)((0,X.Z_8)())});let en=(0,X.G0j)([(0,X.i0J)("address"),(0,X.i0J)("bool"),(0,X.i0J)("u8"),(0,X.i0J)("u16"),(0,X.i0J)("u32"),(0,X.i0J)("u64"),(0,X.i0J)("u128"),(0,X.i0J)("u256"),(0,X.Ryn)({vector:(0,X.Voz)(()=>en)}),(0,X.Ryn)({datatype:(0,X.Ryn)({package:(0,X.Z_8)(),module:(0,X.Z_8)(),type:(0,X.Z_8)(),typeParameters:(0,X.IXX)((0,X.Voz)(()=>en))})}),(0,X.Ryn)({typeParameter:(0,X.zGw)((0,X.Rxh)(),(0,X._LP)())})]),ei=(0,X.Ryn)({ref:(0,X.AG3)((0,X.G0j)([(0,X.i0J)("&"),(0,X.i0J)("&mut")])),body:en}),es=(0,X.Ryn)({package:Z,module:(0,X.Z_8)(),function:(0,X.Z_8)(),typeArguments:(0,X.IXX)((0,X.Z_8)()),arguments:(0,X.IXX)(et),_argumentTypes:(0,X.jtO)((0,X.AG3)((0,X.IXX)(ei)))}),ea=(0,X.Ryn)({name:(0,X.Z_8)(),inputs:(0,X.IMB)((0,X.Z_8)(),(0,X.G0j)([et,(0,X.IXX)(et)])),data:(0,X.IMB)((0,X.Z_8)(),(0,X._4T)())}),eo=J({MoveCall:es,TransferObjects:(0,X.Ryn)({objects:(0,X.IXX)(et),address:et}),SplitCoins:(0,X.Ryn)({coin:et,amounts:(0,X.IXX)(et)}),MergeCoins:(0,X.Ryn)({destination:et,sources:(0,X.IXX)(et)}),Publish:(0,X.Ryn)({modules:(0,X.IXX)(Y),dependencies:(0,X.IXX)(Z)}),MakeMoveVec:(0,X.Ryn)({type:(0,X.AG3)((0,X.Z_8)()),elements:(0,X.IXX)(et)}),Upgrade:(0,X.Ryn)({modules:(0,X.IXX)(Y),dependencies:(0,X.IXX)(Z),package:Z,ticket:et}),$Intent:ea}),ec=J({ImmOrOwnedObject:ee,SharedObject:(0,X.Ryn)({objectId:Z,initialSharedVersion:Q,mutable:(0,X.O72)()}),Receiving:ee}),eu=J({Object:ec,Pure:(0,X.Ryn)({bytes:Y}),UnresolvedPure:(0,X.Ryn)({value:(0,X._4T)()}),UnresolvedObject:(0,X.Ryn)({objectId:Z,version:(0,X.jtO)((0,X.AG3)(Q)),digest:(0,X.jtO)((0,X.AG3)((0,X.Z_8)())),initialSharedVersion:(0,X.jtO)((0,X.AG3)(Q)),mutable:(0,X.jtO)((0,X.AG3)((0,X.O72)()))})}),el=J({Object:ec,Pure:(0,X.Ryn)({bytes:Y})}),ed=J({None:(0,X.i0J)(!0),Epoch:Q}),eh=(0,X.Ryn)({version:(0,X.i0J)(2),sender:(0,X.NZ6)(Z),expiration:(0,X.NZ6)(ed),gasData:er,inputs:(0,X.IXX)(eu),commands:(0,X.IXX)(eo)});var ep=((i=ep||{})[i.COMPATIBLE=0]="COMPATIBLE",i[i.ADDITIVE=128]="ADDITIVE",i[i.DEP_ONLY=192]="DEP_ONLY",i);let ef={MoveCall(e){let[t,r="",n=""]="target"in e?e.target.split("::"):[e.package,e.module,e.function];return{$kind:"MoveCall",MoveCall:{package:t,module:r,function:n,typeArguments:e.typeArguments??[],arguments:e.arguments??[]}}},TransferObjects:(e,t)=>({$kind:"TransferObjects",TransferObjects:{objects:e.map(e=>(0,X.Qc3)(et,e)),address:(0,X.Qc3)(et,t)}}),SplitCoins:(e,t)=>({$kind:"SplitCoins",SplitCoins:{coin:(0,X.Qc3)(et,e),amounts:t.map(e=>(0,X.Qc3)(et,e))}}),MergeCoins:(e,t)=>({$kind:"MergeCoins",MergeCoins:{destination:(0,X.Qc3)(et,e),sources:t.map(e=>(0,X.Qc3)(et,e))}}),Publish:({modules:e,dependencies:t})=>({$kind:"Publish",Publish:{modules:e.map(e=>"string"==typeof e?e:(0,q.s)(new Uint8Array(e))),dependencies:t.map(e=>(0,H.Fw)(e))}}),Upgrade:({modules:e,dependencies:t,package:r,ticket:n})=>({$kind:"Upgrade",Upgrade:{modules:e.map(e=>"string"==typeof e?e:(0,q.s)(new Uint8Array(e))),dependencies:t.map(e=>(0,H.Fw)(e)),package:r,ticket:(0,X.Qc3)(et,n)}}),MakeMoveVec:({type:e,elements:t})=>({$kind:"MakeMoveVec",MakeMoveVec:{type:e??null,elements:t.map(e=>(0,X.Qc3)(et,e))}}),Intent:({name:e,inputs:t={},data:r={}})=>({$kind:"$Intent",$Intent:{name:e,inputs:Object.fromEntries(Object.entries(t).map(([e,t])=>[e,Array.isArray(t)?t.map(e=>(0,X.Qc3)(et,e)):(0,X.Qc3)(et,t)])),data:r}})};var eg=r(93720);let ey=(0,X.Ryn)({digest:(0,X.Z_8)(),objectId:(0,X.Z_8)(),version:(0,X.G0j)([(0,X.zGw)((0,X.Rxh)(),(0,X._LP)()),(0,X.Z_8)(),(0,X.Kvp)()])}),em=J({ImmOrOwned:ey,Shared:(0,X.Ryn)({objectId:Z,initialSharedVersion:Q,mutable:(0,X.O72)()}),Receiving:ey}),ew=J({Object:em,Pure:(0,X.IXX)((0,X.zGw)((0,X.Rxh)(),(0,X._LP)()))}),eb=(0,X.G0j)([(0,X.Ryn)({kind:(0,X.i0J)("Input"),index:(0,X.zGw)((0,X.Rxh)(),(0,X._LP)()),value:(0,X._4T)(),type:(0,X.jtO)((0,X.i0J)("object"))}),(0,X.Ryn)({kind:(0,X.i0J)("Input"),index:(0,X.zGw)((0,X.Rxh)(),(0,X._LP)()),value:(0,X._4T)(),type:(0,X.i0J)("pure")})]),ev=(0,X.G0j)([(0,X.Ryn)({Epoch:(0,X.zGw)((0,X.Rxh)(),(0,X._LP)())}),(0,X.Ryn)({None:(0,X.AG3)((0,X.i0J)(!0))})]),e$=(0,X.zGw)((0,X.G0j)([(0,X.Rxh)(),(0,X.Z_8)(),(0,X.Kvp)()]),(0,X.BF5)(e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}})),ek=(0,X.G0j)([(0,X.Ryn)({bool:(0,X.AG3)((0,X.i0J)(!0))}),(0,X.Ryn)({u8:(0,X.AG3)((0,X.i0J)(!0))}),(0,X.Ryn)({u64:(0,X.AG3)((0,X.i0J)(!0))}),(0,X.Ryn)({u128:(0,X.AG3)((0,X.i0J)(!0))}),(0,X.Ryn)({address:(0,X.AG3)((0,X.i0J)(!0))}),(0,X.Ryn)({signer:(0,X.AG3)((0,X.i0J)(!0))}),(0,X.Ryn)({vector:(0,X.Voz)(()=>ek)}),(0,X.Ryn)({struct:(0,X.Voz)(()=>e_)}),(0,X.Ryn)({u16:(0,X.AG3)((0,X.i0J)(!0))}),(0,X.Ryn)({u32:(0,X.AG3)((0,X.i0J)(!0))}),(0,X.Ryn)({u256:(0,X.AG3)((0,X.i0J)(!0))})]),e_=(0,X.Ryn)({address:(0,X.Z_8)(),module:(0,X.Z_8)(),name:(0,X.Z_8)(),typeParams:(0,X.IXX)(ek)}),eS=(0,X.Ryn)({budget:(0,X.jtO)(e$),price:(0,X.jtO)(e$),payment:(0,X.jtO)((0,X.IXX)(ey)),owner:(0,X.jtO)((0,X.Z_8)())}),ej=[eb,(0,X.Ryn)({kind:(0,X.i0J)("GasCoin")}),(0,X.Ryn)({kind:(0,X.i0J)("Result"),index:(0,X.zGw)((0,X.Rxh)(),(0,X._LP)())}),(0,X.Ryn)({kind:(0,X.i0J)("NestedResult"),index:(0,X.zGw)((0,X.Rxh)(),(0,X._LP)()),resultIndex:(0,X.zGw)((0,X.Rxh)(),(0,X._LP)())})],eE=(0,X.G0j)([...ej]),eO=(0,X.Ryn)({kind:(0,X.i0J)("MoveCall"),target:(0,X.zGw)((0,X.Z_8)(),(0,X.BF5)(e=>3===e.split("::").length)),typeArguments:(0,X.IXX)((0,X.Z_8)()),arguments:(0,X.IXX)(eE)}),eI=(0,X.Ryn)({kind:(0,X.i0J)("TransferObjects"),objects:(0,X.IXX)(eE),address:eE}),eA=(0,X.Ryn)({kind:(0,X.i0J)("SplitCoins"),coin:eE,amounts:(0,X.IXX)(eE)}),ex=(0,X.Ryn)({kind:(0,X.i0J)("MergeCoins"),destination:eE,sources:(0,X.IXX)(eE)}),eC=(0,X.Ryn)({kind:(0,X.i0J)("MakeMoveVec"),type:(0,X.G0j)([(0,X.Ryn)({Some:ek}),(0,X.Ryn)({None:(0,X.AG3)((0,X.i0J)(!0))})]),objects:(0,X.IXX)(eE)}),eP=(0,X.Ryn)({kind:(0,X.i0J)("Publish"),modules:(0,X.IXX)((0,X.IXX)((0,X.zGw)((0,X.Rxh)(),(0,X._LP)()))),dependencies:(0,X.IXX)((0,X.Z_8)())}),eR=(0,X.Ryn)({kind:(0,X.i0J)("Upgrade"),modules:(0,X.IXX)((0,X.IXX)((0,X.zGw)((0,X.Rxh)(),(0,X._LP)()))),dependencies:(0,X.IXX)((0,X.Z_8)()),packageId:(0,X.Z_8)(),ticket:eE}),eT=(0,X.G0j)([eO,eI,eA,ex,eP,eR,eC]);function eD(e){let t=e.inputs.map((e,t)=>{if(e.Object)return{kind:"Input",index:t,value:{Object:e.Object.ImmOrOwnedObject?{ImmOrOwned:e.Object.ImmOrOwnedObject}:e.Object.Receiving?{Receiving:{digest:e.Object.Receiving.digest,version:e.Object.Receiving.version,objectId:e.Object.Receiving.objectId}}:{Shared:{mutable:e.Object.SharedObject.mutable,initialSharedVersion:e.Object.SharedObject.initialSharedVersion,objectId:e.Object.SharedObject.objectId}}},type:"object"};if(e.Pure)return{kind:"Input",index:t,value:{Pure:Array.from((0,q.G)(e.Pure.bytes))},type:"pure"};if(e.UnresolvedPure)return{kind:"Input",type:"pure",index:t,value:e.UnresolvedPure.value};if(e.UnresolvedObject)return{kind:"Input",type:"object",index:t,value:e.UnresolvedObject.objectId};throw Error("Invalid input")});return{version:1,sender:e.sender??void 0,expiration:e.expiration?.$kind==="Epoch"?{Epoch:Number(e.expiration.Epoch)}:e.expiration?{None:!0}:null,gasConfig:{owner:e.gasData.owner??void 0,budget:e.gasData.budget??void 0,price:e.gasData.price??void 0,payment:e.gasData.payment??void 0},inputs:t,transactions:e.commands.map(e=>{if(e.MakeMoveVec)return{kind:"MakeMoveVec",type:null===e.MakeMoveVec.type?{None:!0}:{Some:eg.X.parseFromStr(e.MakeMoveVec.type)},objects:e.MakeMoveVec.elements.map(e=>eM(e,t))};if(e.MergeCoins)return{kind:"MergeCoins",destination:eM(e.MergeCoins.destination,t),sources:e.MergeCoins.sources.map(e=>eM(e,t))};if(e.MoveCall)return{kind:"MoveCall",target:`${e.MoveCall.package}::${e.MoveCall.module}::${e.MoveCall.function}`,typeArguments:e.MoveCall.typeArguments,arguments:e.MoveCall.arguments.map(e=>eM(e,t))};if(e.Publish)return{kind:"Publish",modules:e.Publish.modules.map(e=>Array.from((0,q.G)(e))),dependencies:e.Publish.dependencies};if(e.SplitCoins)return{kind:"SplitCoins",coin:eM(e.SplitCoins.coin,t),amounts:e.SplitCoins.amounts.map(e=>eM(e,t))};if(e.TransferObjects)return{kind:"TransferObjects",objects:e.TransferObjects.objects.map(e=>eM(e,t)),address:eM(e.TransferObjects.address,t)};if(e.Upgrade)return{kind:"Upgrade",modules:e.Upgrade.modules.map(e=>Array.from((0,q.G)(e))),dependencies:e.Upgrade.dependencies,packageId:e.Upgrade.package,ticket:eM(e.Upgrade.ticket,t)};throw Error(`Unknown transaction ${Object.keys(e)}`)})}}function eM(e,t){if("GasCoin"===e.$kind)return{kind:"GasCoin"};if("Result"===e.$kind)return{kind:"Result",index:e.Result};if("NestedResult"===e.$kind)return{kind:"NestedResult",index:e.NestedResult[0],resultIndex:e.NestedResult[1]};if("Input"===e.$kind)return t[e.Input];throw Error(`Invalid argument ${Object.keys(e)}`)}function eU(e){switch(e.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:e.index};case"NestedResult":return{NestedResult:[e.index,e.resultIndex]};case"Input":return{Input:e.index}}}function eB(e){return(0,X.G0j)(Object.entries(e).map(([e,t])=>(0,X.Ryn)({[e]:t})))}(0,X.Ryn)({version:(0,X.i0J)(1),sender:(0,X.jtO)((0,X.Z_8)()),expiration:(0,X.NZ6)(ev),gasConfig:eS,inputs:(0,X.IXX)(eb),transactions:(0,X.IXX)(eT)});let eN=eB({GasCoin:(0,X.i0J)(!0),Input:(0,X.zGw)((0,X.Rxh)(),(0,X._LP)()),Result:(0,X.zGw)((0,X.Rxh)(),(0,X._LP)()),NestedResult:(0,X.bcc)([(0,X.zGw)((0,X.Rxh)(),(0,X._LP)()),(0,X.zGw)((0,X.Rxh)(),(0,X._LP)())])}),eV=(0,X.Ryn)({budget:(0,X.AG3)(Q),price:(0,X.AG3)(Q),owner:(0,X.AG3)(Z),payment:(0,X.AG3)((0,X.IXX)(ee))}),eK=(0,X.Ryn)({package:Z,module:(0,X.Z_8)(),function:(0,X.Z_8)(),typeArguments:(0,X.IXX)((0,X.Z_8)()),arguments:(0,X.IXX)(eN)}),ez=(0,X.Ryn)({name:(0,X.Z_8)(),inputs:(0,X.IMB)((0,X.Z_8)(),(0,X.G0j)([eN,(0,X.IXX)(eN)])),data:(0,X.IMB)((0,X.Z_8)(),(0,X._4T)())}),eW=eB({MoveCall:eK,TransferObjects:(0,X.Ryn)({objects:(0,X.IXX)(eN),address:eN}),SplitCoins:(0,X.Ryn)({coin:eN,amounts:(0,X.IXX)(eN)}),MergeCoins:(0,X.Ryn)({destination:eN,sources:(0,X.IXX)(eN)}),Publish:(0,X.Ryn)({modules:(0,X.IXX)(Y),dependencies:(0,X.IXX)(Z)}),MakeMoveVec:(0,X.Ryn)({type:(0,X.AG3)((0,X.Z_8)()),elements:(0,X.IXX)(eN)}),Upgrade:(0,X.Ryn)({modules:(0,X.IXX)(Y),dependencies:(0,X.IXX)(Z),package:Z,ticket:eN}),$Intent:ez}),eF=eB({ImmOrOwnedObject:ee,SharedObject:(0,X.Ryn)({objectId:Z,initialSharedVersion:Q,mutable:(0,X.O72)()}),Receiving:ee}),eG=eB({Object:eF,Pure:(0,X.Ryn)({bytes:Y}),UnresolvedPure:(0,X.Ryn)({value:(0,X._4T)()}),UnresolvedObject:(0,X.Ryn)({objectId:Z,version:(0,X.jtO)((0,X.AG3)(Q)),digest:(0,X.jtO)((0,X.AG3)((0,X.Z_8)())),initialSharedVersion:(0,X.jtO)((0,X.AG3)(Q)),mutable:(0,X.jtO)((0,X.AG3)((0,X.O72)()))})}),eq=eB({None:(0,X.i0J)(!0),Epoch:Q}),eL=(0,X.Ryn)({version:(0,X.i0J)(2),sender:(0,X.NZ6)(Z),expiration:(0,X.NZ6)(eq),gasData:eV,inputs:(0,X.IXX)(eG),commands:(0,X.IXX)(eW),digest:(0,X.jtO)((0,X.AG3)((0,X.Z_8)()))}),eX={Pure:function(e){return{$kind:"Pure",Pure:{bytes:e instanceof Uint8Array?(0,q.s)(e):e.toBase64()}}},ObjectRef:({objectId:e,digest:t,version:r})=>({$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:t,version:r,objectId:(0,H.yT)(e)}}}),SharedObjectRef:({objectId:e,mutable:t,initialSharedVersion:r})=>({$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:t,initialSharedVersion:r,objectId:(0,H.yT)(e)}}}),ReceivingRef:({objectId:e,digest:t,version:r})=>({$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:t,version:r,objectId:(0,H.yT)(e)}}})};var eH=r(26887);function eJ(e){if("string"==typeof e)switch(e){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw Error(`Unexpected type ${e}`)}if("Vector"in e)return{vector:eJ(e.Vector)};if("Struct"in e)return{datatype:{package:e.Struct.address,module:e.Struct.module,type:e.Struct.name,typeParameters:e.Struct.typeArguments.map(eJ)}};if("TypeParameter"in e)return{typeParameter:e.TypeParameter};throw Error(`Unexpected type ${JSON.stringify(e)}`)}function eZ(e,t){return Array.from({length:Math.ceil(e.length/t)},(r,n)=>e.slice(n*t,(n+1)*t))}async function eY(e,t){e.gasConfig.price||(e.gasConfig.price=String(await t.getReferenceGasPrice()))}async function eQ(e,t){if(e.gasConfig.budget)return;let r=await t.dryRunTransactionBlock({transactionBlock:e.build({overrides:{gasData:{budget:String(5e10),payment:[]}}})});if("success"!==r.effects.status.status)throw Error(`Dry run failed, could not automatically determine a budget: ${r.effects.status.error}`,{cause:r});let n=1000n*BigInt(e.gasConfig.price||1n),i=BigInt(r.effects.gasUsed.computationCost)+n,s=i+BigInt(r.effects.gasUsed.storageCost)-BigInt(r.effects.gasUsed.storageRebate);e.gasConfig.budget=String(s>i?s:i)}async function e0(e,t){if(!e.gasConfig.payment){let r=(await t.getCoins({owner:e.gasConfig.owner||e.sender,coinType:"0x2::sui::SUI"})).data.filter(t=>!e.inputs.find(e=>!!e.Object?.ImmOrOwnedObject&&t.coinObjectId===e.Object.ImmOrOwnedObject.objectId)).map(e=>({objectId:e.coinObjectId,digest:e.digest,version:e.version}));if(!r.length)throw Error("No valid gas coins found for the transaction.");e.gasConfig.payment=r.map(e=>(0,X.Qc3)(ee,e))}}async function e1(e,t){let r=[...new Set(e.inputs.filter(e=>e.UnresolvedObject&&!(e.UnresolvedObject.version||e.UnresolvedObject?.initialSharedVersion)).map(e=>(0,H.Fw)(e.UnresolvedObject.objectId)))],n=r.length?eZ(r,50):[],i=(await Promise.all(n.map(e=>t.multiGetObjects({ids:e,options:{showOwner:!0}})))).flat(),s=Array.from(new Map(r.map((e,t)=>[e,i[t]]))).filter(([e,t])=>t.error).map(([e,t])=>JSON.stringify(t.error));if(s.length)throw Error(`The following input objects are invalid: ${s.join(", ")}`);let a=i.map(e=>{if(e.error||!e.data)throw Error(`Failed to fetch object: ${e.error}`);let t=e.data.owner,r=t&&"object"==typeof t?"Shared"in t?t.Shared.initial_shared_version:"ConsensusAddressOwner"in t?t.ConsensusAddressOwner.start_version:null:null;return{objectId:e.data.objectId,digest:e.data.digest,version:e.data.version,initialSharedVersion:r}}),o=new Map(r.map((e,t)=>[e,a[t]]));for(let[t,r]of e.inputs.entries()){let n;if(!r.UnresolvedObject)continue;let i=(0,H.yT)(r.UnresolvedObject.objectId),s=o.get(i);r.UnresolvedObject.initialSharedVersion??s?.initialSharedVersion?n=eX.SharedObjectRef({objectId:i,initialSharedVersion:r.UnresolvedObject.initialSharedVersion||s?.initialSharedVersion,mutable:r.UnresolvedObject.mutable||function(e,t){let r=!1;return e.getInputUses(t,(e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){let n=t.MoveCall.arguments.indexOf(e);r="&"!==t.MoveCall._argumentTypes[n].ref||r}("MakeMoveVec"===t.$kind||"MergeCoins"===t.$kind||"SplitCoins"===t.$kind||"TransferObjects"===t.$kind)&&(r=!0)}),r}(e,t)}):function(e,t){let r=!1;return e.getInputUses(t,(e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){var n;let i=t.MoveCall.arguments.indexOf(e);r="object"==typeof(n=t.MoveCall._argumentTypes[i]).body&&"datatype"in n.body&&"0x2"===n.body.datatype.package&&"transfer"===n.body.datatype.module&&"Receiving"===n.body.datatype.type||r}}),r}(e,t)&&(n=eX.ReceivingRef({objectId:i,digest:r.UnresolvedObject.digest??s?.digest,version:r.UnresolvedObject.version??s?.version})),e.inputs[e.inputs.indexOf(r)]=n??eX.ObjectRef({objectId:i,digest:r.UnresolvedObject.digest??s?.digest,version:r.UnresolvedObject.version??s?.version})}}async function e5(e,t){let{inputs:r,commands:n}=e,i=[],s=new Set;n.forEach(t=>{if(t.MoveCall&&!t.MoveCall._argumentTypes&&t.MoveCall.arguments.map(t=>"Input"===t.$kind?e.inputs[t.Input]:null).some(e=>e?.UnresolvedPure||e?.UnresolvedObject&&"boolean"!=typeof e?.UnresolvedObject.mutable)){let e=`${t.MoveCall.package}::${t.MoveCall.module}::${t.MoveCall.function}`;s.add(e),i.push(t.MoveCall)}});let a=new Map;s.size>0&&await Promise.all([...s].map(async e=>{let[r,n,i]=e.split("::"),s=await t.getNormalizedMoveFunction({package:r,module:n,function:i});a.set(e,s.parameters.map(e=>"object"==typeof e&&"Reference"in e?{ref:"&",body:eJ(e.Reference)}:"object"==typeof e&&"MutableReference"in e?{ref:"&mut",body:eJ(e.MutableReference)}:{ref:null,body:eJ(e)}))})),i.length&&await Promise.all(i.map(async e=>{let t=a.get(`${e.package}::${e.module}::${e.function}`);if(!t)return;let r=t.length>0&&function(e){let t="object"==typeof e.body&&"datatype"in e.body?e.body.datatype:null;return!!t&&(0,H.yT)(t.package)===(0,H.yT)("0x2")&&"tx_context"===t.module&&"TxContext"===t.type}(t.at(-1))?t.slice(0,t.length-1):t;e._argumentTypes=r})),n.forEach(e=>{if(!e.MoveCall)return;let t=e.MoveCall,n=`${t.package}::${t.module}::${t.function}`,i=t._argumentTypes;if(i){if(i.length!==e.MoveCall.arguments.length)throw Error(`Incorrect number of arguments for ${n}`);i.forEach((e,n)=>{let i=t.arguments[n];if("Input"!==i.$kind)return;let s=r[i.Input];if(!s.UnresolvedPure&&!s.UnresolvedObject)return;let a=s.UnresolvedPure?.value??s.UnresolvedObject?.objectId,o=function e(t){if("string"==typeof t)switch(t){case"address":return eH.$5.Address;case"bool":return eH.$5.Bool;case"u8":return eH.$5.U8;case"u16":return eH.$5.U16;case"u32":return eH.$5.U32;case"u64":return eH.$5.U64;case"u128":return eH.$5.U128;case"u256":return eH.$5.U256;default:throw Error(`Unknown type signature ${t}`)}if("vector"in t){if("u8"===t.vector)return eH.$5.byteVector().transform({input:e=>"string"==typeof e?new TextEncoder().encode(e):e,output:e=>e});let r=e(t.vector);return r?eH.$5.vector(r):null}if("datatype"in t){let r=(0,H.yT)(t.datatype.package);if(r===(0,H.yT)("0x1")){if("ascii"===t.datatype.module&&"String"===t.datatype.type||"string"===t.datatype.module&&"String"===t.datatype.type)return eH.$5.String;if("option"===t.datatype.module&&"Option"===t.datatype.type){let r=e(t.datatype.typeParameters[0]);return r?eH.$5.vector(r):null}}if(r===(0,H.yT)("0x2")&&"object"===t.datatype.module&&"ID"===t.datatype.type)return eH.$5.Address}return null}(e.body);if(o){i.type="pure",r[r.indexOf(s)]=eX.Pure(o.serialize(a));return}if("string"!=typeof a)throw Error(`Expect the argument to be an object id string, got ${JSON.stringify(a,null,2)}`);i.type="object";let c=s.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:a}}:s;r[i.Input]=c})}})}function e2(e,t){return!!e.inputs.some(e=>e.UnresolvedObject||e.UnresolvedPure)||!t.onlyTransactionKind&&(!e.gasConfig.price||!e.gasConfig.budget||!e.gasConfig.payment)}async function e6(e,t,r){if(function(e){for(let t of e.commands)switch(t.$kind){case"SplitCoins":t.SplitCoins.amounts.forEach(t=>{e3(t,eH.$5.U64,e)});break;case"TransferObjects":e3(t.TransferObjects.address,eH.$5.Address,e)}}(e),!e2(e,t))return await e8(e),r();let n=function(e){if(!e.client)throw Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}(t);return(n.core?.resolveTransactionPlugin()??async function(e,t,r){return await e5(e,n),await e1(e,n),t.onlyTransactionKind||(await eY(e,n),await eQ(e,n),await e0(e,n)),await r()})(e,t,async()=>{await e8(e),await r()})}function e8(e){e.inputs.forEach((e,t)=>{if("Object"!==e.$kind&&"Pure"!==e.$kind)throw Error(`Input at index ${t} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function e3(e,t,r){if("Input"!==e.$kind)return;let n=r.inputs[e.Input];"UnresolvedPure"===n.$kind&&(r.inputs[e.Input]=eX.Pure(t.serialize(n.UnresolvedPure.value)))}BigInt(1e9),(0,H.Fw)("0x6"),(0,H.Fw)("0x5"),(0,H.Fw)("0x8");var e4=r(58437),e7=r(58391);function e9(e){switch(e){case"u8":return e4.$.u8();case"u16":return e4.$.u16();case"u32":return e4.$.u32();case"u64":return e4.$.u64();case"u128":return e4.$.u128();case"u256":return e4.$.u256();case"bool":return e4.$.bool();case"string":return e4.$.string();case"id":case"address":return e7.kL}let t=e.match(/^(vector|option)<(.+)>$/);if(t){let[e,r]=t.slice(1);return"vector"===e?e4.$.vector(e9(r)):e4.$.option(e9(r))}throw Error(`Invalid Pure type name: ${e}`)}var te=r(2783),tt=r(55184);function tr(e){return"string"==typeof e?(0,H.yT)(e):e.Object?e.Object.ImmOrOwnedObject?(0,H.yT)(e.Object.ImmOrOwnedObject.objectId):e.Object.Receiving?(0,H.yT)(e.Object.Receiving.objectId):(0,H.yT)(e.Object.SharedObject.objectId):e.UnresolvedObject?(0,H.yT)(e.UnresolvedObject.objectId):void 0}function tn(e){return(0,H.yT)(e).replace("0x","")}class ti{constructor(e){this.version=2,this.sender=e?.sender??null,this.expiration=e?.expiration??null,this.inputs=e?.inputs??[],this.commands=e?.commands??[],this.gasData=e?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){let t=eH.$5.TransactionKind.parse(e).ProgrammableTransaction;if(!t)throw Error("Unable to deserialize from bytes.");return ti.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:t.inputs,commands:t.commands})}static fromBytes(e){let t=eH.$5.TransactionData.parse(e),r=t?.V1,n=r.kind.ProgrammableTransaction;if(!r||!n)throw Error("Unable to deserialize from bytes.");return ti.restore({version:2,sender:r.sender,expiration:r.expiration,gasData:r.gasData,inputs:n.inputs,commands:n.commands})}static restore(e){return new ti(2===e.version?(0,X.Qc3)(eh,e):(0,X.Qc3)(eh,(0,X.Qc3)(eh,{version:2,sender:e.sender??null,expiration:e.expiration?"Epoch"in e.expiration?{Epoch:e.expiration.Epoch}:{None:!0}:null,gasData:{owner:e.gasConfig.owner??null,budget:e.gasConfig.budget?.toString()??null,price:e.gasConfig.price?.toString()??null,payment:e.gasConfig.payment?.map(e=>({digest:e.digest,objectId:e.objectId,version:e.version.toString()}))??null},inputs:e.inputs.map(e=>{if("Input"===e.kind){if((0,X.is)(ew,e.value)){let t=(0,X.Qc3)(ew,e.value);if(t.Object){if(t.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:t.Object.ImmOrOwned.objectId,version:String(t.Object.ImmOrOwned.version),digest:t.Object.ImmOrOwned.digest}}};if(t.Object.Shared)return{Object:{SharedObject:{mutable:t.Object.Shared.mutable??null,initialSharedVersion:t.Object.Shared.initialSharedVersion,objectId:t.Object.Shared.objectId}}};if(t.Object.Receiving)return{Object:{Receiving:{digest:t.Object.Receiving.digest,version:String(t.Object.Receiving.version),objectId:t.Object.Receiving.objectId}}};throw Error("Invalid object input")}return{Pure:{bytes:(0,q.s)(new Uint8Array(t.Pure))}}}return"object"===e.type?{UnresolvedObject:{objectId:e.value}}:{UnresolvedPure:{value:e.value}}}throw Error("Invalid input")}),commands:e.transactions.map(e=>{switch(e.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in e.type?eg.X.tagToString(e.type.Some):null,elements:e.objects.map(e=>eU(e))}};case"MergeCoins":return{MergeCoins:{destination:eU(e.destination),sources:e.sources.map(e=>eU(e))}};case"MoveCall":{let[t,r,n]=e.target.split("::");return{MoveCall:{package:t,module:r,function:n,typeArguments:e.typeArguments,arguments:e.arguments.map(e=>eU(e))}}}case"Publish":return{Publish:{modules:e.modules.map(e=>(0,q.s)(Uint8Array.from(e))),dependencies:e.dependencies}};case"SplitCoins":return{SplitCoins:{coin:eU(e.coin),amounts:e.amounts.map(e=>eU(e))}};case"TransferObjects":return{TransferObjects:{objects:e.objects.map(e=>eU(e)),address:eU(e.address)}};case"Upgrade":return{Upgrade:{modules:e.modules.map(e=>(0,q.s)(Uint8Array.from(e))),dependencies:e.dependencies,package:e.packageId,ticket:eU(e.ticket)}}}throw Error(`Unknown transaction ${Object.keys(e)}`)})})))}static getDigestFromBytes(e){let t=function(e,t){let r=Array.from(`${e}::`).map(e=>e.charCodeAt(0)),n=new Uint8Array(r.length+t.length);return n.set(r),n.set(t,r.length),(0,tt.R)(n,{dkLen:32})}("TransactionData",e);return(0,te.z)(t)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:t,onlyTransactionKind:r}={}){let n=this.inputs,i=this.commands;if(r)return eH.$5.TransactionKind.serialize({ProgrammableTransaction:{inputs:n,commands:i}},{maxSize:e}).toBytes();let s=t?.expiration??this.expiration,a=t?.sender??this.sender,o={...this.gasData,...t?.gasConfig,...t?.gasData};if(!a)throw Error("Missing transaction sender");if(!o.budget)throw Error("Missing gas budget");if(!o.payment)throw Error("Missing gas payment");if(!o.price)throw Error("Missing gas price");let c={sender:tn(a),expiration:s||{None:!0},gasData:{payment:o.payment,owner:tn(this.gasData.owner??a),price:BigInt(o.price),budget:BigInt(o.budget)},kind:{ProgrammableTransaction:{inputs:n,commands:i}}};return eH.$5.TransactionData.serialize({V1:c},{maxSize:e}).toBytes()}addInput(e,t){let r=this.inputs.length;return this.inputs.push(t),{Input:r,type:e,$kind:"Input"}}getInputUses(e,t){this.mapArguments((r,n)=>("Input"===r.$kind&&r.Input===e&&t(r,n),r))}mapCommandArguments(e,t){let r=this.commands[e];switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map(n=>t(n,r,e));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map(n=>t(n,r,e)),r.TransferObjects.address=t(r.TransferObjects.address,r,e);break;case"SplitCoins":r.SplitCoins.coin=t(r.SplitCoins.coin,r,e),r.SplitCoins.amounts=r.SplitCoins.amounts.map(n=>t(n,r,e));break;case"MergeCoins":r.MergeCoins.destination=t(r.MergeCoins.destination,r,e),r.MergeCoins.sources=r.MergeCoins.sources.map(n=>t(n,r,e));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map(n=>t(n,r,e));break;case"Upgrade":r.Upgrade.ticket=t(r.Upgrade.ticket,r,e);break;case"$Intent":let n=r.$Intent.inputs;for(let[i,s]of(r.$Intent.inputs={},Object.entries(n)))r.$Intent.inputs[i]=Array.isArray(s)?s.map(n=>t(n,r,e)):t(s,r,e);break;case"Publish":break;default:throw Error(`Unexpected transaction kind: ${r.$kind}`)}}mapArguments(e){for(let t of this.commands.keys())this.mapCommandArguments(t,e)}replaceCommand(e,t,r=e){if(!Array.isArray(t)){this.commands[e]=t;return}let n=t.length-1;this.commands.splice(e,1,...structuredClone(t)),this.mapArguments((i,s,a)=>{if(a<e+t.length)return i;if("number"!=typeof r&&("Result"===i.$kind&&i.Result===e||"NestedResult"===i.$kind&&i.NestedResult[0]===e)){if(!("NestedResult"in i)||0===i.NestedResult[1])return(0,X.Qc3)(et,structuredClone(r));throw Error(`Cannot replace command ${e} with a specific result type: NestedResult[${e}, ${i.NestedResult[1]}] references a nested element that cannot be mapped to the replacement result`)}switch(i.$kind){case"Result":i.Result===e&&"number"==typeof r&&(i.Result=r),i.Result>e&&(i.Result+=n);break;case"NestedResult":if(i.NestedResult[0]===e&&"number"==typeof r)return{$kind:"NestedResult",NestedResult:[r,i.NestedResult[1]]};i.NestedResult[0]>e&&(i.NestedResult[0]+=n)}return i})}replaceCommandWithTransaction(e,t,r){if("Result"!==r.$kind&&"NestedResult"!==r.$kind)throw Error("Result must be of kind Result or NestedResult");this.insertTransaction(e,t),this.replaceCommand(e+t.commands.length,[],"Result"in r?{NestedResult:[r.Result+e,0]}:{NestedResult:[r.NestedResult[0]+e,r.NestedResult[1]]})}insertTransaction(e,t){let r=new Map,n=new Map;for(let e=0;e<t.inputs.length;e++){let n=t.inputs[e],i=tr(n),s=-1;if(void 0!==i&&-1!==(s=this.inputs.findIndex(e=>tr(e)===i))&&this.inputs[s].Object?.SharedObject&&n.Object?.SharedObject&&(this.inputs[s].Object.SharedObject.mutable=this.inputs[s].Object.SharedObject.mutable||n.Object.SharedObject.mutable),-1!==s)r.set(e,s);else{let t=this.inputs.length;this.inputs.push(n),r.set(e,t)}}for(let r=0;r<t.commands.length;r++)n.set(r,e+r);let i=[];for(let e=0;e<t.commands.length;e++){let s=structuredClone(t.commands[e]);!function(e,t,r){let n=e=>{switch(e.$kind){case"Input":{let r=t.get(e.Input);if(void 0===r)throw Error(`Input ${e.Input} not found in input mapping`);return{...e,Input:r}}case"Result":{let t=r.get(e.Result);if(void 0!==t)return{...e,Result:t};return e}case"NestedResult":{let t=r.get(e.NestedResult[0]);if(void 0!==t)return{...e,NestedResult:[t,e.NestedResult[1]]};return e}default:return e}};switch(e.$kind){case"MoveCall":e.MoveCall.arguments=e.MoveCall.arguments.map(n);break;case"TransferObjects":e.TransferObjects.objects=e.TransferObjects.objects.map(n),e.TransferObjects.address=n(e.TransferObjects.address);break;case"SplitCoins":e.SplitCoins.coin=n(e.SplitCoins.coin),e.SplitCoins.amounts=e.SplitCoins.amounts.map(n);break;case"MergeCoins":e.MergeCoins.destination=n(e.MergeCoins.destination),e.MergeCoins.sources=e.MergeCoins.sources.map(n);break;case"MakeMoveVec":e.MakeMoveVec.elements=e.MakeMoveVec.elements.map(n);break;case"Upgrade":e.Upgrade.ticket=n(e.Upgrade.ticket);break;case"$Intent":{let t=e.$Intent.inputs;for(let[r,i]of(e.$Intent.inputs={},Object.entries(t)))e.$Intent.inputs[r]=Array.isArray(i)?i.map(n):n(i)}}}(s,r,n),i.push(s)}this.commands.splice(e,0,...i);let s=i.length;s>0&&this.mapArguments((t,r,n)=>{if(n>=e&&n<e+i.length)return t;switch(t.$kind){case"Result":t.Result>=e&&(t.Result+=s);break;case"NestedResult":t.NestedResult[0]>=e&&(t.NestedResult[0]+=s)}return t})}getDigest(){let e=this.build({onlyTransactionKind:!1});return ti.getDigestFromBytes(e)}snapshot(){return(0,X.Qc3)(eh,this)}shallowClone(){return new ti({version:this.version,sender:this.sender,expiration:this.expiration,gasData:{...this.gasData},inputs:[...this.inputs],commands:[...this.commands]})}applyResolvedData(e){this.sender||(this.sender=e.sender??null),this.expiration||(this.expiration=e.expiration??null),this.gasData.budget||(this.gasData.budget=e.gasData.budget),this.gasData.owner||(this.gasData.owner=e.gasData.owner??null),this.gasData.payment||(this.gasData.payment=e.gasData.payment),this.gasData.price||(this.gasData.price=e.gasData.price);for(let t=0;t<this.inputs.length;t++){let r=this.inputs[t],n=e.inputs[t];switch(r.$kind){case"UnresolvedPure":if("Pure"!==n.$kind)throw Error(`Expected input at index ${t} to resolve to a Pure argument, but got ${JSON.stringify(n)}`);this.inputs[t]=n;break;case"UnresolvedObject":if("Object"!==n.$kind)throw Error(`Expected input at index ${t} to resolve to an Object argument, but got ${JSON.stringify(n)}`);if("ImmOrOwnedObject"===n.Object.$kind||"Receiving"===n.Object.$kind){let e=r.UnresolvedObject,i=n.Object.ImmOrOwnedObject??n.Object.Receiving;if((0,H.yT)(e.objectId)!==(0,H.yT)(i.objectId)||null!=e.version&&e.version!==i.version||null!=e.digest&&e.digest!==i.digest||null!=e.mutable||null!=e.initialSharedVersion)throw Error(`Input at index ${t} did not match unresolved object. ${JSON.stringify(e)} is not compatible with ${JSON.stringify(i)}`)}else if("SharedObject"===n.Object.$kind){let e=r.UnresolvedObject,i=n.Object.SharedObject;if((0,H.yT)(e.objectId)!==(0,H.yT)(i.objectId)||null!=e.initialSharedVersion&&e.initialSharedVersion!==i.initialSharedVersion||null!=e.mutable&&e.mutable!==i.mutable||null!=e.version||null!=e.digest)throw Error(`Input at index ${t} did not match unresolved object. ${JSON.stringify(e)} is not compatible with ${JSON.stringify(i)}`)}else throw Error(`Input at index ${t} resolved to an unexpected Object kind: ${JSON.stringify(n.Object)}`);this.inputs[t]=n}}}}var ts=e=>{throw TypeError(e)},ta=(e,t,r)=>t.has(e)||ts("Cannot "+r),to=(e,t,r)=>(ta(e,t,"read from private field"),r?r.call(e):t.get(e)),tc=(e,t,r)=>t.has(e)?ts("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),tu=(e,t,r,n)=>(ta(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);let tl=class e{constructor({prefix:e,cache:t}={}){tc(this,s),tc(this,a),tu(this,s,e??[]),tu(this,a,t??new Map)}read(e,t){let r=[to(this,s),...e].join(":");if(to(this,a).has(r))return to(this,a).get(r);let n=t();return(to(this,a).set(r,n),"object"==typeof n&&null!==n&&"then"in n)?Promise.resolve(n).then(e=>(to(this,a).set(r,e),e)).catch(e=>{throw to(this,a).delete(r),e}):n}readSync(e,t){let r=[to(this,s),...e].join(":");if(to(this,a).has(r))return to(this,a).get(r);let n=t();return to(this,a).set(r,n),n}clear(e){let t=[...to(this,s),...e??[]].join(":");if(!t){to(this,a).clear();return}for(let e of to(this,a).keys())e.startsWith(t)&&to(this,a).delete(e)}scope(t){return new e({prefix:[...to(this,s),...Array.isArray(t)?t:[t]],cache:to(this,a)})}};s=new WeakMap,a=new WeakMap;var td=r(40257);class th{constructor(e,t){if("function"!=typeof e)throw TypeError(`DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but got: ${e}.`);this._batchLoadFn=e,this._maxBatchSize=function(e){if(!(!e||!1!==e.batch))return 1;let t=e&&e.maxBatchSize;if(void 0===t)return 1/0;if("number"!=typeof t||t<1)throw TypeError(`maxBatchSize must be a positive number: ${t}`);return t}(t),this._batchScheduleFn=function(e){let t=e&&e.batchScheduleFn;if(void 0===t)return tp;if("function"!=typeof t)throw TypeError(`batchScheduleFn must be a function: ${t}`);return t}(t),this._cacheKeyFn=function(e){let t=e&&e.cacheKeyFn;if(void 0===t)return e=>e;if("function"!=typeof t)throw TypeError(`cacheKeyFn must be a function: ${t}`);return t}(t),this._cacheMap=function(e){if(!(!e||!1!==e.cache))return null;let t=e&&e.cacheMap;if(void 0===t)return new Map;if(null!==t){let e=["get","set","delete","clear"].filter(e=>t&&"function"!=typeof t[e]);if(0!==e.length)throw TypeError("Custom cacheMap missing methods: "+e.join(", "))}return t}(t),this._batch=null,this.name=t&&t.name?t.name:null}load(e){let t;if(null==e)throw TypeError(`The loader.load() function must be called with a value, but got: ${String(e)}.`);let r=function(e){let t=e._batch;if(null!==t&&!t.hasDispatched&&t.keys.length<e._maxBatchSize)return t;let r={hasDispatched:!1,keys:[],callbacks:[]};return e._batch=r,e._batchScheduleFn(()=>{(function(e,t){let r;if(t.hasDispatched=!0,0===t.keys.length){tg(t);return}try{r=e._batchLoadFn(t.keys)}catch(r){return tf(e,t,TypeError(`DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function errored synchronously: ${String(r)}.`))}if(!r||"function"!=typeof r.then)return tf(e,t,TypeError(`DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise: ${String(r)}.`));Promise.resolve(r).then(e=>{if(!ty(e))throw TypeError(`DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array: ${String(e)}.`);if(e.length!==t.keys.length)throw TypeError(`DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys.

Keys:
${String(t.keys)}

Values:
${String(e)}`);tg(t);for(let r=0;r<t.callbacks.length;r++){let n=e[r];n instanceof Error?t.callbacks[r].reject(n):t.callbacks[r].resolve(n)}}).catch(r=>{tf(e,t,r)})})(e,r)}),r}(this),n=this._cacheMap;if(n){t=this._cacheKeyFn(e);let i=n.get(t);if(i){let e=r.cacheHits||(r.cacheHits=[]);return new Promise(t=>{e.push(()=>{t(i)})})}}r.keys.push(e);let i=new Promise((e,t)=>{r.callbacks.push({resolve:e,reject:t})});return n&&n.set(t,i),i}loadMany(e){if(!ty(e))throw TypeError(`The loader.loadMany() function must be called with Array<key>, but got: ${e}.`);let t=[];for(let r=0;r<e.length;r++)t.push(this.load(e[r]).catch(e=>e));return Promise.all(t)}clear(e){let t=this._cacheMap;if(t){let r=this._cacheKeyFn(e);t.delete(r)}return this}clearAll(){let e=this._cacheMap;return e&&e.clear(),this}prime(e,t){let r=this._cacheMap;if(r){let n=this._cacheKeyFn(e);if(void 0===r.get(n)){let e;t instanceof Error?(e=Promise.reject(t)).catch(()=>{}):e=Promise.resolve(t),r.set(n,e)}}return this}}let tp="object"==typeof td&&"function"==typeof td.nextTick?function(e){n||(n=Promise.resolve()),n.then(()=>{td.nextTick(e)})}:"function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){setTimeout(e)};function tf(e,t,r){tg(t);for(let n=0;n<t.keys.length;n++)e.clear(t.keys[n]),t.callbacks[n].reject(r)}function tg(e){if(e.cacheHits)for(let t=0;t<e.cacheHits.length;t++)e.cacheHits[t]()}function ty(e){return"object"==typeof e&&null!==e&&"length"in e&&"number"==typeof e.length&&(0===e.length||e.length>0&&Object.prototype.hasOwnProperty.call(e,e.length-1))}var tm=r(20547),tw=e=>{throw TypeError(e)},tb=(e,t,r)=>t.has(e)||tw("Cannot "+r),tv=(e,t,r)=>(tb(e,t,"read from private field"),r?r.call(e):t.get(e)),t$=(e,t,r)=>t.has(e)?tw("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),tk=(e,t,r,n)=>(tb(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),t_=(e,t,r)=>(tb(e,t,"access private method"),r);let tS={"Mvr-Source":"@mysten/sui@1.45.2"};class tj{constructor({cache:e,url:t,pageSize:r=50,overrides:n}){t$(this,d),t$(this,o),t$(this,c),t$(this,u),t$(this,l),tk(this,o,e),tk(this,c,t),tk(this,u,r),tk(this,l,{packages:n?.packages,types:n?.types}),function(e){if(e?.packages)for(let[t,r]of Object.entries(e.packages)){if(!(0,tm.Y)(t))throw Error(`Invalid package name: ${t}`);if(!(0,H.oI)((0,H.yT)(r)))throw Error(`Invalid package ID: ${r}`)}if(e?.types)for(let[t,r]of Object.entries(e.types)){if((0,H.$A)(t).typeParams.length>0)throw Error("Type overrides must be first-level only. If you want to supply generic types, just pass each type individually.");let e=(0,H.$A)(r);if(!(0,H.oI)(e.address))throw Error(`Invalid type: ${r}`)}}(tv(this,l))}async resolvePackage({package:e}){return tI(e)?{package:await tv(this,d,h).load(e)}:{package:e}}async resolveType({type:e}){if(!tI(e))return{type:e};let t=[...tE(e)],r=await tv(this,d,p).loadMany(t),n={};for(let e=0;e<t.length;e++){let i=r[e];if(i instanceof Error)throw i;n[t[e]]=i}return{type:tO(e,n)}}async resolve({types:e=[],packages:t=[]}){let r=new Set;for(let t of e??[])tE(t,r);let n=[...r],[i,s]=await Promise.all([n.length>0?tv(this,d,p).loadMany(n):[],t.length>0?tv(this,d,h).loadMany(t):[]]),a={...tv(this,l)?.types};for(let[e,t]of n.entries()){let r=i[e];if(r instanceof Error)throw r;a[t]=r}let o={};for(let t of e??[]){let e=tO(t,a);o[t]={type:e}}let c={};for(let[e,r]of(t??[]).entries()){let t=tv(this,l)?.packages?.[r]??s[e];if(t instanceof Error)throw t;c[r]={package:t}}return{types:o,packages:c}}}function tE(e,t=new Set){if("string"==typeof e&&!tI(e))return t;let r=tA(e)?e:(0,H.$A)(e);for(let e of(tI(r.address)&&t.add(`${r.address}::${r.module}::${r.name}`),r.typeParams))tE(e,t);return t}function tO(e,t){let r=tA(e)?e:(0,H.$A)(e),n=t[`${r.address}::${r.module}::${r.name}`];return(0,H.kX)({...r,address:n?n.split("::")[0]:r.address,typeParams:r.typeParams.map(e=>tO(e,t))})}function tI(e){return e.includes("/")||e.includes("@")||e.includes(".sui")}function tA(e){return"object"==typeof e&&"address"in e&&"module"in e&&"name"in e&&"typeParams"in e}function tx(e){let t=new Set;for(let r of e)if(tI(r)){if(!(0,tm.S)(r))throw Error(`Invalid type with names: ${r}`);t.add(r)}return t}o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakSet,h=function(){return tv(this,o).readSync(["#mvrPackageDataLoader",tv(this,c)??""],()=>{let e=new th(async e=>{if(!tv(this,c))throw Error(`MVR Api URL is not set for the current client (resolving ${e.join(", ")})`);let t=await t_(this,d,f).call(this,e);return e.map(e=>t[e]??Error(`Failed to resolve package: ${e}`))}),t=tv(this,l)?.packages;if(t)for(let[r,n]of Object.entries(t))e.prime(r,n);return e})},p=function(){return tv(this,o).readSync(["#mvrTypeDataLoader",tv(this,c)??""],()=>{let e=new th(async e=>{if(!tv(this,c))throw Error(`MVR Api URL is not set for the current client (resolving ${e.join(", ")})`);let t=await t_(this,d,g).call(this,e);return e.map(e=>t[e]??Error(`Failed to resolve type: ${e}`))}),t=tv(this,l)?.types;if(t)for(let[r,n]of Object.entries(t))e.prime(r,n);return e})},f=async function(e){if(0===e.length)return{};let t=eZ(e,tv(this,u)),r={};return await Promise.all(t.map(async e=>{let t=await t_(this,d,y).call(this,"/v1/resolution/bulk",{names:e});if(t?.resolution)for(let e of Object.keys(t?.resolution)){let n=t.resolution[e]?.package_id;n&&(r[e]=n)}})),r},g=async function(e){if(0===e.length)return{};let t=eZ(e,tv(this,u)),r={};return await Promise.all(t.map(async e=>{let t=await t_(this,d,y).call(this,"/v1/struct-definition/bulk",{types:e});if(t?.resolution)for(let e of Object.keys(t?.resolution)){let n=t.resolution[e]?.type_tag;n&&(r[e]=n)}})),r},y=async function(e,t){if(!tv(this,c))throw Error("MVR Api URL is not set for the current client");let r=await fetch(`${tv(this,c)}${e}`,{method:"POST",headers:{"Content-Type":"application/json",...tS},body:JSON.stringify(t)});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(`Failed to resolve types: ${e?.message}`)}return r.json()};let tC=new WeakMap,tP=e=>{let t;if(e){let r=e.overrides??{packages:{},types:{}};tC.has(r)||tC.set(r,new tl),t=new tj({cache:tC.get(r),url:e.url,pageSize:e.pageSize,overrides:r})}return async(e,r,n)=>{let i=function(e){let t=new Set,r=new Set;for(let n of e.commands)switch(n.$kind){case"MakeMoveVec":n.MakeMoveVec.type&&tx([n.MakeMoveVec.type]).forEach(e=>{r.add(e)});break;case"MoveCall":let e=n.MoveCall,i=e.package.split("::")[0];if(tI(i)){if(!(0,tm.Y)(i))throw Error(`Invalid package name: ${i}`);t.add(i)}tx(e.typeArguments??[]).forEach(e=>{r.add(e)})}return{packages:[...t],types:[...r]}}(e);if(0===i.types.length&&0===i.packages.length)return n();!function(e,t){for(let r of e.commands){if(r.MakeMoveVec?.type){if(!tI(r.MakeMoveVec.type))continue;if(!t.types[r.MakeMoveVec.type])throw Error(`No resolution found for type: ${r.MakeMoveVec.type}`);r.MakeMoveVec.type=t.types[r.MakeMoveVec.type].type}let e=r.MoveCall;if(!e)continue;let n=e.package.split("::"),i=n[0];if(tI(i)&&!t.packages[i])throw Error(`No address found for package: ${i}`);tI(i)&&(n[0]=t.packages[i].package,e.package=n.join("::"));let s=e.typeArguments;if(s){for(let e=0;e<s.length;e++)if(tI(s[e])){if(!t.types[s[e]])throw Error(`No resolution found for type: ${s[e]}`);s[e]=t.types[s[e]].type}e.typeArguments=s}}}(e,await (t||function(e){if(!e.client)throw Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}(r).core.mvr).resolve({types:i.types,packages:i.packages})),await n()}};var tR=e=>{throw TypeError(e)},tT=(e,t,r)=>t.has(e)||tR("Cannot "+r),tD=(e,t,r)=>(tT(e,t,"read from private field"),r?r.call(e):t.get(e)),tM=(e,t,r)=>t.has(e)?tR("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),tU=(e,t,r,n)=>(tT(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),tB=(e,t,r)=>(tT(e,t,"access private method"),r);function tN(e,t=1/0){let r=[],n=t=>r[t]??(r[t]={$kind:"NestedResult",get NestedResult(){return["function"==typeof e?e():e,t]}});return new Proxy({$kind:"Result",get Result(){return"function"==typeof e?e():e}},{set(){throw Error("The transaction result is a proxy, and does not support setting properties directly")},get(e,r){if(r in e)return Reflect.get(e,r);if(r===Symbol.iterator)return function*(){let e=0;for(;e<t;)yield n(e),e++};if("symbol"==typeof r)return;let i=parseInt(r,10);if(!Number.isNaN(i)&&!(i<0))return n(i)}})}let tV=Symbol.for("@mysten/transaction"),tK={buildPlugins:new Map,serializationPlugins:new Map},tz=Symbol.for("@mysten/transaction/registry");function tW(){try{let e=globalThis;return e[tz]||(e[tz]=tK),e[tz]}catch{return tK}}let tF=class e{constructor(){tM(this,E),tM(this,m),tM(this,w),tM(this,b,new Map),tM(this,v,[]),tM(this,$,[]),tM(this,k,new Set),tM(this,_,new Set),tM(this,S,new Map),tM(this,j),this.object=function(e){function t(t){return e(t)}return t.system=t=>{let r=t?.mutable;return void 0!==r?e(eX.SharedObjectRef({objectId:"0x5",initialSharedVersion:1,mutable:r})):e({$kind:"UnresolvedObject",UnresolvedObject:{objectId:"0x5",initialSharedVersion:1}})},t.clock=()=>e(eX.SharedObjectRef({objectId:"0x6",initialSharedVersion:1,mutable:!1})),t.random=()=>e({$kind:"UnresolvedObject",UnresolvedObject:{objectId:"0x8",mutable:!1}}),t.denyList=t=>e({$kind:"UnresolvedObject",UnresolvedObject:{objectId:"0x403",mutable:t?.mutable}}),t.option=({type:e,value:t})=>r=>r.moveCall({typeArguments:[e],target:`0x1::option::${null===t?"none":"some"}`,arguments:null===t?[]:[r.object(t)]}),t}(e=>{if("function"==typeof e)return this.object(this.add(e));if("object"==typeof e&&(0,X.is)(et,e))return e;let t=tr(e),r=tD(this,j).inputs.find(e=>t===tr(e));return r?.Object?.SharedObject&&"object"==typeof e&&e.Object?.SharedObject&&(r.Object.SharedObject.mutable=r.Object.SharedObject.mutable||e.Object.SharedObject.mutable),r?{$kind:"Input",Input:tD(this,j).inputs.indexOf(r),type:"object"}:tB(this,E,A).call(this,"object","string"==typeof e?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:(0,H.yT)(e)}}:e)});let e=tW();tU(this,j,new ti),tU(this,w,[...e.buildPlugins.values()]),tU(this,m,[...e.serializationPlugins.values()])}static fromKind(t){let r=new e;return tU(r,j,ti.fromKindBytes("string"==typeof t?(0,q.G)(t):t)),tU(r,v,tD(r,j).inputs.slice()),tU(r,$,tD(r,j).commands.slice()),tU(r,k,new Set(tD(r,$).map((e,t)=>t))),r}static from(t){let r=new e;return t&&"object"==typeof t&&!0===t[tV]?tU(r,j,ti.restore(t.getData())):"string"==typeof t&&t.startsWith("{")?tU(r,j,ti.restore(JSON.parse(t))):tU(r,j,ti.fromBytes("string"==typeof t?(0,q.G)(t):t)),tU(r,v,tD(r,j).inputs.slice()),tU(r,$,tD(r,j).commands.slice()),tU(r,k,new Set(tD(r,$).map((e,t)=>t))),r}static registerGlobalSerializationPlugin(e,t){tW().serializationPlugins.set(e,t??e)}static unregisterGlobalSerializationPlugin(e){tW().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,t){tW().buildPlugins.set(e,t??e)}static unregisterGlobalBuildPlugin(e){tW().buildPlugins.delete(e)}addSerializationPlugin(e){tD(this,m).push(e)}addBuildPlugin(e){tD(this,w).push(e)}addIntentResolver(e,t){if(tD(this,b).has(e)&&tD(this,b).get(e)!==t)throw Error(`Intent resolver for ${e} already exists`);tD(this,b).set(e,t)}setSender(e){tD(this,j).sender=e}setSenderIfNotSet(e){tD(this,j).sender||(tD(this,j).sender=e)}setExpiration(e){tD(this,j).expiration=e?(0,X.Qc3)(ed,e):null}setGasPrice(e){tD(this,j).gasConfig.price=String(e)}setGasBudget(e){tD(this,j).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){null==tD(this,j).gasData.budget&&(tD(this,j).gasConfig.budget=String(e))}setGasOwner(e){tD(this,j).gasConfig.owner=e}setGasPayment(e){tD(this,j).gasConfig.payment=e.map(e=>(0,X.Qc3)(ee,e))}get blockData(){return eD(tD(this,j).snapshot())}getData(){return tD(this,j).snapshot()}get[tV](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:function(e){function t(t,r){if("string"==typeof t)return e(e9(t).serialize(r));if(t instanceof Uint8Array||(0,L.pF)(t))return e(t);throw Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return t.u8=t=>e(eH.$5.U8.serialize(t)),t.u16=t=>e(eH.$5.U16.serialize(t)),t.u32=t=>e(eH.$5.U32.serialize(t)),t.u64=t=>e(eH.$5.U64.serialize(t)),t.u128=t=>e(eH.$5.U128.serialize(t)),t.u256=t=>e(eH.$5.U256.serialize(t)),t.bool=t=>e(eH.$5.Bool.serialize(t)),t.string=t=>e(eH.$5.String.serialize(t)),t.address=t=>e(eH.$5.Address.serialize(t)),t.id=t.address,t.vector=(t,r)=>e(eH.$5.vector(e9(t)).serialize(r)),t.option=(t,r)=>e(eH.$5.option(e9(t)).serialize(r)),t}(e=>(0,L.pF)(e)?tB(this,E,A).call(this,"pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):tB(this,E,A).call(this,"pure",(0,X.is)(el,e)?(0,X.Qc3)(el,e):e instanceof Uint8Array?eX.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(eX.ObjectRef(...e))}receivingRef(...e){return this.object(eX.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(eX.SharedObjectRef(...e))}add(e){if("function"==typeof e){if(tD(this,S).has(e))return tD(this,S).get(e);let t=tB(this,E,O).call(this),r=e(t);if(!(r&&"object"==typeof r&&"then"in r))return tU(this,k,tD(t,k)),tD(this,S).set(e,r),r;let n=tB(this,E,I).call(this,{$kind:"$Intent",$Intent:{name:"AsyncTransactionThunk",inputs:{},data:{resultIndex:tD(this,j).commands.length,result:null}}});tD(this,_).add(Promise.resolve(r).then(e=>{n.$Intent.data.result=e}));let i=tN(()=>n.$Intent.data.resultIndex);return tD(this,S).set(e,i),i}return tB(this,E,I).call(this,e),tN(tD(this,j).commands.length-1)}splitCoins(e,t){let r=ef.SplitCoins("string"==typeof e?this.object(e):tB(this,E,C).call(this,e),t.map(e=>"number"==typeof e||"bigint"==typeof e||"string"==typeof e?this.pure.u64(e):tB(this,E,x).call(this,e)));return tB(this,E,I).call(this,r),tN(tD(this,j).commands.length-1,t.length)}mergeCoins(e,t){return this.add(ef.MergeCoins(this.object(e),t.map(e=>this.object(e))))}publish({modules:e,dependencies:t}){return this.add(ef.Publish({modules:e,dependencies:t}))}upgrade({modules:e,dependencies:t,package:r,ticket:n}){return this.add(ef.Upgrade({modules:e,dependencies:t,package:r,ticket:this.object(n)}))}moveCall({arguments:e,...t}){return this.add(ef.MoveCall({...t,arguments:e?.map(e=>tB(this,E,x).call(this,e))}))}transferObjects(e,t){return this.add(ef.TransferObjects(e.map(e=>this.object(e)),"string"==typeof t?this.pure.address(t):tB(this,E,x).call(this,t)))}makeMoveVec({type:e,elements:t}){return this.add(ef.MakeMoveVec({type:e,elements:t.map(e=>this.object(e))}))}serialize(){return JSON.stringify(eD(tD(this,j).snapshot()))}async toJSON(e={}){await this.prepareForSerialization(e);let t=this.isFullyResolved();return JSON.stringify((0,X.Qc3)(eL,t?{...tD(this,j).snapshot(),digest:tD(this,j).getDigest()}:tD(this,j).snapshot()),(e,t)=>"bigint"==typeof t?t.toString():t,2)}async sign(e){let{signer:t,...r}=e,n=await this.build(r);return t.signTransaction(n)}isFullyResolved(){return!(!tD(this,j).sender||tD(this,_).size>0||tD(this,j).commands.some(e=>e.$Intent)||e2(tD(this,j),{}))}async build(e={}){return await this.prepareForSerialization(e),await tB(this,E,P).call(this,e),tD(this,j).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await this.prepareForSerialization(e),await tB(this,E,P).call(this,e),tD(this,j).getDigest()}async prepareForSerialization(e){await tB(this,E,T).call(this),tB(this,E,D).call(this);let t=new Set;for(let e of tD(this,j).commands)e.$Intent&&t.add(e.$Intent.name);let r=[...tD(this,m)];for(let n of t)if(!e.supportedIntents?.includes(n)){if(!tD(this,b).has(n))throw Error(`Missing intent resolver for ${n}`);r.push(tD(this,b).get(n))}r.push(tP()),await tB(this,E,R).call(this,r,e)}};m=new WeakMap,w=new WeakMap,b=new WeakMap,v=new WeakMap,$=new WeakMap,k=new WeakMap,_=new WeakMap,S=new WeakMap,j=new WeakMap,E=new WeakSet,O=function(){let e=new tF;return tU(e,j,tD(this,j)),tU(e,m,tD(this,m)),tU(e,w,tD(this,w)),tU(e,b,tD(this,b)),tU(e,_,tD(this,_)),tU(e,k,new Set(tD(this,k))),tU(e,S,tD(this,S)),tD(this,v).push(tD(e,v)),tD(this,$).push(tD(e,$)),e},I=function(e){let t=tD(this,j).commands.length;return tD(this,$).push(e),tD(this,k).add(t),tD(this,j).commands.push(e),tD(this,j).mapCommandArguments(t,e=>{if("Result"===e.$kind&&!tD(this,k).has(e.Result))throw Error(`Result { Result: ${e.Result} } is not available to use in the current transaction`);if("NestedResult"===e.$kind&&!tD(this,k).has(e.NestedResult[0]))throw Error(`Result { NestedResult: [${e.NestedResult[0]}, ${e.NestedResult[1]}] } is not available to use in the current transaction`);if("Input"===e.$kind&&e.Input>=tD(this,j).inputs.length)throw Error(`Input { Input: ${e.Input} } references an input that does not exist in the current transaction`);return e}),e},A=function(e,t){return tD(this,v).push(t),tD(this,j).addInput(e,t)},x=function(e){return(0,L.pF)(e)?this.pure(e):tB(this,E,C).call(this,e)},C=function(e){if("function"==typeof e){let t=this.add(e);return"function"==typeof t?tB(this,E,C).call(this,t):(0,X.Qc3)(et,t)}return(0,X.Qc3)(et,e)},P=async function(e){if(!e.onlyTransactionKind&&!tD(this,j).sender)throw Error("Missing transaction sender");await tB(this,E,R).call(this,[...tD(this,w),e6],e)},R=async function(e,t){try{let r=n=>{if(n>=e.length)return()=>{};let i=e[n];return async()=>{let e=r(n+1),s=!1,a=!1;if(await i(tD(this,j),t,async()=>{if(s)throw Error(`next() was call multiple times in TransactionPlugin ${n}`);s=!0,await e(),a=!0}),!s)throw Error(`next() was not called in TransactionPlugin ${n}`);if(!a)throw Error(`next() was not awaited in TransactionPlugin ${n}`)}};await r(0)()}finally{tU(this,v,tD(this,j).inputs.slice()),tU(this,$,tD(this,j).commands.slice()),tU(this,k,new Set(tD(this,$).map((e,t)=>t)))}},T=async function(){for(;tD(this,_).size>0;){let e=Promise.all(tD(this,_));tD(this,_).clear(),tD(this,_).add(e),await e,tD(this,_).delete(e)}},D=function(){let e=tD(this,j).commands,t=tD(this,j).inputs,r=tD(this,$).flat(1/0),n=tD(this,v).flat(1/0);if(r.length!==e.length)throw Error("Unexpected number of commands found in transaction data");if(n.length!==t.length)throw Error("Unexpected number of inputs found in transaction data");let i=r.filter(e=>e.$Intent?.name!=="AsyncTransactionThunk");function s(t){let r=e[t];if(r.$Intent?.name==="AsyncTransactionThunk"){let e=r.$Intent.data.result;if(null==e)throw Error("AsyncTransactionThunk has not been resolved");return s(e.Result)}let n=i.indexOf(r);if(-1===n)throw Error("Unable to find original index for command");return n}for(let[r,a]of(tD(this,j).commands=i,tD(this,j).inputs=n,tU(this,$,i),tU(this,v,n),tU(this,k,new Set(i.map((e,t)=>t))),tD(this,j).mapArguments(e=>{if("Input"===e.$kind){let r=n.indexOf(t[e.Input]);if(-1===r)throw Error("Input has not been resolved");return{...e,Input:r}}if("Result"===e.$kind){let t=s(e.Result);return{...e,Result:t}}if("NestedResult"===e.$kind){let t=s(e.NestedResult[0]);return{...e,NestedResult:[t,e.NestedResult[1]]}}return e}),e.entries()))if(a.$Intent?.name==="AsyncTransactionThunk")try{a.$Intent.data.resultIndex=s(r)}catch{}};var tG=r(73899),tq=r(47769),tL=r(98600),tX=r(77220);let tH=new tL.wj({name:"@local-pkg/2pc-mpc::coordinator::DWalletCoordinator",fields:{id:tX.F,version:eH.$5.u64(),package_id:eH.$5.Address,new_package_id:eH.$5.option(eH.$5.Address),migration_epoch:eH.$5.option(eH.$5.u64())}});var tJ=r(4952);let tZ=new tL.wj({name:"0x2::table::Table",fields:{id:tJ.F,size:eH.$5.u64()}}),tY=new tL.wj({name:"0x2::table_vec::TableVec",fields:{contents:tZ}}),tQ=new tL.wj({name:"@local-pkg/system::system::System",fields:{id:tJ.F,version:eH.$5.u64(),package_id:eH.$5.Address,new_package_id:eH.$5.option(eH.$5.Address),migration_epoch:eH.$5.option(eH.$5.u64())}});var t0=r(86099),t1=r(87807),t5=r(25798),t2=r(79433),t6=r(83343),t8=r(52558),t3=Object.defineProperty,t4=e=>{throw TypeError(e)},t7=(e,t,r)=>t in e?t3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,t9=(e,t,r)=>t7(e,"symbol"!=typeof t?t+"":t,r),re=(e,t,r)=>t.has(e)||t4("Cannot "+r),rt=(e,t,r)=>t.has(e)?t4("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),rr=(e,t,r)=>(re(e,t,"access private method"),r);class rn{constructor({suiClient:e,config:t,cache:r=!0,encryptionKeyOptions:n}){rt(this,M),t9(this,"ikaConfig"),t9(this,"encryptionKeyOptions"),t9(this,"client"),t9(this,"cache"),t9(this,"cachedProtocolPublicParameters",new Map),t9(this,"cachedObjects"),t9(this,"cachedEncryptionKeys",new Map),t9(this,"objectsPromise"),t9(this,"encryptionKeysPromise"),this.client=e,this.ikaConfig=t,this.cache=r,this.encryptionKeyOptions=n||{autoDetect:!0}}invalidateCache(){this.cachedObjects=void 0,this.cachedProtocolPublicParameters.clear(),this.objectsPromise=void 0,this.cachedEncryptionKeys.clear(),this.encryptionKeysPromise=void 0}invalidateObjectCache(){this.cachedObjects=void 0,this.objectsPromise=void 0}invalidateEncryptionKeyCache(){this.cachedEncryptionKeys.clear(),this.encryptionKeysPromise=void 0}invalidateProtocolPublicParametersCache(e,t){if(void 0!==e&&void 0!==t)this.cachedProtocolPublicParameters.delete(rr(this,M,z).call(this,e,t));else if(void 0!==e)for(let t of this.cachedProtocolPublicParameters.keys())t.startsWith(`${e}-`)&&this.cachedProtocolPublicParameters.delete(t);else this.cachedProtocolPublicParameters.clear()}async initialize(){await this.ensureInitialized()}async ensureInitialized(){return this.cache?(this.cachedObjects||(this.objectsPromise?await this.objectsPromise:await rr(this,M,U).call(this)),this.cachedObjects):rr(this,M,U).call(this)}async getAllNetworkEncryptionKeys(){return this.cache?(this.cachedEncryptionKeys.size>0||(this.encryptionKeysPromise?await this.encryptionKeysPromise:await rr(this,M,N).call(this)),Array.from(this.cachedEncryptionKeys.values())):rr(this,M,N).call(this)}async getLatestNetworkEncryptionKey(){let e=await this.getAllNetworkEncryptionKeys();if(0===e.length)throw new t5.F7("No network encryption keys found");return e[e.length-1]}async getNetworkEncryptionKey(e){let t=(await this.getAllNetworkEncryptionKeys()).find(t=>t.id===e);if(!t)throw new t5.uH(`Network encryption key ${e} not found`);return t}async getDWalletNetworkEncryptionKey(e){let t=(await this.getDWallet(e)).dwallet_network_encryption_key_id;return this.getNetworkEncryptionKey(t)}async getConfiguredNetworkEncryptionKey(){return this.encryptionKeyOptions.encryptionKeyID?this.getNetworkEncryptionKey(this.encryptionKeyOptions.encryptionKeyID):this.getLatestNetworkEncryptionKey()}async getDWallet(e){return await this.ensureInitialized(),this.client.getObject({id:e,options:{showBcs:!0}}).then(e=>{let t=tq.YL.fromBase64((0,t8.vJ)(e));return{...t,kind:rr(this,M,W).call(this,t)}})}async getDWalletInParticularState(e,t,r={}){return rr(this,M,G).call(this,()=>this.getDWallet(e),t,`DWallet ${e} to reach state ${t}`,r)}async getPresign(e){return await this.ensureInitialized(),this.client.getObject({id:e,options:{showBcs:!0}}).then(e=>tq.Hp.fromBase64((0,t8.vJ)(e)))}async getPresignInParticularState(e,t,r={}){return rr(this,M,G).call(this,()=>this.getPresign(e),t,`presign ${e} to reach state ${t}`,r)}async getEncryptedUserSecretKeyShare(e){return await this.ensureInitialized(),this.client.getObject({id:e,options:{showBcs:!0}}).then(e=>tq.XG.fromBase64((0,t8.vJ)(e)))}async getEncryptedUserSecretKeyShareInParticularState(e,t,r={}){return rr(this,M,G).call(this,()=>this.getEncryptedUserSecretKeyShare(e),t,`encrypted user secret key share ${e} to reach state ${t}`,r)}async getPartialUserSignature(e){return await this.ensureInitialized(),this.client.getObject({id:e,options:{showBcs:!0}}).then(e=>tq.Kz.fromBase64((0,t8.vJ)(e)))}async getPartialUserSignatureInParticularState(e,t,r={}){return rr(this,M,G).call(this,()=>this.getPartialUserSignature(e),t,`partial user signature ${e} to reach state ${t}`,r)}async getSign(e,t,r){await this.ensureInitialized(),(0,t2.CM)(t,r);let n=await this.client.getObject({id:e,options:{showBcs:!0}}),i=tq.hu.fromBase64((0,t8.vJ)(n));return"Completed"===i.state.$kind&&(i.state.Completed.signature=Array.from(await (0,t1.Kb)(t,r,Uint8Array.from(i.state.Completed.signature)))),i}async getSignInParticularState(e,t,r,n,i={}){return rr(this,M,G).call(this,()=>this.getSign(e,t,r),n,`sign ${e} to reach state ${n}`,i)}async getMultipleDWallets(e){return await this.ensureInitialized(),this.client.multiGetObjects({ids:e,options:{showBcs:!0}}).then(e=>e.map(e=>{let t=tq.YL.fromBase64((0,t8.vJ)(e));return{...t,kind:rr(this,M,W).call(this,t)}}))}async getOwnedDWalletCaps(e,t,r){await this.ensureInitialized();let n=await this.client.getOwnedObjects({owner:e,filter:{StructType:`${this.ikaConfig.packages.ikaDwallet2pcMpcOriginalPackage}::coordinator_inner::DWalletCap`},options:{showBcs:!0},cursor:t,limit:r});return{dWalletCaps:n.data.map(e=>tq.v.fromBase64((0,t8.vJ)(e))),cursor:n.nextCursor,hasNextPage:n.hasNextPage}}getCachedProtocolPublicParameters(e,t){let r=rr(this,M,z).call(this,e,t),n=this.cachedProtocolPublicParameters.get(r);if(!n)return;let i=this.cachedEncryptionKeys.get(e);if(i){if(n.networkEncryptionKeyPublicOutputID===i.networkDKGOutputID&&n.epoch===i.epoch&&n.curve===t)return n.protocolPublicParameters;this.cachedProtocolPublicParameters.delete(r)}}isProtocolPublicParametersCached(e,t){return void 0!==this.getCachedProtocolPublicParameters(e,t)}getEncryptionKeyOptions(){return{...this.encryptionKeyOptions}}setEncryptionKeyOptions(e){this.encryptionKeyOptions={...e}}setEncryptionKeyID(e){this.encryptionKeyOptions={...this.encryptionKeyOptions,encryptionKeyID:e}}async getProtocolPublicParameters(e,t){let r,n;await rr(this,M,V).call(this);let i=(r=e?await this.getDWalletNetworkEncryptionKey(e.id.id):await this.getConfiguredNetworkEncryptionKey()).id,s=r.networkDKGOutputID,a=r.epoch;n=e?(0,t2.kx)(e.curve):void 0!==t?t:(0,t2.kx)(0);let o=rr(this,M,z).call(this,i,n),c=this.cachedProtocolPublicParameters.get(o);if(c&&c.networkEncryptionKeyPublicOutputID===s&&c.epoch===a&&c.curve===n)return c.protocolPublicParameters;let u=r.reconfigurationOutputID?await (0,t1.vU)(n,await this.readTableVecAsRawBytes(r.reconfigurationOutputID),await this.readTableVecAsRawBytes(s)):await (0,t1.Te)(n,await this.readTableVecAsRawBytes(s));return this.cachedProtocolPublicParameters.set(o,{networkEncryptionKeyPublicOutputID:s,epoch:a,curve:n,protocolPublicParameters:u}),u}async getActiveEncryptionKey(e){await this.ensureInitialized();let t=new tF;(0,t0.IA)(this.ikaConfig,t.sharedObjectRef({objectId:this.ikaConfig.objects.ikaDWalletCoordinator.objectID,initialSharedVersion:this.ikaConfig.objects.ikaDWalletCoordinator.initialSharedVersion,mutable:!0}),e,t);let r=await this.client.devInspectTransactionBlock({sender:e,transactionBlock:t}),n=new Uint8Array(r.results?.at(0)?.returnValues?.at(0)?.at(0)),i=(0,tG.N)(n),s=await this.client.getObject({id:i,options:{showBcs:!0}});return tq.BC.fromBase64((0,t8.vJ)(s))}async getEpoch(){return Number((await this.ensureInitialized()).coordinatorInner.current_epoch)}async readTableVecAsRawBytes(e){try{let t=null,r=[];do{let n=await this.client.getDynamicFields({parentId:e,cursor:t});if(!n?.data?.length){if(0===r.length)throw new t5.uH("Dynamic fields",e);break}if(r.push(...n.data),t=n.nextCursor,!n.hasNextPage)break}while(t);let n=new Map,i=new Set(r.map(e=>e.objectId));await rr(this,M,K).call(this,[...i],({objectId:e,fields:t})=>{let r=parseInt(t.name);if(isNaN(r))throw new t5.x3("Table index (expected numeric name)",e);n.set(r,t.value)});let s=Array.from(n.keys()).sort((e,t)=>e-t);if(0===s.length)throw new t5.uH("No table chunks found",e);let a=s.map(e=>n.get(e)).filter(e=>!!e),o=a.reduce((e,t)=>e+t.length,0),c=new Uint8Array(o),u=0;for(let e of a)c.set(e,u),u+=e.length;return c}catch(t){if(t instanceof t5.x3||t instanceof t5.uH||t instanceof t5.F7)throw t;throw new t5.F7(`Failed to read table vector as raw bytes: ${e}`,t)}}}M=new WeakSet,U=async function(){if(this.cachedObjects)return{coordinatorInner:this.cachedObjects.coordinatorInner,systemInner:this.cachedObjects.systemInner};if(this.objectsPromise)return this.objectsPromise;this.objectsPromise=rr(this,M,B).call(this);try{let e=await this.objectsPromise;return this.cachedObjects={coordinatorInner:e.coordinatorInner,systemInner:e.systemInner},e}catch(e){throw this.objectsPromise=void 0,e}},B=async function(){try{let[e,t]=await this.client.multiGetObjects({ids:[this.ikaConfig.objects.ikaDWalletCoordinator.objectID,this.ikaConfig.objects.ikaSystemObject.objectID],options:{showBcs:!0,showOwner:!0}}),r=tH.fromBase64((0,t8.vJ)(e)),n=tQ.fromBase64((0,t8.vJ)(t)),[i,s]=await Promise.all([this.client.getDynamicFields({parentId:r.id.id}),this.client.getDynamicFields({parentId:n.id.id})]);if(!i.data?.length||!s.data?.length)throw new t5.uH("Dynamic fields for coordinator or system");let a=i.data[i.data.length-1],o=s.data[s.data.length-1],[c,u]=await this.client.multiGetObjects({ids:[a.objectId,o.objectId],options:{showBcs:!0}}),l=t6.vV.fromBase64((0,t8.vJ)(c)).value,d=t6.n5.fromBase64((0,t8.vJ)(u)).value;return this.ikaConfig.packages.ikaSystemPackage=n.package_id,this.ikaConfig.packages.ikaDwallet2pcMpcPackage=r.package_id,this.ikaConfig.objects.ikaSystemObject.initialSharedVersion=t.data?.owner?.Shared?.initial_shared_version??0,this.ikaConfig.objects.ikaDWalletCoordinator.initialSharedVersion=e.data?.owner?.Shared?.initial_shared_version??0,{coordinatorInner:l,systemInner:d}}catch(e){if(e instanceof t5.x3||e instanceof t5.uH)throw e;throw new t5.F7("Failed to fetch objects",e)}},N=async function(){if(this.encryptionKeysPromise)return this.encryptionKeysPromise;this.encryptionKeysPromise=rr(this,M,V).call(this);try{return await this.encryptionKeysPromise}catch(e){throw this.encryptionKeysPromise=void 0,e}},V=async function(){try{let e=await this.ensureInitialized(),t=await this.client.getDynamicFields({parentId:e.coordinatorInner.dwallet_network_encryption_keys.id.id});if(!t.data?.length)throw new t5.uH("Network encryption keys");let r=[];for(let e of t.data){let t=e.name.value,n=await this.client.getObject({id:e.objectId,options:{showBcs:!0}}),i=tq.RB.fromBase64((0,t8.vJ)(n)),s=await (0,t8.hW)(this.client,i.reconfiguration_public_outputs.id.id),a=(await Promise.all(s.map(async e=>{let t=e.name.value,r=await this.client.getObject({id:e.objectId,options:{showBcs:!0}}),n=(0,t6.e9)(tY).fromBase64((0,t8.vJ)(r));return{name:t,parsedValue:n}}))).sort((e,t)=>Number(e.name)-Number(t.name)).at(-2),o={id:t,epoch:Number(i.dkg_at_epoch),networkDKGOutputID:i.network_dkg_public_output.contents.id.id,reconfigurationOutputID:a?.parsedValue.value.contents.id.id};r.push(o),this.cachedEncryptionKeys.set(t,o)}return r.sort((e,t)=>e.epoch-t.epoch),r}catch(e){if(e instanceof t5.x3||e instanceof t5.uH)throw e;throw new t5.F7("Failed to fetch encryption keys",e)}},K=async function(e,t){try{let r=[];for(let n=0;n<e.length;n+=50){let i=e.slice(n,n+50);for(let e of(await this.client.multiGetObjects({ids:i,options:{showContent:!0}}))){if(e.error){let t="object_id"in e.error?`object ${e.error.object_id}`:"unknown object";throw new t5.F7(`Failed to fetch ${t}: ${e.error.code}`)}let n=e.data?.objectId,i=e.data?.content;if(!i||"moveObject"!==i.dataType)throw new t5.x3("Object content (expected moveObject)",n);let s=i.fields;if(!s)throw new t5.x3("Object content.fields missing",n);let a="string"==typeof s.name?s.name:String(s.name),o=s.value instanceof Uint8Array?s.value:new Uint8Array(s.value);r.push(t({objectId:n??"unknown",fields:{name:a,value:o}}))}}return r}catch(e){if(e instanceof t5.F7||e instanceof t5.x3)throw e;throw new t5.F7("Failed to process batched objects",e)}},z=function(e,t){return`${e}-${t}`},W=function(e){return e.is_imported_key_dwallet&&e.public_user_secret_key_share?"imported-key-shared":e.is_imported_key_dwallet?"imported-key":e.public_user_secret_key_share?"shared":"zero-trust"},F=async function(e,t,r,n={}){let i;await this.ensureInitialized();let{timeout:s=3e4,interval:a=1e3,maxInterval:o=5e3,backoffMultiplier:c=1.5,signal:u}=n;if(u?.aborted)throw Error("Operation aborted");let l=Date.now(),d=a;for(;Date.now()-l<s;){if(u?.aborted)throw Error("Operation aborted");try{let r=await e();if(t(r))return r}catch(e){i=e}let r=d;await new Promise((e,t)=>{let n=setTimeout(e,r);u?.addEventListener("abort",()=>{clearTimeout(n),t(Error("Operation aborted"))})}),d=Math.min(d*c,o)}throw Error(i?`Timeout waiting for ${r}. Last error: ${i.message}`:`Timeout waiting for ${r}`)},G=async function(e,t,r,n={}){return rr(this,M,F).call(this,e,e=>e.state.$kind===t,r,n)}},50491:function(e,t,r){r.d(t,{w:function(){return B}});var n,i,s,a,o,c,u,l,d,h,p,f,g,y,m,w,b,v,$,k,_,S,j,E=r(280),O=r(86099),I=r(87807),A=r(79433),x=r(83343),C=r(17533),P=e=>{throw TypeError(e)},R=(e,t,r)=>t.has(e)||P("Cannot "+r),T=(e,t,r)=>(R(e,t,"read from private field"),r?r.call(e):t.get(e)),D=(e,t,r)=>t.has(e)?P("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),M=(e,t,r,n)=>(R(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),U=(e,t,r)=>(R(e,t,"access private method"),r);class B{constructor({ikaClient:e,transaction:t,userShareEncryptionKeys:r}){D(this,c),D(this,n),D(this,i),D(this,s),D(this,a),D(this,o),M(this,n,e),M(this,i,t),M(this,s,r)}async requestDWalletDKGFirstRoundAsync(e){throw Error("requestDWalletDKGFirstRoundAsync is deprecated. Use requestDWalletDKGFirstRound instead")}requestDWalletDKGFirstRound(e){throw Error("requestDWalletDKGFirstRound is deprecated. Use requestDWalletDKG instead")}requestDWalletDKGSecondRound(e){throw Error("requestDWalletDKGSecondRound is deprecated. Use requestDWalletDKG instead")}async requestDWalletDKG({dkgRequestInput:e,ikaCoin:t,suiCoin:r,sessionIdentifier:a,dwalletNetworkEncryptionKeyId:o,signDuringDKGRequest:l,curve:d}){if(!T(this,s))throw Error("User share encryption keys are not set");return l&&((0,A._v)(l.hashScheme,l.signatureAlgorithm),(0,A.CM)(d,l.signatureAlgorithm)),O.WJ(T(this,n).ikaConfig,U(this,c,u).call(this),o,(0,A.PO)(d),e.userDKGMessage,e.encryptedUserShareAndProof,T(this,s).getSuiAddress(),e.userPublicOutput,T(this,s).getSigningPublicKeyBytes(),a,l?O.mr(T(this,n).ikaConfig,U(this,c,u).call(this),l.verifiedPresignCap,(0,A.Em)(d,l.signatureAlgorithm,l.hashScheme),l.message,await U(this,c,m).call(this,{userSignatureInputs:{secretShare:e.userSecretKeyShare,publicOutput:e.userPublicOutput,hash:l.hashScheme,message:l.message,signatureScheme:l.signatureAlgorithm,presign:l.presign,curve:d,createWithCentralizedOutput:!0},signDuringDKG:!!l}),T(this,i)):null,t,r,T(this,i))}async requestDWalletDKGWithPublicUserShare({sessionIdentifier:e,dwalletNetworkEncryptionKeyId:t,curve:r,publicKeyShareAndProof:a,publicUserSecretKeyShare:o,signDuringDKGRequest:l,userPublicOutput:d,ikaCoin:h,suiCoin:p}){if(!T(this,s))throw Error("User share encryption keys are not set");return l&&((0,A._v)(l.hashScheme,l.signatureAlgorithm),(0,A.CM)(r,l.signatureAlgorithm)),O._k(T(this,n).ikaConfig,U(this,c,u).call(this),t,(0,A.PO)(r),a,o,d,e,l?O.mr(T(this,n).ikaConfig,U(this,c,u).call(this),l.verifiedPresignCap,(0,A.Em)(r,l.signatureAlgorithm,l.hashScheme),l.message,await U(this,c,m).call(this,{userSignatureInputs:{hash:l.hashScheme,message:l.message,signatureScheme:l.signatureAlgorithm,presign:l.presign,curve:r,publicOutput:d,secretShare:o,createWithCentralizedOutput:!0},signDuringDKG:!!l}),T(this,i)):null,h,p,T(this,i))}async acceptEncryptedUserShare({dWallet:e,userPublicOutput:t,encryptedUserSecretKeyShareId:r,sourceEncryptionKey:a,sourceEncryptedUserSecretKeyShare:o,destinationEncryptedUserSecretKeyShare:l}){if(!T(this,s))throw Error("User share encryption keys are not set");if(t&&r)return O.zK(T(this,n).ikaConfig,U(this,c,u).call(this),e.id.id,r,await T(this,s).getUserOutputSignature(e,t),T(this,i)),this;if(a&&o&&l)return O.zK(T(this,n).ikaConfig,U(this,c,u).call(this),e.id.id,l.id.id,await T(this,s).getUserOutputSignatureForTransferredDWallet(e,o,a),T(this,i)),this;throw Error("Invalid parameters: must provide either (userPublicOutput, encryptedUserSecretKeyShareId) for regular DWallet or (sourceEncryptionKey, sourceEncryptedUserSecretKeyShare, destinationEncryptedUserSecretKeyShare) for transferred DWallet")}async registerEncryptionKey({curve:e}){if(!T(this,s))throw Error("User share encryption keys are not set");return O.Q9(T(this,n).ikaConfig,U(this,c,u).call(this),(0,A.PO)(e),T(this,s).encryptionKey,await T(this,s).getEncryptionKeySignature(),T(this,s).getSigningPublicKeyBytes(),T(this,i)),this}makeDWalletUserSecretKeySharesPublic({dWallet:e,secretShare:t,ikaCoin:r,suiCoin:s}){return O.tW(T(this,n).ikaConfig,U(this,c,u).call(this),e.id.id,t,this.createSessionIdentifier(),r,s,T(this,i)),this}requestPresign({dWallet:e,signatureAlgorithm:t,ikaCoin:r,suiCoin:n}){return U(this,c,l).call(this,e),U(this,c,j).call(this,e,t),(0,A.CM)((0,A.kx)(e.curve),t),U(this,c,g).call(this,{dWallet:e,signatureAlgorithm:t,ikaCoin:r,suiCoin:n})}requestGlobalPresign({dwalletNetworkEncryptionKeyId:e,curve:t,signatureAlgorithm:r,ikaCoin:n,suiCoin:i}){return(0,A.CM)(t,r),U(this,c,y).call(this,{dwalletNetworkEncryptionKeyId:e,curve:t,signatureAlgorithm:r,ikaCoin:n,suiCoin:i})}approveMessage({dWalletCap:e,curve:t,signatureAlgorithm:r,hashScheme:s,message:a}){(0,A.CM)(t,r),(0,A._v)(s,r);let{signatureAlgorithmNumber:o,hashNumber:l}=(0,A.ej)(t,r,s);return O._2(T(this,n).ikaConfig,U(this,c,u).call(this),T(this,i).object(e),o,l,a,T(this,i))}verifyPresignCap({presign:e,unverifiedPresignCap:t}){let r;if(t)r=t;else if(e?.cap_id)r=e.cap_id;else throw Error("Either presign or unverifiedPresignCap must be provided");return O.y1(T(this,n).ikaConfig,U(this,c,u).call(this),T(this,i).object(r),T(this,i))}approveImportedKeyMessage({dWalletCap:e,curve:t,signatureAlgorithm:r,hashScheme:s,message:a}){(0,A.CM)(t,r),(0,A._v)(s,r);let{signatureAlgorithmNumber:o,hashNumber:l}=(0,A.ej)(t,r,s);return O.aO(T(this,n).ikaConfig,U(this,c,u).call(this),T(this,i).object(e),o,l,a,T(this,i))}async requestSign({dWallet:e,messageApproval:t,hashScheme:r,verifiedPresignCap:n,presign:i,encryptedUserSecretKeyShare:s,secretShare:a,publicOutput:o,message:u,signatureScheme:h,ikaCoin:p,suiCoin:f}){(0,A._v)(r,h),(0,A.CM)((0,A.kx)(e.curve),h);let g=!!e.public_user_secret_key_share;if(s)return U(this,c,w).call(this,{verifiedPresignCap:n,messageApproval:t,userSignatureInputs:{activeDWallet:e,presign:i,encryptedUserSecretKeyShare:s,message:u,hash:r,signatureScheme:h,curve:(0,A.kx)(e.curve)},ikaCoin:p,suiCoin:f});if(a&&o)return U(this,c,w).call(this,{verifiedPresignCap:n,messageApproval:t,userSignatureInputs:{activeDWallet:e,presign:i,secretShare:a,publicOutput:o,message:u,hash:r,signatureScheme:h,curve:(0,A.kx)(e.curve)},ikaCoin:p,suiCoin:f});if(g)return U(this,c,d).call(this,e),U(this,c,l).call(this,e),U(this,c,w).call(this,{verifiedPresignCap:n,messageApproval:t,userSignatureInputs:{activeDWallet:e,presign:i,publicOutput:Uint8Array.from(e.state.Active?.public_output),secretShare:Uint8Array.from(e.public_user_secret_key_share),message:u,hash:r,signatureScheme:h,curve:(0,A.kx)(e.curve)},ikaCoin:p,suiCoin:f});throw Error("DWallet signing requires either encryptedUserSecretKeyShare, (secretShare + publicOutput), or public_user_secret_key_share on the DWallet")}async requestSignWithImportedKey({dWallet:e,importedKeyMessageApproval:t,hashScheme:r,verifiedPresignCap:n,presign:i,encryptedUserSecretKeyShare:s,secretShare:a,publicOutput:o,message:u,signatureScheme:l,ikaCoin:h,suiCoin:p}){if(!e.is_imported_key_dwallet)throw Error("dWallet must be an ImportedKeyDWallet");let f=l||x.Ye.ECDSASecp256k1;(0,A._v)(r,f),(0,A.CM)((0,A.kx)(e.curve),f);let g=!!e.public_user_secret_key_share;if(s)return U(this,c,v).call(this,{verifiedPresignCap:n,importedKeyMessageApproval:t,userSignatureInputs:{activeDWallet:e,encryptedUserSecretKeyShare:s,presign:i,message:u,hash:r,signatureScheme:f,curve:(0,A.kx)(e.curve)},ikaCoin:h,suiCoin:p});if(a&&o)return U(this,c,v).call(this,{verifiedPresignCap:n,importedKeyMessageApproval:t,userSignatureInputs:{activeDWallet:e,secretShare:a,publicOutput:o,presign:i,message:u,hash:r,signatureScheme:f,curve:(0,A.kx)(e.curve)},ikaCoin:h,suiCoin:p});if(g)return U(this,c,d).call(this,e),U(this,c,v).call(this,{verifiedPresignCap:n,importedKeyMessageApproval:t,userSignatureInputs:{activeDWallet:e,presign:i,message:u,hash:r,signatureScheme:f,curve:(0,A.kx)(e.curve)},ikaCoin:h,suiCoin:p});throw Error("Imported Key DWallet signing requires either encryptedUserSecretKeyShare, (secretShare + publicOutput), or public_user_secret_key_share on the DWallet")}async requestFutureSign({dWallet:e,verifiedPresignCap:t,presign:r,encryptedUserSecretKeyShare:n,secretShare:i,publicOutput:s,message:a,hashScheme:o,signatureScheme:u,ikaCoin:h,suiCoin:p}){let f;(0,A._v)(o,u),(0,A.CM)((0,A.kx)(e.curve),u);let g=!!e.public_user_secret_key_share;if(n)f=await U(this,c,b).call(this,{verifiedPresignCap:t,userSignatureInputs:{activeDWallet:e,presign:r,encryptedUserSecretKeyShare:n,message:a,hash:o,signatureScheme:u,curve:(0,A.kx)(e.curve)},ikaCoin:h,suiCoin:p});else if(i&&s)f=await U(this,c,b).call(this,{verifiedPresignCap:t,userSignatureInputs:{activeDWallet:e,presign:r,secretShare:i,publicOutput:s,message:a,hash:o,signatureScheme:u,curve:(0,A.kx)(e.curve)},ikaCoin:h,suiCoin:p});else if(g)U(this,c,d).call(this,e),U(this,c,l).call(this,e),f=await U(this,c,b).call(this,{verifiedPresignCap:t,userSignatureInputs:{activeDWallet:e,presign:r,publicOutput:Uint8Array.from(e.state.Active?.public_output),secretShare:Uint8Array.from(e.public_user_secret_key_share),message:a,hash:o,signatureScheme:u,curve:(0,A.kx)(e.curve)},ikaCoin:h,suiCoin:p});else throw Error("DWallet future signing requires either encryptedUserSecretKeyShare, (secretShare + publicOutput), or public_user_secret_key_share on the DWallet");return f}async requestFutureSignWithImportedKey({dWallet:e,verifiedPresignCap:t,presign:r,encryptedUserSecretKeyShare:n,secretShare:i,publicOutput:s,message:a,hashScheme:o,signatureScheme:u,ikaCoin:h,suiCoin:p}){let f;(0,A._v)(o,u),(0,A.CM)((0,A.kx)(e.curve),u);let g=!!e.public_user_secret_key_share;if(n)f=await U(this,c,b).call(this,{verifiedPresignCap:t,userSignatureInputs:{activeDWallet:e,presign:r,encryptedUserSecretKeyShare:n,message:a,hash:o,signatureScheme:u,curve:(0,A.kx)(e.curve)},ikaCoin:h,suiCoin:p});else if(i&&s)f=await U(this,c,b).call(this,{verifiedPresignCap:t,userSignatureInputs:{activeDWallet:e,presign:r,secretShare:i,publicOutput:s,message:a,hash:o,signatureScheme:u,curve:(0,A.kx)(e.curve)},ikaCoin:h,suiCoin:p});else if(g)U(this,c,d).call(this,e),U(this,c,l).call(this,e),f=await U(this,c,b).call(this,{verifiedPresignCap:t,userSignatureInputs:{activeDWallet:e,presign:r,publicOutput:Uint8Array.from(e.state.Active?.public_output),secretShare:Uint8Array.from(e.public_user_secret_key_share),message:a,hash:o,signatureScheme:u,curve:(0,A.kx)(e.curve)},ikaCoin:h,suiCoin:p});else throw Error("Imported Key DWallet future signing requires either encryptedUserSecretKeyShare, (secretShare + publicOutput), or public_user_secret_key_share on the DWallet");return f}futureSign({partialUserSignatureCap:e,messageApproval:t,ikaCoin:r,suiCoin:s}){return O.Pn(T(this,n).ikaConfig,U(this,c,u).call(this),O.fG(T(this,n).ikaConfig,U(this,c,u).call(this),T(this,i).object(e),T(this,i)),t,this.createSessionIdentifier(),r,s,T(this,i))}futureSignWithImportedKey({partialUserSignatureCap:e,importedKeyMessageApproval:t,ikaCoin:r,suiCoin:s}){return O.nx(T(this,n).ikaConfig,U(this,c,u).call(this),O.fG(T(this,n).ikaConfig,U(this,c,u).call(this),T(this,i).object(e),T(this,i)),t,this.createSessionIdentifier(),r,s,T(this,i))}async requestImportedKeyDWalletVerification({importDWalletVerificationRequestInput:e,curve:t,signerPublicKey:r,sessionIdentifier:n,ikaCoin:i,suiCoin:s}){return await U(this,c,_).call(this,{importDWalletVerificationRequestInput:e,curve:t,signerPublicKey:r,sessionIdentifier:n,ikaCoin:i,suiCoin:s})}async requestReEncryptUserShareFor({dWallet:e,destinationEncryptionKeyAddress:t,sourceEncryptedUserSecretKeyShare:r,sourceSecretShare:i,ikaCoin:a,suiCoin:o}){let u;if(i)u=i;else{if(!T(this,s))throw Error("User share encryption keys are not set");let{secretShare:t}=await T(this,s).decryptUserShare(e,r,await T(this,n).getProtocolPublicParameters(e));u=t}return await U(this,c,k).call(this,{dWallet:e,destinationEncryptionKeyAddress:t,sourceEncryptedUserSecretKeyShare:r,sourceSecretShare:u,ikaCoin:a,suiCoin:o}),this}createSessionIdentifier(){return this.registerSessionIdentifier((0,I.ow)())}registerSessionIdentifier(e){return O.$t(T(this,n).ikaConfig,U(this,c,u).call(this),e,T(this,i))}hasDWallet({dwalletId:e}){return O.Ge(T(this,n).ikaConfig,U(this,c,u).call(this),e,T(this,i))}getDWallet({dwalletId:e}){return O.Jm(T(this,n).ikaConfig,U(this,c,u).call(this),e,T(this,i))}}n=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakSet,u=function(){return T(this,a)||M(this,a,T(this,i).sharedObjectRef({objectId:T(this,n).ikaConfig.objects.ikaDWalletCoordinator.objectID,initialSharedVersion:T(this,n).ikaConfig.objects.ikaDWalletCoordinator.initialSharedVersion,mutable:!0})),T(this,a)},l=function(e){if(!e.state.Active?.public_output)throw Error("DWallet public output is not set")},d=function(e){if(!e.public_user_secret_key_share)throw Error("DWallet public user secret key share is not set")},h=function(e){if(!e.state.Completed?.presign)throw Error("Presign is not completed")},p=async function({curve:e,verifiedPublicOutput:t,secretShare:r,publicParameters:n}){if(!(0,I._H)(e,r,t,n))throw Error("User share verification failed")},f=async function({dWallet:e,encryptedUserSecretKeyShare:t,publicParameters:r}){if(!T(this,s))throw Error("User share encryption keys are not set");let i=r??await T(this,n).getProtocolPublicParameters(e),{secretShare:a,verifiedPublicOutput:o}=await T(this,s).decryptUserShare(e,t,i);return await U(this,c,p).call(this,{curve:(0,A.kx)(e.curve),verifiedPublicOutput:o,secretShare:a,publicParameters:i}),{publicParameters:i,secretShare:a,verifiedPublicOutput:o}},g=function({dWallet:e,signatureAlgorithm:t,ikaCoin:r,suiCoin:s}){let{signatureAlgorithmNumber:a}=(0,A.qb)((0,A.kx)(e.curve),t);return O.sK(T(this,n).ikaConfig,U(this,c,u).call(this),e.id.id,a,this.createSessionIdentifier(),r,s,T(this,i))},y=function({dwalletNetworkEncryptionKeyId:e,curve:t,signatureAlgorithm:r,ikaCoin:s,suiCoin:a}){let{curveNumber:o,signatureAlgorithmNumber:l}=(0,A.qb)(t,r);return O.N0(T(this,n).ikaConfig,U(this,c,u).call(this),e,o,l,this.createSessionIdentifier(),s,a,T(this,i))},m=async function({userSignatureInputs:e,signDuringDKG:t=!1}){let r,i;U(this,c,h).call(this,e.presign);let s=await T(this,n).getProtocolPublicParameters(e.activeDWallet,e.curve);if(e.activeDWallet){if(e.activeDWallet.public_user_secret_key_share&&e.activeDWallet.state.Active?.public_output)r=Uint8Array.from(e.activeDWallet.public_user_secret_key_share),i=Uint8Array.from(e.activeDWallet.state.Active?.public_output);else{let t=await U(this,c,$).call(this,{secretShare:e.secretShare,encryptedUserSecretKeyShare:e.encryptedUserSecretKeyShare,activeDWallet:e.activeDWallet,publicParameters:s,publicOutput:e.publicOutput});r=t.secretShare,i=t.verifiedPublicOutput}}else{if(!e.secretShare||!e.publicOutput)throw Error("Secret share and public output are required when activeDWallet is not set");if(r=e.secretShare,i=e.publicOutput,!t){if(!e.curve)throw Error("Curve is required when providing explicit secret share and public output without activeDWallet");await U(this,c,p).call(this,{curve:e.curve,verifiedPublicOutput:i,secretShare:r,publicParameters:s})}}return U(this,c,S).call(this,{protocolPublicParameters:s,publicOutput:i,userSecretKeyShare:r,presign:e.presign.state.Completed?.presign,message:e.message,hash:e.hash,signatureScheme:e.signatureScheme,curve:e.curve,createWithCentralizedOutput:e.createWithCentralizedOutput})},w=async function({verifiedPresignCap:e,messageApproval:t,userSignatureInputs:r,ikaCoin:s,suiCoin:a}){let o=await U(this,c,m).call(this,{userSignatureInputs:r});return O.RK(T(this,n).ikaConfig,U(this,c,u).call(this),e,t,o,this.createSessionIdentifier(),s,a,T(this,i))},b=async function({verifiedPresignCap:e,userSignatureInputs:t,ikaCoin:r,suiCoin:s}){if(!t.activeDWallet)throw Error("Active DWallet is required");let a=await U(this,c,m).call(this,{userSignatureInputs:t}),{hashNumber:o}=(0,A.ej)(t.curve,t.signatureScheme,t.hash);return O.Dc(T(this,n).ikaConfig,U(this,c,u).call(this),t.activeDWallet.id.id,e,t.message,o,a,this.createSessionIdentifier(),r,s,T(this,i))},v=async function({verifiedPresignCap:e,importedKeyMessageApproval:t,userSignatureInputs:r,ikaCoin:s,suiCoin:a}){let o=await U(this,c,m).call(this,{userSignatureInputs:r});return O.B8(T(this,n).ikaConfig,U(this,c,u).call(this),e,t,o,this.createSessionIdentifier(),s,a,T(this,i))},$=async function({secretShare:e,encryptedUserSecretKeyShare:t,activeDWallet:r,publicParameters:n,publicOutput:i}){if(e){if(!i)throw Error("Public output is required when providing secret share directly");return{secretShare:e,verifiedPublicOutput:i}}if(!t)throw Error("Encrypted user secret key share is not set");if(!T(this,s))throw Error("User share encryption keys are not set");return U(this,c,f).call(this,{dWallet:r,encryptedUserSecretKeyShare:t,publicParameters:n})},k=async function({dWallet:e,destinationEncryptionKeyAddress:t,sourceEncryptedUserSecretKeyShare:r,sourceSecretShare:s,ikaCoin:a,suiCoin:o}){if(!r.state.KeyHolderSigned?.user_output_signature)throw Error("User output signature is not set");let l=await T(this,n).getProtocolPublicParameters(e),d=await T(this,n).getActiveEncryptionKey(t),h=new E.E(new Uint8Array(d.signer_public_key));if(!await h.verify(Uint8Array.from(d.encryption_key),Uint8Array.from(d.encryption_key_signature)))throw Error("Destination encryption key signature is not valid");if(h.toSuiAddress()!==d.signer_address)throw Error("Destination encryption key address does not match the public key");return O.i3(T(this,n).ikaConfig,U(this,c,u).call(this),e.id.id,t,await (0,I.VN)((0,A.kx)(d.curve),s,new Uint8Array(d.encryption_key),l),r.id.id,this.createSessionIdentifier(),a,o,T(this,i))},_=async function({importDWalletVerificationRequestInput:e,curve:t,signerPublicKey:r,sessionIdentifier:a,ikaCoin:o,suiCoin:l}){if(!T(this,s))throw Error("User share encryption keys are not set");return O.Of(T(this,n).ikaConfig,U(this,c,u).call(this),(await T(this,n).getConfiguredNetworkEncryptionKey()).id,(0,A.PO)(t),e.userMessage,e.encryptedUserShareAndProof,T(this,s).getSuiAddress(),e.userPublicOutput,r,a,o,l,T(this,i))},S=async function({protocolPublicParameters:e,publicOutput:t,userSecretKeyShare:r,presign:n,message:i,hash:s,signatureScheme:a,curve:o,createWithCentralizedOutput:c}){let{curveNumber:u,signatureAlgorithmNumber:l,hashNumber:d}=(0,A.ej)(o,a,s);return new Uint8Array(c?await (0,C.yE)(e,t,r,n,i,d,l,u):await (0,C.E0)(e,t,r,n,i,d,l,u))},j=function(e,t){if(e.is_imported_key_dwallet&&(t===x.Ye.ECDSASecp256k1||t===x.Ye.ECDSASecp256r1))return;let r=e.state.Active?.public_output?.[0]??1;if(!(!e.is_imported_key_dwallet&&e.state.Active?.public_output)||1!==r||t!==x.Ye.ECDSASecp256k1)throw Error("You can call this function for ecdsa signatures only, and if this is imported key dwallet, or the version is 1")}},56536:function(e,t,r){r.d(t,{M:function(){return n}});function n(e){switch(e){case"testnet":return{packages:{ikaPackage:"0x1f26bb2f711ff82dcda4d02c77d5123089cb7f8418751474b9fb744ce031526a",ikaCommonPackage:"0x96fc75633b6665cf84690587d1879858ff76f88c10c945e299f90bf4e0985eb0",ikaSystemOriginalPackage:"0xae71e386fd4cff3a080001c4b74a9e485cd6a209fa98fb272ab922be68869148",ikaSystemPackage:"0xde05f49e5f1ee13ed06c1e243c0a8e8fe858e1d8689476fdb7009af8ddc3c38b",ikaDwallet2pcMpcOriginalPackage:"0xf02f5960c94fce1899a3795b5d11fd076bc70a8d0e20a2b19923d990ed490730",ikaDwallet2pcMpcPackage:"0x6573a6c13daf26a64eb8a37d3c7a4391b353031e223072ca45b1ff9366f59293"},objects:{ikaSystemObject:{objectID:"0x2172c6483ccd24930834e30102e33548b201d0607fb1fdc336ba3267d910dec6",initialSharedVersion:508060325},ikaDWalletCoordinator:{objectID:"0x4d157b7415a298c56ec2cb1dcab449525fa74aec17ddba376a83a7600f2062fc",initialSharedVersion:510819272}}};case"mainnet":return{packages:{ikaPackage:"0x7262fb2f7a3a14c888c438a3cd9b912469a58cf60f367352c46584262e8299aa",ikaCommonPackage:"0x9e1e9f8e4e51ee2421a8e7c0c6ab3ef27c337025d15333461b72b1b813c44175",ikaSystemOriginalPackage:"0xb874c9b51b63e05425b74a22891c35b8da447900e577667b52e85a16d4d85486",ikaSystemPackage:"0xd69f947d7ee6f224dd0dd31ec3ec30c0dd0f713a1de55d564e8e98910c4f9553",ikaDwallet2pcMpcOriginalPackage:"0xdd24c62739923fbf582f49ef190b4a007f981ca6eb209ca94f3a8eaf7c611317",ikaDwallet2pcMpcPackage:"0x23b5bd96051923f800c3a2150aacdcdd8d39e1df2dce4dac69a00d2d8c7f7e77"},objects:{ikaSystemObject:{objectID:"0x215de95d27454d102d6f82ff9c54d8071eb34d5706be85b5c73cbd8173013c80",initialSharedVersion:595745916},ikaDWalletCoordinator:{objectID:"0x5ea59bce034008a006425df777da925633ef384ce25761657ea89e2a08ec75f3",initialSharedVersion:595876492}}}}}},83343:function(e,t,r){r.d(t,{vV:function(){return T},Hy:function(){return C},e9:function(){return R},kb:function(){return x},Ye:function(){return P},n5:function(){return D}});var n=r(49488),i=r(26887),s=r(47769),a=r(98600),o=r(4952);let c=new a.wj({name:"ika_common::system_object_cap::SystemObjectCap",fields:{id:o.F}}),u="0x2::package";new a.wj({name:`${u}::Publisher`,fields:{id:o.F,package:i.$5.string(),module_name:i.$5.string()}});let l=new a.wj({name:`${u}::UpgradeCap`,fields:{id:o.F,package:i.$5.Address,version:i.$5.u64(),policy:i.$5.u8()}}),d="0x2::vec_map";function h(...e){return new a.wj({name:`${d}::VecMap<${e[0].name}, ${e[1].name}>`,fields:{contents:i.$5.vector(function(...e){return new a.wj({name:`${d}::Entry<${e[0].name}, ${e[1].name}>`,fields:{key:e[0],value:e[1]}})}(e[0],e[1]))}})}let p=new a.wj({name:"0x2::object_table::ObjectTable",fields:{id:o.F,size:i.$5.u64()}}),f=new a.wj({name:"0x2::group_ops::Element",fields:{bytes:i.$5.vector(i.$5.u8())}}),g="ika_common::bls_committee",y=new a.wj({name:`${g}::BlsCommitteeMember`,fields:{validator_id:i.$5.Address,protocol_pubkey:f}}),m=new a.wj({name:`${g}::BlsCommittee`,fields:{members:i.$5.vector(y),aggregated_protocol_pubkey:f,quorum_threshold:i.$5.u64(),validity_threshold:i.$5.u64()}}),w=new a.wj({name:"ika_common::extended_field::ExtendedField",fields:{id:o.F}}),b=new a.wj({name:"0x2::bag::Bag",fields:{id:o.F,size:i.$5.u64()}}),v=new a.vY({name:"@local-pkg/system::token_exchange_rate::TokenExchangeRate",fields:{Flat:null,Variable:new a.wj({name:"TokenExchangeRate.Variable",fields:{ika_amount:i.$5.u128(),share_amount:i.$5.u128()}})}}),$="@local-pkg/system::validator_set",k=new a.wj({name:`${$}::ValidatorSet`,fields:{total_stake:i.$5.u64(),reward_slashing_rate:i.$5.u16(),validators:p,active_committee:m,next_epoch_active_committee:i.$5.option(m),previous_committee:m,pending_active_set:w,validator_report_records:h(i.$5.Address,function(...e){return new a.wj({name:`0x2::vec_set::VecSet<${e[0].name}>`,fields:{contents:i.$5.vector(e[0])}})}(i.$5.Address)),extra_fields:b}});new a.wj({name:`${$}::ValidatorEpochInfoEventV1`,fields:{epoch:i.$5.u64(),validator_id:i.$5.Address,stake:i.$5.u64(),commission_rate:i.$5.u16(),staking_rewards:i.$5.u64(),token_exchange_rate:v,tallying_rule_reporters:i.$5.vector(i.$5.Address),tallying_rule_global_score:i.$5.u64()}}),new a.wj({name:`${$}::ValidatorJoinEvent`,fields:{epoch:i.$5.u64(),validator_id:i.$5.Address}}),new a.wj({name:`${$}::ValidatorLeaveEvent`,fields:{withdrawing_epoch:i.$5.u64(),validator_id:i.$5.Address,is_voluntary:i.$5.bool()}});let _="0x2::balance",S=new a.wj({name:`${_}::Supply`,fields:{value:i.$5.u64()}}),j=new a.wj({name:`${_}::Balance`,fields:{value:i.$5.u64()}}),E=new a.wj({name:"0x2::coin::TreasuryCap",fields:{id:o.F,total_supply:S}}),O=new a.wj({name:"@local-pkg/system::protocol_treasury::ProtocolTreasury",fields:{treasury_cap:E,stake_subsidy_distribution_counter:i.$5.u64(),stake_subsidy_rate:i.$5.u16(),stake_subsidy_amount_per_distribution:i.$5.u64(),stake_subsidy_period_length:i.$5.u64(),total_supply_at_period_start:i.$5.u64(),extra_fields:b}}),I="@local-pkg/system::system_inner",A=new a.wj({name:`${I}::SystemInner`,fields:{epoch:i.$5.u64(),epoch_start_tx_digest:i.$5.vector(i.$5.u8()),system_object_cap:c,protocol_version:i.$5.u64(),next_protocol_version:i.$5.option(i.$5.u64()),upgrade_caps:i.$5.vector(l),approved_upgrades:h(i.$5.Address,i.$5.vector(i.$5.u8())),validator_set:k,epoch_duration_ms:i.$5.u64(),stake_subsidy_start_epoch:i.$5.u64(),protocol_treasury:O,epoch_start_timestamp_ms:i.$5.u64(),last_processed_checkpoint_sequence_number:i.$5.u64(),previous_epoch_last_checkpoint_sequence_number:i.$5.u64(),total_messages_processed:i.$5.u64(),remaining_rewards:j,authorized_protocol_cap_ids:i.$5.vector(i.$5.Address),witnesses_approving_advance_epoch:i.$5.vector(i.$5.string()),received_end_of_publish:i.$5.bool(),extra_fields:b}});new a.wj({name:`${I}::SystemEpochInfoEvent`,fields:{epoch:i.$5.u64(),protocol_version:i.$5.u64(),total_stake:i.$5.u64(),stake_subsidy_amount:i.$5.u64(),total_computation_fees:i.$5.u64(),total_stake_rewards_distributed:i.$5.u64()}}),new a.wj({name:`${I}::SystemCheckpointInfoEvent`,fields:{epoch:i.$5.u64(),sequence_number:i.$5.u64()}}),new a.wj({name:`${I}::SetNextProtocolVersionEvent`,fields:{epoch:i.$5.u64(),next_protocol_version:i.$5.u64()}}),new a.wj({name:`${I}::SetEpochDurationMsEvent`,fields:{epoch:i.$5.u64(),epoch_duration_ms:i.$5.u64()}}),new a.wj({name:`${I}::SetStakeSubsidyStartEpochEvent`,fields:{epoch:i.$5.u64(),stake_subsidy_start_epoch:i.$5.u64()}}),new a.wj({name:`${I}::SetStakeSubsidyRateEvent`,fields:{epoch:i.$5.u64(),stake_subsidy_rate:i.$5.u16()}}),new a.wj({name:`${I}::SetStakeSubsidyPeriodLengthEvent`,fields:{epoch:i.$5.u64(),stake_subsidy_period_length:i.$5.u64()}}),new a.wj({name:`${I}::SetMinValidatorCountEvent`,fields:{epoch:i.$5.u64(),min_validator_count:i.$5.u64()}}),new a.wj({name:`${I}::SetMaxValidatorCountEvent`,fields:{epoch:i.$5.u64(),max_validator_count:i.$5.u64()}}),new a.wj({name:`${I}::SetMinValidatorJoiningStakeEvent`,fields:{epoch:i.$5.u64(),min_validator_joining_stake:i.$5.u64()}}),new a.wj({name:`${I}::SetMaxValidatorChangeCountEvent`,fields:{epoch:i.$5.u64(),max_validator_change_count:i.$5.u64()}}),new a.wj({name:`${I}::SetRewardSlashingRateEvent`,fields:{epoch:i.$5.u64(),reward_slashing_rate:i.$5.u16()}}),new a.wj({name:`${I}::SetApprovedUpgradeEvent`,fields:{epoch:i.$5.u64(),package_id:i.$5.Address,digest:i.$5.option(i.$5.vector(i.$5.u8()))}}),new a.wj({name:`${I}::EndOfPublishEvent`,fields:{epoch:i.$5.u64()}}),new a.wj({name:`${I}::SetOrRemoveWitnessApprovingAdvanceEpochEvent`,fields:{epoch:i.$5.u64(),witness_type:i.$5.string(),remove:i.$5.bool()}});let x={KECCAK256:"KECCAK256",SHA256:"SHA256",DoubleSHA256:"DoubleSHA256",SHA512:"SHA512",Merlin:"Merlin"},C={SECP256K1:"SECP256K1",RISTRETTO:"RISTRETTO",ED25519:"ED25519",SECP256R1:"SECP256R1"},P={ECDSASecp256k1:"ECDSASecp256k1",Taproot:"Taproot",ECDSASecp256r1:"ECDSASecp256r1",EdDSA:"EdDSA",SchnorrkelSubstrate:"SchnorrkelSubstrate"};function R(...e){return new n.S3({name:`dynamic_field::Field<u64, ${e[0].name}>`,fields:{id:i.$5.Address,name:i.$5.u64(),value:e[0]}})}let T=R(s.$e),D=R(A)},91502:function(e,t,r){r.d(t,{e:function(){return Q}});var n,i,s,a,o,c=r(58437),u=r(73899),l=r(28389),d=r(97655),h=r(55184),p=r(44501),f=r(95580),g=r(60168);let y="suiprivkey";class m{async signWithIntent(e,t){let r=(0,f.F)(t,e),n=(0,h.R)(r,{dkLen:32});return{signature:function({signature:e,signatureScheme:t,publicKey:r}){if(!r)throw Error("`publicKey` is required");let n=r.toRawBytes(),i=new Uint8Array(1+e.length+n.length);return i.set([g.hD[t]]),i.set(e,1),i.set(n,1+e.length),(0,d.s)(i)}({signature:await this.sign(n),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:(0,d.s)(e)}}async signTransaction(e){return this.signWithIntent(e,"TransactionData")}async signPersonalMessage(e){let{signature:t}=await this.signWithIntent(c.$.byteVector().serialize(e).toBytes(),"PersonalMessage");return{bytes:(0,d.s)(e),signature:t}}async signAndExecuteTransaction({transaction:e,client:t}){let r=await e.build({client:t}),{signature:n}=await this.signTransaction(r);return(await t.core.executeTransaction({transaction:r,signatures:[n]})).transaction}toSuiAddress(){return this.getPublicKey().toSuiAddress()}}class w extends m{}var b=r(19661);class v extends b.kb{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,b.z3)(e);let r=(0,b.O0)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),(0,b.ru)(i)}update(e){return(0,b.$h)(this),this.iHash.update(e),this}digestInto(e){(0,b.$h)(this),(0,b.gk)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:a}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let $=(e,t,r)=>new v(e,t).update(r).digest();$.create=(e,t)=>new v(e,t);var k=r(41870);function _(e){if("string"!=typeof e)throw TypeError("invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}let S=e=>_("mnemonic"+e);function j(e){return!!RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(e)}let E=k.o,O=2147483648,I=RegExp("^m(\\/[0-9]+')+$"),A=e=>e.replace("'",""),x=e=>{let t=$.create(E,"ed25519 seed").update((0,u.H)(e)).digest();return{key:t.slice(0,32),chainCode:t.slice(32)}},C=({key:e,chainCode:t},r)=>{let n=new ArrayBuffer(4);new DataView(n).setUint32(0,r);let i=new Uint8Array(1+e.length+n.byteLength);i.set(new Uint8Array(1).fill(0)),i.set(e,1),i.set(new Uint8Array(n,0,n.byteLength),e.length+1);let s=$.create(E,t).update(i).digest();return{key:s.slice(0,32),chainCode:s.slice(32)}},P=e=>!!I.test(e)&&!e.split("/").slice(1).map(A).some(isNaN),R=(e,t,r=O)=>{if(!P(e))throw Error("Invalid derivation path");let{key:n,chainCode:i}=x(t);return e.split("/").slice(1).map(A).map(e=>parseInt(e,10)).reduce((e,t)=>C(e,t+r),{key:n,chainCode:i})};var T=r(280);let D="m/44'/784'/0'/0'/0'";class M extends w{constructor(e){if(super(),e)this.keypair={publicKey:e.publicKey,secretKey:e.secretKey.slice(0,32)};else{let e=l.UN.utils.randomPrivateKey();this.keypair={publicKey:l.UN.getPublicKey(e),secretKey:e}}}getKeyScheme(){return"ED25519"}static generate(){let e=l.UN.utils.randomPrivateKey();return new M({publicKey:l.UN.getPublicKey(e),secretKey:e})}static fromSecretKey(e,t){if("string"==typeof e){let r=function(e){let{prefix:t,words:r}=p.gW.decode(e);if(t!==y)throw Error("invalid private key prefix");let n=new Uint8Array(p.gW.fromWords(r)),i=n.slice(1),s=g.ex[n[0]];return{scheme:s,schema:s,secretKey:i}}(e);if("ED25519"!==r.schema)throw Error(`Expected a ED25519 keypair, got ${r.schema}`);return this.fromSecretKey(r.secretKey,t)}let r=e.length;if(32!==r)throw Error(`Wrong secretKey size. Expected 32 bytes, got ${r}.`);let n={publicKey:l.UN.getPublicKey(e),secretKey:e};if(!t||!t.skipValidation){let t=new TextEncoder().encode("sui validation"),r=l.UN.sign(t,e);if(!l.UN.verify(r,t,n.publicKey))throw Error("provided secretKey is invalid")}return new M(n)}getPublicKey(){return new T.E(this.keypair.publicKey)}getSecretKey(){return function(e,t){if(32!==e.length)throw Error("Invalid bytes length");let r=g.hD[t],n=new Uint8Array(e.length+1);return n.set([r]),n.set(e,1),p.gW.encode(y,p.gW.toWords(n))}(this.keypair.secretKey.slice(0,32),this.getKeyScheme())}async sign(e){return l.UN.sign(e,this.keypair.secretKey)}static deriveKeypair(e,t){if(null==t&&(t=D),!j(t))throw Error("Invalid derivation path");let{key:r}=R(t,(0,u.N)(function(e,t=""){return function(e,t,r,n){var i;let s;let{c:a,dkLen:o,DK:c,PRF:u,PRFSalt:l}=function(e,t,r,n){(0,b.z3)(e);let{c:i,dkLen:s,asyncTick:a}=(0,b.U5)({dkLen:32,asyncTick:10},n);if((0,b.k8)(i),(0,b.k8)(s),(0,b.k8)(a),i<1)throw Error("iterations (c) should be >= 1");let o=(0,b.A0)(t),c=(0,b.A0)(r),u=new Uint8Array(s),l=$.create(e,o),d=l._cloneInto().update(c);return{c:i,dkLen:s,asyncTick:a,DK:u,PRF:l,PRFSalt:d}}(e,t,r,n),d=new Uint8Array(4),h=(0,b.GL)(d),p=new Uint8Array(u.outputLen);for(let e=1,t=0;t<o;e++,t+=u.outputLen){let r=c.subarray(t,t+u.outputLen);h.setInt32(0,e,!1),(s=l._cloneInto(s)).update(d).digestInto(p),r.set(p.subarray(0,r.length));for(let e=1;e<a;e++){u._cloneInto(s).update(p).digestInto(p);for(let e=0;e<r.length;e++)r[e]^=p[e]}}return i=s,u.destroy(),l.destroy(),i&&i.destroy(),(0,b.ru)(p),c}(k.o,function(e){let t=_(e),r=t.split(" ");if(![12,15,18,21,24].includes(r.length))throw Error("Invalid mnemonic");return{nfkd:t,words:r}}(e).nfkd,S(t),{c:2048,dkLen:64})}(e,"")));return M.fromSecretKey(r)}static deriveKeypairFromSeed(e,t){if(null==t&&(t=D),!j(t))throw Error("Invalid derivation path");let{key:r}=R(t,e);return M.fromSecretKey(r)}}var U=r(68651),B=r(87807),N=r(79433),V=r(52558),K=r(17533),z=Object.defineProperty,W=e=>{throw TypeError(e)},F=(e,t,r)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,G=(e,t,r)=>F(e,"symbol"!=typeof t?t+"":t,r),q=(e,t,r)=>t.has(e)||W("Cannot "+r),L=(e,t,r)=>(q(e,t,"read from private field"),r?r.call(e):t.get(e)),X=(e,t,r)=>t.has(e)?W("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),H=(e,t,r,n)=>(q(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),J=(e,t,r)=>(q(e,t,"access private method"),r);let Z=c.$.enum("VersionedUserShareEncryptionKeys",{V1:c.$.struct("UserShareEncryptionKeysV1",{encryptionKey:c.$.vector(c.$.u8()),decryptionKey:c.$.vector(c.$.u8()),secretShareSigningSecretKey:c.$.string(),curve:c.$.u64()})}),Y=class e{constructor(e,t,r,s){X(this,i),G(this,"encryptionKey"),G(this,"decryptionKey"),X(this,n),G(this,"curve"),this.encryptionKey=e,this.decryptionKey=t,H(this,n,r),this.curve=s}static async fromRootSeedKey(t,r){let n=e.hash(e.domainSeparators.classGroups,t,r),i=e.hash(e.domainSeparators.encryptionSignerKey,t,r),s=await (0,B.od)(n,r),a=M.deriveKeypairFromSeed((0,u.N)(i));return new e(new Uint8Array(s.encryptionKey),new Uint8Array(s.decryptionKey),a,r)}static fromShareEncryptionKeysBytes(t){let{encryptionKey:r,decryptionKey:n,secretShareSigningSecretKey:i,curve:s}=J(this,a,o).call(this,t);return new e(r,n,M.fromSecretKey(i),s)}toShareEncryptionKeysBytes(){return J(this,i,s).call(this)}getPublicKey(){return L(this,n).getPublicKey()}getSuiAddress(){return L(this,n).getPublicKey().toSuiAddress()}getSigningPublicKeyBytes(){return L(this,n).getPublicKey().toRawBytes()}async verifySignature(e,t){return await L(this,n).getPublicKey().verify(e,t)}async getEncryptionKeySignature(){return await L(this,n).sign(this.encryptionKey)}async getUserOutputSignature(e,t){if(!e.state.AwaitingKeyHolderSignature?.public_output)throw Error("DWallet is not in awaiting key holder signature state");let r=Uint8Array.from(e.state.AwaitingKeyHolderSignature?.public_output);if(!await (0,B.qb)((0,N.kx)(e.curve),t,r).catch(()=>!1))throw Error("User public output does not match the DWallet public output");return await L(this,n).sign(r)}async getUserOutputSignatureForTransferredDWallet(e,t,r){let i=await (0,B.Lg)(e,t,new T.E(r.signer_public_key));return await L(this,n).sign(i)}async decryptUserShare(e,t,r){let i=await (0,B.Lg)(e,t,L(this,n).getPublicKey());return{verifiedPublicOutput:i,secretShare:Uint8Array.from(await (0,K.gv)((0,N.PO)(this.curve),this.decryptionKey,i,Uint8Array.from(t.encrypted_centralized_secret_share_and_proof),r))}}static hash(e,t,r){return new Uint8Array((0,U.fr)(Uint8Array.from([...(0,V.BP)(e),r,...t])))}};n=new WeakMap,i=new WeakSet,s=function(){return Z.serialize({V1:{encryptionKey:this.encryptionKey,decryptionKey:this.decryptionKey,secretShareSigningSecretKey:L(this,n).getSecretKey(),curve:(0,N.PO)(this.curve)}}).toBytes()},a=new WeakSet,o=function(e){let{V1:{encryptionKey:t,decryptionKey:r,secretShareSigningSecretKey:n,curve:i}}=Z.parse(e);return{encryptionKey:new Uint8Array(t),decryptionKey:new Uint8Array(r),secretShareSigningSecretKey:n,curve:(0,N.kx)(Number(i))}},X(Y,a),G(Y,"domainSeparators",{classGroups:"CLASS_GROUPS_DECRYPTION_KEY_V1",encryptionSignerKey:"ED25519_SIGNING_KEY_V1"});let Q=Y},52558:function(e,t,r){r.d(t,{BP:function(){return a},KW:function(){return o},hW:function(){return s},vJ:function(){return i}});var n=r(25798);function i(e){if(e.data?.bcs?.dataType!=="moveObject")throw new n.x3(`Response bcs missing: ${JSON.stringify(e.data?.type,null,2)}`);return e.data.bcs.bcsBytes}async function s(e,t){let r=[],n=null;for(;;){let i=await e.getDynamicFields({parentId:t,cursor:n});if(r.push(...i.data),i.nextCursor===n)break;n=i.nextCursor}return r}function a(e){let t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return Uint8Array.from(t)}function o(e){let t=BigInt(e),r=new ArrayBuffer(8);return new DataView(r).setBigUint64(0,t,!1),new Uint8Array(r)}},17533:function(e,t,r){r.d(t,{E0:function(){return f},Lh:function(){return b},Nl:function(){return h},OC:function(){return l},VT:function(){return y},WS:function(){return p},gv:function(){return v},js:function(){return d},mL:function(){return $},oP:function(){return m},s$:function(){return w},yE:function(){return g}});var n=r(40257);let i=null,s=null,a=void 0!==n&&!!n.versions?.node;async function o(){i||(s||(s=c()),await s)}async function c(){let e=await r.e(353).then(r.bind(r,43353));if(a){let t=e&&"object"==typeof e&&"default"in e?e.default:e;if("function"!=typeof t.generate_secp_cg_keypair_from_seed)throw Error("ika-wasm node glue not initialized (wrong target?)");i=t;return}let t=e.default??e.init;if("function"!=typeof t)throw Error("ika-wasm web glue missing init()");await t(),i=e}async function u(){return await o(),i}async function l(e,t,r,n){return(await u()).encrypt_secret_share(e,t,r,n)}async function d(e,t,r,n){return(await u()).verify_user_share(e,t,r,n)}async function h(e,t){return(await u()).generate_secp_cg_keypair_from_seed(e,t)}async function p(e,t,r){return(await u()).create_dkg_centralized_output_v2(e,t,r)}async function f(e,t,r,n,i,s,a,o){return(await u()).create_sign_centralized_party_message(e,t,r,n,i,o,a,s)}async function g(e,t,r,n,i,s,a,o){return(await u()).create_sign_centralized_party_message_with_centralized_party_dkg_output(e,t,r,n,i,s,a,o)}async function y(e,t){return(await u()).network_dkg_public_output_to_protocol_pp(e,t)}async function m(e,t){return(await u()).public_key_from_dwallet_output(e,t)}async function w(e,t,r){return(await u()).reconfiguration_public_output_to_protocol_pp(e,t,r)}async function b(e,t,r){return(await u()).centralized_and_decentralized_parties_dkg_output_match(e,t,r)}async function v(e,t,r,n,i){return(await u()).decrypt_user_share(e,t,r,n,i)}async function $(e,t,r){return(await u()).parse_signature_from_sign_output(e,t,r)}},47769:function(e,t,r){r.d(t,{YL:function(){return B},v:function(){return I},$e:function(){return O},RB:function(){return x},XG:function(){return R},BC:function(){return C},Kz:function(){return M},uK:function(){return G},Hp:function(){return V},hu:function(){return z}});var n=r(98600),i=r(26887),s=r(1314),a=r(90486);let o="0x2::vec_map";function c(...e){return new n.wj({name:`${o}::VecMap<${e[0].name}, ${e[1].name}>`,fields:{contents:i.$5.vector(function(...e){return new n.wj({name:`${o}::Entry<${e[0].name}, ${e[1].name}>`,fields:{key:e[0],value:e[1]}})}(e[0],e[1]))}})}let u=new n.wj({name:"0x2::group_ops::Element",fields:{bytes:i.$5.vector(i.$5.u8())}}),l="ika_common::bls_committee",d=new n.wj({name:`${l}::BlsCommitteeMember`,fields:{validator_id:i.$5.Address,protocol_pubkey:u}}),h=new n.wj({name:`${l}::BlsCommittee`,fields:{members:i.$5.vector(d),aggregated_protocol_pubkey:u,quorum_threshold:i.$5.u64(),validity_threshold:i.$5.u64()}}),p="@local-pkg/2pc-mpc::pricing",f=new n.wj({name:`${p}::PricingInfoKey`,fields:{curve:i.$5.u32(),signature_algorithm:i.$5.option(i.$5.u32()),protocol:i.$5.u32()}}),g=new n.wj({name:`${p}::PricingInfoValue`,fields:{fee_ika:i.$5.u64(),gas_fee_reimbursement_sui:i.$5.u64(),gas_fee_reimbursement_sui_for_system_calls:i.$5.u64()}}),y=new n.wj({name:`${p}::PricingInfo`,fields:{pricing_map:c(f,g)}}),m=new n.wj({name:`${p}::PricingInfoCalculationVotes`,fields:{bls_committee:h,default_pricing:y,working_pricing:y}});var w=r(22637),b=r(57507);let v=new n.wj({name:"@local-pkg/2pc-mpc::pricing_and_fee_manager::PricingAndFeeManager",fields:{current:y,default:y,validator_votes:w.i,pricing_calculation_votes:i.$5.option(m),gas_fee_reimbursement_sui_system_call_value:i.$5.u64(),gas_fee_reimbursement_sui_system_call_balance:b.y,fee_charged_ika:b.y}}),$="@local-pkg/2pc-mpc::support_config",k=new n.wj({name:`${$}::SupportConfig`,fields:{supported_curves_to_signature_algorithms_to_hash_schemes:c(i.$5.u32(),c(i.$5.u32(),i.$5.vector(i.$5.u32()))),paused_curves:i.$5.vector(i.$5.u32()),paused_signature_algorithms:i.$5.vector(i.$5.u32()),paused_hash_schemes:i.$5.vector(i.$5.u32()),signature_algorithms_allowed_global_presign:i.$5.vector(i.$5.u32())}});new n.wj({name:`${$}::GlobalPresignConfig`,fields:{curve_to_signature_algorithms_for_dkg:c(i.$5.u32(),i.$5.vector(i.$5.u32())),curve_to_signature_algorithms_for_imported_key:c(i.$5.u32(),i.$5.vector(i.$5.u32()))}});var _=r(17402),S=r(77220);let j=new n.wj({name:"0x2::table_vec::TableVec",fields:{contents:w.i}}),E="@local-pkg/2pc-mpc::coordinator_inner";new n.wj({name:`${E}::DWalletCoordinatorWitness`,fields:{dummy_field:i.$5.bool()}});let O=new n.wj({name:`${E}::DWalletCoordinatorInner`,fields:{current_epoch:i.$5.u64(),sessions_manager:s.VN,dwallets:a.B,dwallet_network_encryption_keys:a.B,epoch_dwallet_network_encryption_keys_reconfiguration_completed:i.$5.u64(),encryption_keys:a.B,presign_sessions:a.B,partial_centralized_signed_messages:a.B,pricing_and_fee_manager:v,active_committee:h,next_epoch_active_committee:i.$5.option(h),total_messages_processed:i.$5.u64(),last_processed_checkpoint_sequence_number:i.$5.u64(),previous_epoch_last_checkpoint_sequence_number:i.$5.u64(),support_config:k,received_end_of_publish:i.$5.bool(),extra_fields:_.N}}),I=new n.wj({name:`${E}::DWalletCap`,fields:{id:S.F,dwallet_id:i.$5.Address}});new n.wj({name:`${E}::ImportedKeyDWalletCap`,fields:{id:S.F,dwallet_id:i.$5.Address}});let A=new n.vY({name:`${E}::DWalletNetworkEncryptionKeyState`,fields:{AwaitingNetworkDKG:null,NetworkDKGCompleted:null,AwaitingNetworkReconfiguration:null,NetworkReconfigurationCompleted:null}}),x=new n.wj({name:`${E}::DWalletNetworkEncryptionKey`,fields:{id:S.F,dkg_at_epoch:i.$5.u64(),network_dkg_public_output:j,reconfiguration_public_outputs:w.i,dkg_params_for_network:i.$5.vector(i.$5.u8()),supported_curves:i.$5.vector(i.$5.u32()),state:A}}),C=new n.wj({name:`${E}::EncryptionKey`,fields:{id:S.F,created_at_epoch:i.$5.u64(),curve:i.$5.u32(),encryption_key:i.$5.vector(i.$5.u8()),encryption_key_signature:i.$5.vector(i.$5.u8()),signer_public_key:i.$5.vector(i.$5.u8()),signer_address:i.$5.Address}}),P=new n.vY({name:`${E}::EncryptedUserSecretKeyShareState`,fields:{AwaitingNetworkVerification:null,NetworkVerificationCompleted:null,NetworkVerificationRejected:null,KeyHolderSigned:new n.wj({name:"EncryptedUserSecretKeyShareState.KeyHolderSigned",fields:{user_output_signature:i.$5.vector(i.$5.u8())}})}}),R=new n.wj({name:`${E}::EncryptedUserSecretKeyShare`,fields:{id:S.F,created_at_epoch:i.$5.u64(),dwallet_id:i.$5.Address,encrypted_centralized_secret_share_and_proof:i.$5.vector(i.$5.u8()),encryption_key_id:i.$5.Address,encryption_key_address:i.$5.Address,source_encrypted_user_secret_key_share_id:i.$5.option(i.$5.Address),state:P}});new n.wj({name:`${E}::UnverifiedPartialUserSignatureCap`,fields:{id:S.F,partial_centralized_signed_message_id:i.$5.Address}}),new n.wj({name:`${E}::VerifiedPartialUserSignatureCap`,fields:{id:S.F,partial_centralized_signed_message_id:i.$5.Address}});let T=new n.wj({name:`${E}::VerifiedPresignCap`,fields:{id:S.F,dwallet_id:i.$5.option(i.$5.Address),presign_id:i.$5.Address}}),D=new n.vY({name:`${E}::PartialUserSignatureState`,fields:{AwaitingNetworkVerification:null,NetworkVerificationCompleted:null,NetworkVerificationRejected:null}}),M=new n.wj({name:`${E}::PartialUserSignature`,fields:{id:S.F,created_at_epoch:i.$5.u64(),presign_cap:T,dwallet_id:i.$5.Address,cap_id:i.$5.Address,curve:i.$5.u32(),signature_algorithm:i.$5.u32(),hash_scheme:i.$5.u32(),message:i.$5.vector(i.$5.u8()),message_centralized_signature:i.$5.vector(i.$5.u8()),state:D}}),U=new n.vY({name:`${E}::DWalletState`,fields:{DKGRequested:null,NetworkRejectedDKGRequest:null,AwaitingUserDKGVerificationInitiation:new n.wj({name:"DWalletState.AwaitingUserDKGVerificationInitiation",fields:{first_round_output:i.$5.vector(i.$5.u8())}}),AwaitingNetworkDKGVerification:null,NetworkRejectedDKGVerification:null,AwaitingNetworkImportedKeyVerification:null,NetworkRejectedImportedKeyVerification:null,AwaitingKeyHolderSignature:new n.wj({name:"DWalletState.AwaitingKeyHolderSignature",fields:{public_output:i.$5.vector(i.$5.u8())}}),Active:new n.wj({name:"DWalletState.Active",fields:{public_output:i.$5.vector(i.$5.u8())}})}}),B=new n.wj({name:`${E}::DWallet`,fields:{id:S.F,created_at_epoch:i.$5.u64(),curve:i.$5.u32(),public_user_secret_key_share:i.$5.option(i.$5.vector(i.$5.u8())),dwallet_cap_id:i.$5.Address,dwallet_network_encryption_key_id:i.$5.Address,is_imported_key_dwallet:i.$5.bool(),encrypted_user_secret_key_shares:a.B,sign_sessions:a.B,state:U}});new n.wj({name:`${E}::UnverifiedPresignCap`,fields:{id:S.F,dwallet_id:i.$5.option(i.$5.Address),presign_id:i.$5.Address}});let N=new n.vY({name:`${E}::PresignState`,fields:{Requested:null,NetworkRejected:null,Completed:new n.wj({name:"PresignState.Completed",fields:{presign:i.$5.vector(i.$5.u8())}})}}),V=new n.wj({name:`${E}::PresignSession`,fields:{id:S.F,created_at_epoch:i.$5.u64(),curve:i.$5.u32(),signature_algorithm:i.$5.u32(),dwallet_id:i.$5.option(i.$5.Address),cap_id:i.$5.Address,state:N}}),K=new n.vY({name:`${E}::SignState`,fields:{Requested:null,NetworkRejected:null,Completed:new n.wj({name:"SignState.Completed",fields:{signature:i.$5.vector(i.$5.u8())}})}}),z=new n.wj({name:`${E}::SignSession`,fields:{id:S.F,created_at_epoch:i.$5.u64(),dwallet_id:i.$5.Address,state:K}});new n.wj({name:`${E}::MessageApproval`,fields:{dwallet_id:i.$5.Address,signature_algorithm:i.$5.u32(),hash_scheme:i.$5.u32(),message:i.$5.vector(i.$5.u8())}}),new n.wj({name:`${E}::ImportedKeyMessageApproval`,fields:{dwallet_id:i.$5.Address,signature_algorithm:i.$5.u32(),hash_scheme:i.$5.u32(),message:i.$5.vector(i.$5.u8())}}),new n.wj({name:`${E}::SignDuringDKGRequest`,fields:{presign_id:i.$5.Address,presign:i.$5.vector(i.$5.u8()),curve:i.$5.u32(),signature_algorithm:i.$5.u32(),hash_scheme:i.$5.u32(),message:i.$5.vector(i.$5.u8()),message_centralized_signature:i.$5.vector(i.$5.u8())}}),new n.wj({name:`${E}::DWalletNetworkDKGEncryptionKeyRequestEvent`,fields:{dwallet_network_encryption_key_id:i.$5.Address,params_for_network:i.$5.vector(i.$5.u8())}}),new n.wj({name:`${E}::CompletedDWalletNetworkDKGEncryptionKeyEvent`,fields:{dwallet_network_encryption_key_id:i.$5.Address}}),new n.wj({name:`${E}::RejectedDWalletNetworkDKGEncryptionKeyEvent`,fields:{dwallet_network_encryption_key_id:i.$5.Address}}),new n.wj({name:`${E}::DWalletEncryptionKeyReconfigurationRequestEvent`,fields:{dwallet_network_encryption_key_id:i.$5.Address}}),new n.wj({name:`${E}::CompletedDWalletEncryptionKeyReconfigurationEvent`,fields:{dwallet_network_encryption_key_id:i.$5.Address}}),new n.wj({name:`${E}::RejectedDWalletEncryptionKeyReconfigurationEvent`,fields:{dwallet_network_encryption_key_id:i.$5.Address}}),new n.wj({name:`${E}::DWalletDKGFirstRoundRequestEvent`,fields:{dwallet_id:i.$5.Address,dwallet_cap_id:i.$5.Address,dwallet_network_encryption_key_id:i.$5.Address,curve:i.$5.u32()}}),new n.wj({name:`${E}::CompletedDWalletDKGFirstRoundEvent`,fields:{dwallet_id:i.$5.Address,first_round_output:i.$5.vector(i.$5.u8())}}),new n.wj({name:`${E}::RejectedDWalletDKGFirstRoundEvent`,fields:{dwallet_id:i.$5.Address}}),new n.wj({name:`${E}::DWalletDKGSecondRoundRequestEvent`,fields:{encrypted_user_secret_key_share_id:i.$5.Address,dwallet_id:i.$5.Address,first_round_output:i.$5.vector(i.$5.u8()),centralized_public_key_share_and_proof:i.$5.vector(i.$5.u8()),dwallet_cap_id:i.$5.Address,encrypted_centralized_secret_share_and_proof:i.$5.vector(i.$5.u8()),encryption_key:i.$5.vector(i.$5.u8()),encryption_key_id:i.$5.Address,encryption_key_address:i.$5.Address,user_public_output:i.$5.vector(i.$5.u8()),signer_public_key:i.$5.vector(i.$5.u8()),dwallet_network_encryption_key_id:i.$5.Address,curve:i.$5.u32()}}),new n.wj({name:`${E}::CompletedDWalletDKGSecondRoundEvent`,fields:{dwallet_id:i.$5.Address,public_output:i.$5.vector(i.$5.u8()),encrypted_user_secret_key_share_id:i.$5.Address}}),new n.wj({name:`${E}::RejectedDWalletDKGSecondRoundEvent`,fields:{dwallet_id:i.$5.Address,public_output:i.$5.vector(i.$5.u8())}});let W=new n.wj({name:`${E}::SignDuringDKGRequestEvent`,fields:{sign_id:i.$5.Address,presign_id:i.$5.Address,presign:i.$5.vector(i.$5.u8()),signature_algorithm:i.$5.u32(),hash_scheme:i.$5.u32(),message:i.$5.vector(i.$5.u8()),message_centralized_signature:i.$5.vector(i.$5.u8())}}),F=new n.vY({name:`${E}::UserSecretKeyShareEventType`,fields:{Encrypted:new n.wj({name:"UserSecretKeyShareEventType.Encrypted",fields:{encrypted_user_secret_key_share_id:i.$5.Address,encrypted_centralized_secret_share_and_proof:i.$5.vector(i.$5.u8()),encryption_key:i.$5.vector(i.$5.u8()),encryption_key_id:i.$5.Address,encryption_key_address:i.$5.Address,signer_public_key:i.$5.vector(i.$5.u8())}}),Public:new n.wj({name:"UserSecretKeyShareEventType.Public",fields:{public_user_secret_key_share:i.$5.vector(i.$5.u8())}})}});new n.wj({name:`${E}::DWalletDKGRequestEvent`,fields:{dwallet_id:i.$5.Address,centralized_public_key_share_and_proof:i.$5.vector(i.$5.u8()),user_public_output:i.$5.vector(i.$5.u8()),dwallet_cap_id:i.$5.Address,dwallet_network_encryption_key_id:i.$5.Address,curve:i.$5.u32(),user_secret_key_share:F,sign_during_dkg_request:i.$5.option(W)}}),new n.wj({name:`${E}::CompletedDWalletDKGEvent`,fields:{dwallet_id:i.$5.Address,public_output:i.$5.vector(i.$5.u8()),encrypted_user_secret_key_share_id:i.$5.option(i.$5.Address),sign_id:i.$5.option(i.$5.Address)}}),new n.wj({name:`${E}::RejectedDWalletDKGEvent`,fields:{dwallet_id:i.$5.Address,public_output:i.$5.vector(i.$5.u8())}}),new n.wj({name:`${E}::DWalletImportedKeyVerificationRequestEvent`,fields:{dwallet_id:i.$5.Address,encrypted_user_secret_key_share_id:i.$5.Address,centralized_party_message:i.$5.vector(i.$5.u8()),dwallet_cap_id:i.$5.Address,encrypted_centralized_secret_share_and_proof:i.$5.vector(i.$5.u8()),encryption_key:i.$5.vector(i.$5.u8()),encryption_key_id:i.$5.Address,encryption_key_address:i.$5.Address,user_public_output:i.$5.vector(i.$5.u8()),signer_public_key:i.$5.vector(i.$5.u8()),dwallet_network_encryption_key_id:i.$5.Address,curve:i.$5.u32()}}),new n.wj({name:`${E}::CompletedDWalletImportedKeyVerificationEvent`,fields:{dwallet_id:i.$5.Address,public_output:i.$5.vector(i.$5.u8()),encrypted_user_secret_key_share_id:i.$5.Address}}),new n.wj({name:`${E}::RejectedDWalletImportedKeyVerificationEvent`,fields:{dwallet_id:i.$5.Address}}),new n.wj({name:`${E}::CreatedEncryptionKeyEvent`,fields:{encryption_key_id:i.$5.Address,signer_address:i.$5.Address}}),new n.wj({name:`${E}::EncryptedShareVerificationRequestEvent`,fields:{encrypted_centralized_secret_share_and_proof:i.$5.vector(i.$5.u8()),public_output:i.$5.vector(i.$5.u8()),dwallet_id:i.$5.Address,encryption_key:i.$5.vector(i.$5.u8()),encryption_key_id:i.$5.Address,encrypted_user_secret_key_share_id:i.$5.Address,source_encrypted_user_secret_key_share_id:i.$5.Address,dwallet_network_encryption_key_id:i.$5.Address,curve:i.$5.u32()}}),new n.wj({name:`${E}::CompletedEncryptedShareVerificationEvent`,fields:{encrypted_user_secret_key_share_id:i.$5.Address,dwallet_id:i.$5.Address}}),new n.wj({name:`${E}::RejectedEncryptedShareVerificationEvent`,fields:{encrypted_user_secret_key_share_id:i.$5.Address,dwallet_id:i.$5.Address}}),new n.wj({name:`${E}::AcceptEncryptedUserShareEvent`,fields:{encrypted_user_secret_key_share_id:i.$5.Address,dwallet_id:i.$5.Address,user_output_signature:i.$5.vector(i.$5.u8()),encryption_key_id:i.$5.Address,encryption_key_address:i.$5.Address}}),new n.wj({name:`${E}::MakeDWalletUserSecretKeySharePublicRequestEvent`,fields:{public_user_secret_key_share:i.$5.vector(i.$5.u8()),public_output:i.$5.vector(i.$5.u8()),curve:i.$5.u32(),dwallet_id:i.$5.Address,dwallet_network_encryption_key_id:i.$5.Address}}),new n.wj({name:`${E}::CompletedMakeDWalletUserSecretKeySharePublicEvent`,fields:{dwallet_id:i.$5.Address,public_user_secret_key_share:i.$5.vector(i.$5.u8())}}),new n.wj({name:`${E}::RejectedMakeDWalletUserSecretKeySharePublicEvent`,fields:{dwallet_id:i.$5.Address}});let G=new n.wj({name:`${E}::PresignRequestEvent`,fields:{dwallet_id:i.$5.option(i.$5.Address),presign_id:i.$5.Address,dwallet_public_output:i.$5.option(i.$5.vector(i.$5.u8())),dwallet_network_encryption_key_id:i.$5.Address,curve:i.$5.u32(),signature_algorithm:i.$5.u32()}});new n.wj({name:`${E}::CompletedPresignEvent`,fields:{dwallet_id:i.$5.option(i.$5.Address),presign_id:i.$5.Address,presign:i.$5.vector(i.$5.u8())}}),new n.wj({name:`${E}::RejectedPresignEvent`,fields:{dwallet_id:i.$5.option(i.$5.Address),presign_id:i.$5.Address}}),new n.wj({name:`${E}::SignRequestEvent`,fields:{sign_id:i.$5.Address,dwallet_id:i.$5.Address,dwallet_public_output:i.$5.vector(i.$5.u8()),curve:i.$5.u32(),signature_algorithm:i.$5.u32(),hash_scheme:i.$5.u32(),message:i.$5.vector(i.$5.u8()),dwallet_network_encryption_key_id:i.$5.Address,presign_id:i.$5.Address,presign:i.$5.vector(i.$5.u8()),message_centralized_signature:i.$5.vector(i.$5.u8()),is_future_sign:i.$5.bool()}}),new n.wj({name:`${E}::CompletedSignEvent`,fields:{sign_id:i.$5.Address,signature:i.$5.vector(i.$5.u8()),is_future_sign:i.$5.bool()}}),new n.wj({name:`${E}::RejectedSignEvent`,fields:{sign_id:i.$5.Address,is_future_sign:i.$5.bool()}}),new n.wj({name:`${E}::FutureSignRequestEvent`,fields:{dwallet_id:i.$5.Address,partial_centralized_signed_message_id:i.$5.Address,message:i.$5.vector(i.$5.u8()),presign:i.$5.vector(i.$5.u8()),dwallet_public_output:i.$5.vector(i.$5.u8()),curve:i.$5.u32(),signature_algorithm:i.$5.u32(),hash_scheme:i.$5.u32(),message_centralized_signature:i.$5.vector(i.$5.u8()),dwallet_network_encryption_key_id:i.$5.Address}}),new n.wj({name:`${E}::CompletedFutureSignEvent`,fields:{dwallet_id:i.$5.Address,partial_centralized_signed_message_id:i.$5.Address}}),new n.wj({name:`${E}::RejectedFutureSignEvent`,fields:{dwallet_id:i.$5.Address,partial_centralized_signed_message_id:i.$5.Address}}),new n.wj({name:`${E}::DWalletCheckpointInfoEvent`,fields:{epoch:i.$5.u64(),sequence_number:i.$5.u64()}}),new n.wj({name:`${E}::SetMaxActiveSessionsBufferEvent`,fields:{max_active_sessions_buffer:i.$5.u64()}}),new n.wj({name:`${E}::SetGasFeeReimbursementSuiSystemCallValueEvent`,fields:{gas_fee_reimbursement_sui_system_call_value:i.$5.u64()}}),new n.wj({name:`${E}::EndOfEpochEvent`,fields:{epoch:i.$5.u64()}})},17402:function(e,t,r){r.d(t,{N:function(){return a}});var n=r(98600),i=r(26887),s=r(77220);let a=new n.wj({name:"0x2::bag::Bag",fields:{id:s.F,size:i.$5.u64()}})},57507:function(e,t,r){r.d(t,{y:function(){return s}});var n=r(98600),i=r(26887);let s=new n.wj({name:"0x2::balance::Balance",fields:{value:i.$5.u64()}})},77220:function(e,t,r){r.d(t,{F:function(){return s}});var n=r(98600),i=r(26887);let s=new n.wj({name:"0x2::object::UID",fields:{id:i.$5.Address}})},90486:function(e,t,r){r.d(t,{B:function(){return a}});var n=r(98600),i=r(26887),s=r(77220);let a=new n.wj({name:"0x2::object_table::ObjectTable",fields:{id:s.F,size:i.$5.u64()}})},22637:function(e,t,r){r.d(t,{i:function(){return a}});var n=r(98600),i=r(26887),s=r(77220);let a=new n.wj({name:"0x2::table::Table",fields:{id:s.F,size:i.$5.u64()}})},1314:function(e,t,r){r.d(t,{VN:function(){return h},nh:function(){return g}});var n=r(98600),i=r(26887),s=r(90486),a=r(17402),o=r(22637),c=r(77220),u=r(57507);let l="@local-pkg/2pc-mpc::sessions_manager",d=new n.wj({name:`${l}::SessionsKeeper`,fields:{sessions:s.B,session_events:a.N,started_sessions_count:i.$5.u64(),completed_sessions_count:i.$5.u64(),next_session_sequence_number:i.$5.u64()}}),h=new n.wj({name:`${l}::SessionsManager`,fields:{registered_user_session_identifiers:o.i,user_sessions_keeper:d,system_sessions_keeper:d,last_user_initiated_session_to_complete_in_current_epoch:i.$5.u64(),locked_last_user_initiated_session_to_complete_in_current_epoch:i.$5.bool(),max_active_sessions_buffer:i.$5.u64()}}),p=new n.wj({name:`${l}::SessionIdentifier`,fields:{id:c.F,identifier_preimage:i.$5.vector(i.$5.u8())}});new n.wj({name:`${l}::DWalletSession`,fields:{id:c.F,session_identifier:p,session_sequence_number:i.$5.u64(),dwallet_network_encryption_key_id:i.$5.Address,fee_charged_ika:u.y,gas_fee_reimbursement_sui:u.y}}),new n.wj({name:`${l}::UserSessionIdentifierRegisteredEvent`,fields:{session_object_id:i.$5.Address,session_identifier_preimage:i.$5.vector(i.$5.u8())}});let f=new n.vY({name:`${l}::SessionType`,fields:{User:null,System:null}});function g(...e){return new n.wj({name:`${l}::DWalletSessionEvent<${e[0].name}>`,fields:{epoch:i.$5.u64(),session_object_id:i.$5.Address,session_type:f,session_sequence_number:i.$5.u64(),session_identifier_preimage:i.$5.vector(i.$5.u8()),event_data:e[0]}})}},4952:function(e,t,r){r.d(t,{F:function(){return s}});var n=r(98600),i=r(26887);let s=new n.wj({name:"0x2::object::UID",fields:{id:i.$5.Address}})},98600:function(e,t,r){r.d(t,{vY:function(){return a},wj:function(){return s}});var n=r(49488),i=r(97488);(0,i.yT)("0x1"),(0,i.yT)("0x2"),(0,i.yT)("0x3");class s extends n.S3{}class a extends n.WE{}},86099:function(e,t,r){r.d(t,{$t:function(){return s},B8:function(){return v},Dc:function(){return $},Ge:function(){return j},IA:function(){return a},Jm:function(){return E},N0:function(){return m},Of:function(){return h},Pn:function(){return _},Q9:function(){return i},RK:function(){return b},WJ:function(){return u},_2:function(){return o},_k:function(){return l},aO:function(){return c},fG:function(){return k},i3:function(){return f},mr:function(){return d},nx:function(){return S},sK:function(){return y},tW:function(){return p},y1:function(){return w},zK:function(){return g}});var n=r(26887);function i(e,t,r,i,s,a,o){o.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::register_encryption_key`,arguments:[t,o.pure.u32(r),o.pure(n.$5.vector(n.$5.u8()).serialize(i)),o.pure(n.$5.vector(n.$5.u8()).serialize(s)),o.pure(n.$5.vector(n.$5.u8()).serialize(a))]})}function s(e,t,r,i){return i.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::register_session_identifier`,arguments:[t,i.pure(n.$5.vector(n.$5.u8()).serialize(r))]})}function a(e,t,r,n){return n.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::get_active_encryption_key`,arguments:[t,n.pure.address(r)]})}function o(e,t,r,i,s,a,o){return o.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::approve_message`,arguments:[t,r,o.pure.u32(i),o.pure.u32(s),o.pure(n.$5.vector(n.$5.u8()).serialize(a))]})}function c(e,t,r,i,s,a,o){return o.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::approve_imported_key_message`,arguments:[t,r,o.pure.u32(i),o.pure.u32(s),o.pure(n.$5.vector(n.$5.u8()).serialize(a))]})}function u(e,t,r,i,s,a,o,c,u,l,d,h,p,f){let g=f.object.option({type:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator_inner::SignDuringDKGRequest`,value:d})(f);return f.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::request_dwallet_dkg`,arguments:[t,f.pure.id(r),f.pure.u32(i),f.pure(n.$5.vector(n.$5.u8()).serialize(s)),f.pure(n.$5.vector(n.$5.u8()).serialize(a)),f.pure.address(o),f.pure(n.$5.vector(n.$5.u8()).serialize(c)),f.pure(n.$5.vector(n.$5.u8()).serialize(u)),g,f.object(l),h,p]})}function l(e,t,r,i,s,a,o,c,u,l,d,h){let p=h.object.option({type:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator_inner::SignDuringDKGRequest`,value:u})(h);return h.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::request_dwallet_dkg_with_public_user_secret_key_share`,arguments:[t,h.pure.id(r),h.pure.u32(i),h.pure(n.$5.vector(n.$5.u8()).serialize(s)),h.pure(n.$5.vector(n.$5.u8()).serialize(o)),h.pure(n.$5.vector(n.$5.u8()).serialize(a)),p,h.object(c),l,d]})}function d(e,t,r,i,s,a,o){return o.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::sign_during_dkg_request`,arguments:[t,r,o.pure.u32(i),o.pure(n.$5.vector(n.$5.u8()).serialize(s)),o.pure(n.$5.vector(n.$5.u8()).serialize(a))]})}function h(e,t,r,i,s,a,o,c,u,l,d,h,p){return p.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::request_imported_key_dwallet_verification`,arguments:[t,p.pure.id(r),p.pure.u32(i),p.pure(n.$5.vector(n.$5.u8()).serialize(s)),p.pure(n.$5.vector(n.$5.u8()).serialize(a)),p.pure.address(o),p.pure(n.$5.vector(n.$5.u8()).serialize(c)),p.pure(n.$5.vector(n.$5.u8()).serialize(u)),p.object(l),d,h]})}function p(e,t,r,i,s,a,o,c){c.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::request_make_dwallet_user_secret_key_shares_public`,arguments:[t,c.pure.id(r),c.pure(n.$5.vector(n.$5.u8()).serialize(i)),s,a,o]})}function f(e,t,r,i,s,a,o,c,u,l){l.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::request_re_encrypt_user_share_for`,arguments:[t,l.pure.id(r),l.pure.address(i),l.pure(n.$5.vector(n.$5.u8()).serialize(s)),l.pure.id(a),o,c,u]})}function g(e,t,r,i,s,a){a.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::accept_encrypted_user_share`,arguments:[t,a.pure.id(r),a.pure.id(i),a.pure(n.$5.vector(n.$5.u8()).serialize(s))]})}function y(e,t,r,n,i,s,a,o){return o.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::request_presign`,arguments:[t,o.pure.id(r),o.pure.u32(n),i,s,a]})}function m(e,t,r,n,i,s,a,o,c){return c.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::request_global_presign`,arguments:[t,c.pure.id(r),c.pure.u32(n),c.pure.u32(i),s,a,o]})}function w(e,t,r,n){return n.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::verify_presign_cap`,arguments:[t,n.object(r)]})}function b(e,t,r,i,s,a,o,c,u){return u.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::request_sign_and_return_id`,arguments:[t,r,i,u.pure(n.$5.vector(n.$5.u8()).serialize(s)),a,o,c]})}function v(e,t,r,i,s,a,o,c,u){return u.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::request_imported_key_sign_and_return_id`,arguments:[t,r,i,u.pure(n.$5.vector(n.$5.u8()).serialize(s)),a,o,c]})}function $(e,t,r,i,s,a,o,c,u,l,d){return d.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::request_future_sign`,arguments:[t,d.pure.id(r),i,d.pure(n.$5.vector(n.$5.u8()).serialize(s)),d.pure.u32(a),d.pure(n.$5.vector(n.$5.u8()).serialize(o)),c,u,l]})}function k(e,t,r,n){return n.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::verify_partial_user_signature_cap`,arguments:[t,n.object(r)]})}function _(e,t,r,n,i,s,a,o){return o.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::request_sign_with_partial_user_signature_and_return_id`,arguments:[t,o.object(r),o.object(n),i,s,a]})}function S(e,t,r,n,i,s,a,o){return o.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::request_imported_key_sign_with_partial_user_signature_and_return_id`,arguments:[t,o.object(r),o.object(n),i,s,a]})}function j(e,t,r,n){return n.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::has_dwallet`,arguments:[t,n.pure.id(r)]})}function E(e,t,r,n){return n.moveCall({target:`${e.packages.ikaDwallet2pcMpcPackage}::coordinator::get_dwallet`,arguments:[t,n.pure.id(r)]})}},49488:function(e,t,r){r.d(t,{WE:function(){return P},S3:function(){return C},a4:function(){return R},mn:function(){return $},bZ:function(){return O},pq:function(){return I},ZY:function(){return j},pF:function(){return _},um:function(){return x},ws:function(){return A},sN:function(){return E}});var n,i,s,a,o=r(73899),c=r(2783),u=r(97655),l=r(51857);class d{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32();return BigInt("0x"+(this.read32().toString(16)+e.toString(16).padStart(8,"0"))).toString(10)}read128(){let e=BigInt(this.read64());return BigInt("0x"+(BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0"))).toString(10)}read256(){let e=BigInt(this.read128());return BigInt("0x"+(BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0"))).toString(10)}readBytes(e){let t=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,t,e);return this.shift(e),r}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,t=new Uint8Array(this.dataView.buffer,e),{value:r,length:n}=(0,l.y)(t);return this.shift(n),r}readVec(e){let t=this.readULEB(),r=[];for(let n=0;n<t;n++)r.push(e(this,n,t));return r}}var h=r(81605);class p{constructor({initialSize:e=1024,maxSize:t=1/0,allocateSize:r=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=t,this.allocateSize=r,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){let t=this.bytePosition+e;if(t>this.size){let e=Math.min(this.maxSize,Math.max(this.size+t,this.size+this.allocateSize));if(t>e)throw Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${t}`);this.size=e;let r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}writeBytes(e){this.ensureSizeOrGrow(e.length);for(let t=0;t<e.length;t++)this.dataView.setUint8(this.bytePosition+t,e[t]);return this.shift(e.length)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return f(BigInt(e),8).forEach(e=>this.write8(e)),this}write128(e){return f(BigInt(e),16).forEach(e=>this.write8(e)),this}write256(e){return f(BigInt(e),32).forEach(e=>this.write8(e)),this}writeULEB(e){return(0,l.u)(e).forEach(e=>this.write8(e)),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach((r,n)=>t(this,r,n,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return(0,h.zS)(this.toBytes(),e)}}function f(e,t){let r=new Uint8Array(t),n=0;for(;e>0;)r[n]=Number(e%BigInt(256)),e/=BigInt(256),n+=1;return r}var g=e=>{throw TypeError(e)},y=(e,t,r)=>t.has(e)||g("Cannot "+r),m=(e,t,r)=>(y(e,t,"read from private field"),r?r.call(e):t.get(e)),w=(e,t,r)=>t.has(e)?g("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),b=(e,t,r,n)=>(y(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);let v=class e{constructor(e){w(this,n),w(this,i),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),b(this,n,e.write),b(this,i,e.serialize??((e,t)=>{let r=new p({initialSize:this.serializedSize(e)??void 0,...t});return m(this,n).call(this,e,r),r.toBytes()})),this.validate=e.validate??(()=>{})}write(e,t){this.validate(e),m(this,n).call(this,e,t)}serialize(e,t){return this.validate(e),new S(this,m(this,i).call(this,e,t))}parse(e){let t=new d(e);return this.read(t)}fromHex(e){return this.parse((0,o.H)(e))}fromBase58(e){return this.parse((0,c.L)(e))}fromBase64(e){return this.parse((0,u.G)(e))}transform({name:t,input:r,output:s,validate:a}){return new e({name:t??this.name,read:e=>s?s(this.read(e)):this.read(e),write:(e,t)=>m(this,n).call(this,r?r(e):e,t),serializedSize:e=>this.serializedSize(r?r(e):e),serialize:(e,t)=>m(this,i).call(this,r?r(e):e,t),validate:e=>{a?.(e),this.validate(r?r(e):e)}})}};n=new WeakMap,i=new WeakMap;let $=v,k=Symbol.for("@mysten/serialized-bcs");function _(e){return!!e&&"object"==typeof e&&!0===e[k]}class S{constructor(e,t){w(this,s),w(this,a),b(this,s,e),b(this,a,t)}get[k](){return!0}toBytes(){return m(this,a)}toHex(){return(0,o.N)(m(this,a))}toBase64(){return(0,u.s)(m(this,a))}toBase58(){return(0,c.z)(m(this,a))}parse(){return m(this,s).parse(m(this,a))}}function j({size:e,...t}){return new $({...t,serializedSize:()=>e})}function E({readMethod:e,writeMethod:t,...r}){return j({...r,read:t=>t[e](),write:(e,r)=>r[t](e),validate:e=>{if(e<0||e>r.maxValue)throw TypeError(`Invalid ${r.name} value: ${e}. Expected value in range 0-${r.maxValue}`);r.validate?.(e)}})}function O({readMethod:e,writeMethod:t,...r}){return j({...r,read:t=>t[e](),write:(e,r)=>r[t](BigInt(e)),validate:e=>{let t=BigInt(e);if(t<0||t>r.maxValue)throw TypeError(`Invalid ${r.name} value: ${t}. Expected value in range 0-${r.maxValue}`);r.validate?.(t)}})}function I({serialize:e,...t}){let r=new $({...t,serialize:e,write:(e,t)=>{for(let n of r.serialize(e).toBytes())t.write8(n)}});return r}function A({toBytes:e,fromBytes:t,...r}){return new $({...r,read:e=>{let r=e.readULEB();return t(e.readBytes(r))},write:(t,r)=>{let n=e(t);r.writeULEB(n.length);for(let e=0;e<n.length;e++)r.write8(n[e])},serialize:t=>{let r=e(t),n=(0,l.u)(r.length),i=new Uint8Array(n.length+r.length);return i.set(n,0),i.set(r,n.length),i},validate:e=>{if("string"!=typeof e)throw TypeError(`Invalid ${r.name} value: ${e}. Expected string`);r.validate?.(e)}})}function x(e){let t=null;function r(){return t||(t=e()),t}return new $({name:"lazy",read:e=>r().read(e),serializedSize:e=>r().serializedSize(e),write:(e,t)=>r().write(e,t),serialize:(e,t)=>r().serialize(e,t).toBytes()})}s=new WeakMap,a=new WeakMap;class C extends ${constructor({name:e,fields:t,...r}){let n=Object.entries(t);super({name:e,serializedSize:e=>{let t=0;for(let[r,i]of n){let n=i.serializedSize(e[r]);if(null==n)return null;t+=n}return t},read:e=>{let t={};for(let[r,i]of n)t[r]=i.read(e);return t},write:(e,t)=>{for(let[r,i]of n)i.write(e[r],t)},...r,validate:e=>{if(r?.validate?.(e),"object"!=typeof e||null==e)throw TypeError(`Expected object, found ${typeof e}`)}})}}class P extends ${constructor({fields:e,...t}){let r=Object.entries(e);super({read:e=>{let n=e.readULEB(),i=r[n];if(!i)throw TypeError(`Unknown value ${n} for enum ${t.name}`);let[s,a]=i;return{[s]:a?.read(e)??!0,$kind:s}},write:(t,n)=>{let[i,s]=Object.entries(t).filter(([t])=>Object.hasOwn(e,t))[0];for(let e=0;e<r.length;e++){let[t,a]=r[e];if(t===i){n.writeULEB(e),a?.write(s,n);return}}},...t,validate:r=>{if(t?.validate?.(r),"object"!=typeof r||null==r)throw TypeError(`Expected object, found ${typeof r}`);let n=Object.keys(r).filter(t=>void 0!==r[t]&&Object.hasOwn(e,t));if(1!==n.length)throw TypeError(`Expected object with one key, but found ${n.length} for type ${t.name}}`);let[i]=n;if(!Object.hasOwn(e,i))throw TypeError(`Invalid enum variant ${i}`)}})}}class R extends ${constructor({fields:e,name:t,...r}){super({name:t??`(${e.map(e=>e.name).join(", ")})`,serializedSize:t=>{let r=0;for(let n=0;n<e.length;n++){let i=e[n].serializedSize(t[n]);if(null==i)return null;r+=i}return r},read:t=>{let r=[];for(let n of e)r.push(n.read(t));return r},write:(t,r)=>{for(let n=0;n<e.length;n++)e[n].write(t[n],r)},...r,validate:t=>{if(r?.validate?.(t),!Array.isArray(t))throw TypeError(`Expected array, found ${typeof t}`);if(t.length!==e.length)throw TypeError(`Expected array of length ${e.length}, found ${t.length}`)}})}}},58437:function(e,t,r){r.d(t,{$:function(){return s}});var n=r(49488),i=r(51857);let s={u8:e=>(0,n.sN)({readMethod:"read8",writeMethod:"write8",size:1,maxValue:255,...e,name:e?.name??"u8"}),u16:e=>(0,n.sN)({readMethod:"read16",writeMethod:"write16",size:2,maxValue:65535,...e,name:e?.name??"u16"}),u32:e=>(0,n.sN)({readMethod:"read32",writeMethod:"write32",size:4,maxValue:4294967296-1,...e,name:e?.name??"u32"}),u64:e=>(0,n.bZ)({readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e,name:e?.name??"u64"}),u128:e=>(0,n.bZ)({readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e,name:e?.name??"u128"}),u256:e=>(0,n.bZ)({readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e,name:e?.name??"u256"}),bool:e=>(0,n.ZY)({size:1,read:e=>1===e.read8(),write:(e,t)=>t.write8(e?1:0),...e,name:e?.name??"bool",validate:t=>{if(e?.validate?.(t),"boolean"!=typeof t)throw TypeError(`Expected boolean, found ${typeof t}`)}}),uleb128:e=>(0,n.pq)({read:e=>e.readULEB(),serialize:e=>Uint8Array.from((0,i.u)(e)),...e,name:e?.name??"uleb128"}),bytes:(e,t)=>(0,n.ZY)({size:e,read:t=>t.readBytes(e),write:(e,t)=>{t.writeBytes(new Uint8Array(e))},...t,name:t?.name??`bytes[${e}]`,validate:r=>{if(t?.validate?.(r),!r||"object"!=typeof r||!("length"in r))throw TypeError(`Expected array, found ${typeof r}`);if(r.length!==e)throw TypeError(`Expected array of length ${e}, found ${r.length}`)}}),byteVector:e=>new n.mn({read:e=>{let t=e.readULEB();return e.readBytes(t)},write:(e,t)=>{let r=new Uint8Array(e);t.writeULEB(r.length),t.writeBytes(r)},...e,name:e?.name??"vector<u8>",serializedSize:e=>{let t="length"in e?e.length:null;return null==t?null:(0,i.u)(t).length+t},validate:t=>{if(e?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw TypeError(`Expected array, found ${typeof t}`)}}),string:e=>(0,n.ws)({toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...e,name:e?.name??"string"}),fixedArray:function(e,t,r){return new n.mn({read:r=>{let n=Array(e);for(let i=0;i<e;i++)n[i]=t.read(r);return n},write:(e,r)=>{for(let n of e)t.write(n,r)},...r,name:r?.name??`${t.name}[${e}]`,validate:t=>{if(r?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw TypeError(`Expected array, found ${typeof t}`);if(t.length!==e)throw TypeError(`Expected array of length ${e}, found ${t.length}`)}})},option:function(e){return s.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:e=>null==e?{None:!0}:{Some:e},output:e=>"Some"===e.$kind?e.Some:null})},vector:function(e,t){return new n.mn({read:t=>{let r=t.readULEB(),n=Array(r);for(let i=0;i<r;i++)n[i]=e.read(t);return n},write:(t,r)=>{for(let n of(r.writeULEB(t.length),t))e.write(n,r)},...t,name:t?.name??`vector<${e.name}>`,validate:e=>{if(t?.validate?.(e),!e||"object"!=typeof e||!("length"in e))throw TypeError(`Expected array, found ${typeof e}`)}})},tuple:(e,t)=>new n.a4({fields:e,...t}),struct:(e,t,r)=>new n.S3({name:e,fields:t,...r}),enum:(e,t,r)=>new n.WE({name:e,fields:t,...r}),map:function(e,t){return s.vector(s.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:e=>[...e.entries()],output:e=>{let t=new Map;for(let[r,n]of e)t.set(r,n);return t}})},lazy:e=>(0,n.um)(e)}},51857:function(e,t,r){function n(e){let t=BigInt(e),r=[],n=0;if(0n===t)return[0];for(;t>0;)r[n]=Number(127n&t),(t>>=7n)>0n&&(r[n]|=128),n+=1;return r}function i(e){let t=0n,r=0n,n=0;for(;;){if(n>=e.length)throw Error("ULEB decode error: buffer overflow");let i=e[n];if(n+=1,t+=BigInt(127&i)<<r,(128&i)==0)break;r+=7n}if(t>BigInt(Number.MAX_SAFE_INTEGER))throw Error("ULEB decode error: value exceeds MAX_SAFE_INTEGER");return{value:Number(t),length:n}}r.d(t,{u:function(){return n},y:function(){return i}})},81605:function(e,t,r){r.d(t,{fR:function(){return o},zS:function(){return a}});var n=r(2783),i=r(97655),s=r(73899);function a(e,t){switch(t){case"base58":return(0,n.z)(e);case"base64":return(0,i.s)(e);case"hex":return(0,s.N)(e);default:throw Error("Unsupported encoding, supported values are: base64, hex")}}function o(e,t=["<",">"]){let[r,n]=t,i=[],s="",a=0;for(let t=0;t<e.length;t++){let o=e[t];if(o===r&&a++,o===n&&a--,0===a&&","===o){i.push(s.trim()),s="";continue}s+=o}return i.push(s.trim()),i}},58391:function(e,t,r){r.d(t,{Ct:function(){return O},Ff:function(){return f},GQ:function(){return I},J1:function(){return P},Jx:function(){return d},Ls:function(){return _},O$:function(){return m},Ow:function(){return A},Qh:function(){return b},SE:function(){return C},W2:function(){return $},WJ:function(){return l},YQ:function(){return g},_8:function(){return h},cy:function(){return S},dy:function(){return E},eO:function(){return N},hA:function(){return w},jU:function(){return V},jf:function(){return K},k8:function(){return U},kL:function(){return u},ko:function(){return R},mY:function(){return v},nb:function(){return p},nh:function(){return T},oA:function(){return j},os:function(){return D},qd:function(){return M},tj:function(){return x},wz:function(){return k}});var n=r(58437),i=r(73899),s=r(2783),a=r(97655),o=r(97488),c=r(93720);let u=n.$.bytes(o.kT).transform({validate:e=>{let t="string"==typeof e?e:(0,i.N)(e);if(!t||!(0,o.oI)((0,o.yT)(t)))throw Error(`Invalid Sui address ${t}`)},input:e=>"string"==typeof e?(0,i.H)((0,o.yT)(e)):e,output:e=>(0,o.yT)((0,i.N)(e))}),l=n.$.byteVector().transform({name:"ObjectDigest",input:e=>(0,s.L)(e),output:e=>(0,s.z)(new Uint8Array(e)),validate:e=>{if(32!==(0,s.L)(e).length)throw Error("ObjectDigest must be 32 bytes")}}),d=n.$.struct("SuiObjectRef",{objectId:u,version:n.$.u64(),digest:l}),h=n.$.struct("SharedObjectRef",{objectId:u,initialSharedVersion:n.$.u64(),mutable:n.$.bool()}),p=n.$.enum("ObjectArg",{ImmOrOwnedObject:d,SharedObject:h,Receiving:d}),f=n.$.enum("Owner",{AddressOwner:u,ObjectOwner:u,Shared:n.$.struct("Shared",{initialSharedVersion:n.$.u64()}),Immutable:null,ConsensusAddressOwner:n.$.struct("ConsensusAddressOwner",{owner:u,startVersion:n.$.u64()})}),g=n.$.enum("CallArg",{Pure:n.$.struct("Pure",{bytes:n.$.byteVector().transform({input:e=>"string"==typeof e?(0,a.G)(e):e,output:e=>(0,a.s)(new Uint8Array(e))})}),Object:p}),y=n.$.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:n.$.lazy(()=>y),struct:n.$.lazy(()=>S),u16:null,u32:null,u256:null}),m=y.transform({input:e=>"string"==typeof e?c.X.parseFromStr(e,!0):e,output:e=>c.X.tagToString(e)}),w=n.$.enum("Argument",{GasCoin:null,Input:n.$.u16(),Result:n.$.u16(),NestedResult:n.$.tuple([n.$.u16(),n.$.u16()])}),b=n.$.struct("ProgrammableMoveCall",{package:u,module:n.$.string(),function:n.$.string(),typeArguments:n.$.vector(m),arguments:n.$.vector(w)}),v=n.$.enum("Command",{MoveCall:b,TransferObjects:n.$.struct("TransferObjects",{objects:n.$.vector(w),address:w}),SplitCoins:n.$.struct("SplitCoins",{coin:w,amounts:n.$.vector(w)}),MergeCoins:n.$.struct("MergeCoins",{destination:w,sources:n.$.vector(w)}),Publish:n.$.struct("Publish",{modules:n.$.vector(n.$.byteVector().transform({input:e=>"string"==typeof e?(0,a.G)(e):e,output:e=>(0,a.s)(new Uint8Array(e))})),dependencies:n.$.vector(u)}),MakeMoveVec:n.$.struct("MakeMoveVec",{type:n.$.enum("Option",{None:null,Some:m}).transform({input:e=>null===e?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:n.$.vector(w)}),Upgrade:n.$.struct("Upgrade",{modules:n.$.vector(n.$.byteVector().transform({input:e=>"string"==typeof e?(0,a.G)(e):e,output:e=>(0,a.s)(new Uint8Array(e))})),dependencies:n.$.vector(u),package:u,ticket:w})}),$=n.$.struct("ProgrammableTransaction",{inputs:n.$.vector(g),commands:n.$.vector(v)}),k=n.$.enum("TransactionKind",{ProgrammableTransaction:$,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),_=n.$.enum("TransactionExpiration",{None:null,Epoch:n.$.u64({name:"unsafe_u64"}).transform({input:e=>e,output:e=>Number(e)})}),S=n.$.struct("StructTag",{address:u,module:n.$.string(),name:n.$.string(),typeParams:n.$.vector(y)}),j=n.$.struct("GasData",{payment:n.$.vector(d),owner:u,price:n.$.u64(),budget:n.$.u64()}),E=n.$.struct("TransactionDataV1",{kind:k,sender:u,gasData:j,expiration:_}),O=n.$.enum("TransactionData",{V1:E}),I=n.$.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),A=n.$.enum("IntentVersion",{V0:null}),x=n.$.enum("AppId",{Sui:null}),C=n.$.struct("Intent",{scope:I,version:A,appId:x});function P(e){return n.$.struct(`IntentMessage<${e.name}>`,{intent:C,value:e})}let R=n.$.enum("CompressedSignature",{ED25519:n.$.bytes(64),Secp256k1:n.$.bytes(64),Secp256r1:n.$.bytes(64),ZkLogin:n.$.byteVector(),Passkey:n.$.byteVector()}),T=n.$.enum("PublicKey",{ED25519:n.$.bytes(32),Secp256k1:n.$.bytes(33),Secp256r1:n.$.bytes(33),ZkLogin:n.$.byteVector(),Passkey:n.$.bytes(33)}),D=n.$.struct("MultiSigPkMap",{pubKey:T,weight:n.$.u8()}),M=n.$.struct("MultiSigPublicKey",{pk_map:n.$.vector(D),threshold:n.$.u16()}),U=n.$.struct("MultiSig",{sigs:n.$.vector(R),bitmap:n.$.u16(),multisig_pk:M}),B=n.$.byteVector().transform({input:e=>"string"==typeof e?(0,a.G)(e):e,output:e=>(0,a.s)(new Uint8Array(e))}),N=n.$.struct("SenderSignedTransaction",{intentMessage:P(O),txSignatures:n.$.vector(B)}),V=n.$.vector(N,{name:"SenderSignedData"}),K=n.$.struct("PasskeyAuthenticator",{authenticatorData:n.$.byteVector(),clientDataJson:n.$.string(),userSignature:n.$.byteVector()})},26887:function(e,t,r){r.d(t,{$5:function(){return k}});var n=r(58437),i=r(58391);let s=n.$.enum("PackageUpgradeError",{UnableToFetchPackage:n.$.struct("UnableToFetchPackage",{packageId:i.kL}),NotAPackage:n.$.struct("NotAPackage",{objectId:i.kL}),IncompatibleUpgrade:null,DigestDoesNotMatch:n.$.struct("DigestDoesNotMatch",{digest:n.$.byteVector()}),UnknownUpgradePolicy:n.$.struct("UnknownUpgradePolicy",{policy:n.$.u8()}),PackageIDDoesNotMatch:n.$.struct("PackageIDDoesNotMatch",{packageId:i.kL,ticketId:i.kL})}),a=n.$.struct("ModuleId",{address:i.kL,name:n.$.string()}),o=n.$.struct("MoveLocation",{module:a,function:n.$.u16(),instruction:n.$.u16(),functionName:n.$.option(n.$.string())}),c=n.$.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:n.$.struct("IndexOutOfBounds",{idx:n.$.u16()}),SecondaryIndexOutOfBounds:n.$.struct("SecondaryIndexOutOfBounds",{resultIdx:n.$.u16(),secondaryIdx:n.$.u16()}),InvalidResultArity:n.$.struct("InvalidResultArity",{resultIdx:n.$.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),u=n.$.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),l=n.$.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:n.$.struct("MoveObjectTooBig",{objectSize:n.$.u64(),maxObjectSize:n.$.u64()}),MovePackageTooBig:n.$.struct("MovePackageTooBig",{objectSize:n.$.u64(),maxObjectSize:n.$.u64()}),CircularObjectOwnership:n.$.struct("CircularObjectOwnership",{object:i.kL}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:n.$.option(o),MoveAbort:n.$.tuple([o,n.$.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:n.$.struct("CommandArgumentError",{argIdx:n.$.u16(),kind:c}),TypeArgumentError:n.$.struct("TypeArgumentError",{argumentIdx:n.$.u16(),kind:u}),UnusedValueWithoutDrop:n.$.struct("UnusedValueWithoutDrop",{resultIdx:n.$.u16(),secondaryIdx:n.$.u16()}),InvalidPublicFunctionReturnType:n.$.struct("InvalidPublicFunctionReturnType",{idx:n.$.u16()}),InvalidTransferObject:null,EffectsTooLarge:n.$.struct("EffectsTooLarge",{currentSize:n.$.u64(),maxSize:n.$.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:n.$.struct("PackageUpgradeError",{upgradeError:s}),WrittenObjectsTooLarge:n.$.struct("WrittenObjectsTooLarge",{currentSize:n.$.u64(),maxSize:n.$.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:n.$.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:n.$.vector(i.kL)}),AddressDeniedForCoin:n.$.struct("AddressDeniedForCoin",{address:i.kL,coinType:n.$.string()}),CoinTypeGlobalPause:n.$.struct("CoinTypeGlobalPause",{coinType:n.$.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),d=n.$.enum("ExecutionStatus",{Success:null,Failed:n.$.struct("ExecutionFailed",{error:l,command:n.$.option(n.$.u64())})}),h=n.$.struct("GasCostSummary",{computationCost:n.$.u64(),storageCost:n.$.u64(),storageRebate:n.$.u64(),nonRefundableStorageFee:n.$.u64()}),p=n.$.struct("TransactionEffectsV1",{status:d,executedEpoch:n.$.u64(),gasUsed:h,modifiedAtVersions:n.$.vector(n.$.tuple([i.kL,n.$.u64()])),sharedObjects:n.$.vector(i.Jx),transactionDigest:i.WJ,created:n.$.vector(n.$.tuple([i.Jx,i.Ff])),mutated:n.$.vector(n.$.tuple([i.Jx,i.Ff])),unwrapped:n.$.vector(n.$.tuple([i.Jx,i.Ff])),deleted:n.$.vector(i.Jx),unwrappedThenDeleted:n.$.vector(i.Jx),wrapped:n.$.vector(i.Jx),gasObject:n.$.tuple([i.Jx,i.Ff]),eventsDigest:n.$.option(i.WJ),dependencies:n.$.vector(i.WJ)}),f=n.$.tuple([n.$.u64(),i.WJ]),g=n.$.enum("ObjectIn",{NotExist:null,Exist:n.$.tuple([f,i.Ff])}),y=n.$.enum("ObjectOut",{NotExist:null,ObjectWrite:n.$.tuple([i.WJ,i.Ff]),PackageWrite:f}),m=n.$.enum("IDOperation",{None:null,Created:null,Deleted:null}),w=n.$.struct("EffectsObjectChange",{inputState:g,outputState:y,idOperation:m}),b=n.$.enum("UnchangedSharedKind",{ReadOnlyRoot:f,MutateDeleted:n.$.u64(),ReadDeleted:n.$.u64(),Cancelled:n.$.u64(),PerEpochConfig:null}),v=n.$.struct("TransactionEffectsV2",{status:d,executedEpoch:n.$.u64(),gasUsed:h,transactionDigest:i.WJ,gasObjectIndex:n.$.option(n.$.u32()),eventsDigest:n.$.option(i.WJ),dependencies:n.$.vector(i.WJ),lamportVersion:n.$.u64(),changedObjects:n.$.vector(n.$.tuple([i.kL,w])),unchangedSharedObjects:n.$.vector(n.$.tuple([i.kL,b])),auxDataDigest:n.$.option(i.WJ)}),$=n.$.enum("TransactionEffects",{V1:p,V2:v}),k={...n.$,U8:n.$.u8(),U16:n.$.u16(),U32:n.$.u32(),U64:n.$.u64(),U128:n.$.u128(),U256:n.$.u256(),ULEB128:n.$.uleb128(),Bool:n.$.bool(),String:n.$.string(),Address:i.kL,AppId:i.tj,Argument:i.hA,CallArg:i.YQ,Command:i.mY,CompressedSignature:i.ko,GasData:i.oA,Intent:i.SE,IntentMessage:i.J1,IntentScope:i.GQ,IntentVersion:i.Ow,MultiSig:i.k8,MultiSigPkMap:i.os,MultiSigPublicKey:i.qd,ObjectArg:i.nb,ObjectDigest:i.WJ,Owner:i.Ff,PasskeyAuthenticator:i.jf,ProgrammableMoveCall:i.Qh,ProgrammableTransaction:i.W2,PublicKey:i.nh,SenderSignedData:i.jU,SenderSignedTransaction:i.eO,SharedObjectRef:i._8,StructTag:i.cy,SuiObjectRef:i.Jx,TransactionData:i.Ct,TransactionDataV1:i.dy,TransactionEffects:$,TransactionExpiration:i.Ls,TransactionKind:i.wz,TypeTag:i.O$}},93720:function(e,t,r){r.d(t,{X:function(){return o}});var n=r(81605),i=r(97488);let s=/^vector<(.+)>$/,a=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class o{static parseFromStr(e,t=!1){if("address"===e)return{address:null};if("bool"===e)return{bool:null};if("u8"===e)return{u8:null};if("u16"===e)return{u16:null};if("u32"===e)return{u32:null};if("u64"===e)return{u64:null};if("u128"===e)return{u128:null};else if("u256"===e)return{u256:null};else if("signer"===e)return{signer:null};let r=e.match(s);if(r)return{vector:o.parseFromStr(r[1],t)};let n=e.match(a);if(n)return{struct:{address:t?(0,i.yT)(n[1]):n[1],module:n[2],name:n[3],typeParams:void 0===n[5]?[]:o.parseStructTypeArgs(n[5],t)}};throw Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,t=!1){return(0,n.fR)(e).map(e=>o.parseFromStr(e,t))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${o.tagToString(e.vector)}>`;if("struct"in e){let t=e.struct,r=t.typeParams.map(o.tagToString).join(", ");return`${t.address}::${t.module}::${t.name}${r?`<${r}>`:""}`}throw Error("Invalid TypeTag")}}},95580:function(e,t,r){r.d(t,{F:function(){return i}});var n=r(26887);function i(e,t){return n.$5.IntentMessage(n.$5.bytes(t.length)).serialize({intent:{scope:{[e]:!0},version:{V0:!0},appId:{Sui:!0}},value:t}).toBytes()}},60168:function(e,t,r){r.d(t,{ex:function(){return s},hD:function(){return n},sK:function(){return i}});let n={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5,Passkey:6},i={ED25519:32,Secp256k1:33,Secp256r1:33,Passkey:33},s={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin",6:"Passkey"}},280:function(e,t,r){r.d(t,{E:function(){return p}});var n=r(97655),i=r(28389),s=r(55184),a=r(19661),o=r(26887),c=r(97488),u=r(95580),l=r(60168);function d(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}class h{equals(e){return d(this.toRawBytes(),e.toRawBytes())}toBase64(){return(0,n.s)(this.toRawBytes())}toString(){throw Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){let e=this.toSuiBytes();return(0,n.s)(e)}verifyWithIntent(e,t,r){let n=(0,u.F)(r,e),i=(0,s.R)(n,{dkLen:32});return this.verify(i,t)}verifyPersonalMessage(e,t){return this.verifyWithIntent(o.$5.byteVector().serialize(e).toBytes(),t,"PersonalMessage")}verifyTransaction(e,t){return this.verifyWithIntent(e,t,"TransactionData")}verifyAddress(e){return this.toSuiAddress()===e}toSuiBytes(){let e=this.toRawBytes(),t=new Uint8Array(e.length+1);return t.set([this.flag()]),t.set(e,1),t}toSuiAddress(){return(0,c.yT)((0,a.ci)((0,s.R)(this.toSuiBytes(),{dkLen:32})).slice(0,2*c.kT))}}class p extends h{constructor(e){if(super(),"string"==typeof e?this.data=(0,n.G)(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),32!==this.data.length)throw Error(`Invalid public key input. Expected 32 bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return l.hD.ED25519}async verify(e,t){let r;if("string"==typeof t){let e=function(e){let t=(0,n.G)(e),r=l.ex[t[0]];switch(r){case"ED25519":case"Secp256k1":case"Secp256r1":let i=l.sK[r],s=t.slice(1,t.length-i),a=t.slice(1+s.length);return{serializedSignature:e,signatureScheme:r,signature:s,publicKey:a,bytes:t};default:throw Error("Unsupported signature scheme")}}(t);if("ED25519"!==e.signatureScheme)throw Error("Invalid signature scheme");if(!d(this.toRawBytes(),e.publicKey))throw Error("Signature does not match public key");r=e.signature}else r=t;return i.UN.verify(r,e,this.toRawBytes())}}p.SIZE=32},20547:function(e,t,r){r.d(t,{Y:function(){return o},S:function(){return c}});let n=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,i=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,s=/^([a-z0-9]+(?:-[a-z0-9]+)*)$/,a=/^\d+$/,o=e=>{let t=e.split("/");if(t.length<2||t.length>3)return!1;let[r,o,c]=t;return!!(void 0===c||a.test(c))&&!!(!(r.length>235)&&(r.includes("@")?n.test(r):i.test(r)))&&s.test(o)&&o.length<64},c=e=>{for(let t of e.split(/::|<|>|,/))if(t.includes("/")&&!o(t))return!1;return!0}},97488:function(e,t,r){r.d(t,{$A:function(){return o},Fw:function(){return u},kT:function(){return s},kX:function(){return function e(t){let{address:r,module:n,name:i,typeParams:s}="string"==typeof t?o(t):t,a=s?.length>0?`<${s.map(t=>"string"==typeof t?t:e(t)).join(",")}>`:"";return`${r}::${n}::${i}${a}`}},oI:function(){return a},yT:function(){return c}});var n=r(81605),i=r(20547);let s=32;function a(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2==0&&(/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2)===s}function o(e){let[t,r]=e.split("::"),s=(0,i.Y)(t),a=e.slice(t.length+r.length+4),u=a.includes("<")?a.slice(0,a.indexOf("<")):a,l=a.includes("<")?(0,n.fR)(a.slice(a.indexOf("<")+1,a.lastIndexOf(">"))).map(e=>{var t;return(t=e.trim()).includes("::")?o(t):t}):[];return{address:s?t:c(t),module:r,name:u,typeParams:l}}function c(e,t=!1){let r=e.toLowerCase();return!t&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(2*s,"0")}`}function u(e,t=!1){return c(e,t)}},28389:function(e,t,r){r.d(t,{UN:function(){return ey}});var n=r(41870),i=r(19661);let s=BigInt(0),a=BigInt(1);function o(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}function c(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?s:BigInt("0x"+e)}function u(e){return(0,i.gk)(e),c((0,i.ci)(Uint8Array.from(e).reverse()))}function l(e,t){return(0,i.nr)(e.toString(16).padStart(2*t,"0"))}function d(e,t){return l(e,t).reverse()}function h(e,t,r){let n;if("string"==typeof t)try{n=(0,i.nr)(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if((0,i._t)(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let s=n.length;if("number"==typeof r&&s!==r)throw Error(e+" of length "+r+" expected, got "+s);return n}let p=e=>"bigint"==typeof e&&s<=e;function f(e,t,r,n){if(!(p(t)&&p(r)&&p(n))||!(r<=t)||!(t<n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}let g=e=>(a<<BigInt(e))-a;function y(e,t,r={}){if(!e||"object"!=typeof e)throw Error("expected valid options object");function n(t,r,n){let i=e[t];if(n&&void 0===i)return;let s=typeof i;if(s!==r||null===i)throw Error(`param "${t}" is invalid: expected ${r}, got ${s}`)}Object.entries(t).forEach(([e,t])=>n(e,t,!1)),Object.entries(r).forEach(([e,t])=>n(e,t,!0))}function m(e){let t=new WeakMap;return(r,...n)=>{let i=t.get(r);if(void 0!==i)return i;let s=e(r,...n);return t.set(r,s),s}}let w=BigInt(0),b=BigInt(1),v=BigInt(2),$=BigInt(3),k=BigInt(4),_=BigInt(5),S=BigInt(7),j=BigInt(8),E=BigInt(9),O=BigInt(16);function I(e,t){let r=e%t;return r>=w?r:t+r}function A(e,t,r){let n=e;for(;t-- >w;)n*=n,n%=r;return n}function x(e,t){if(e===w)throw Error("invert: expected non-zero number");if(t<=w)throw Error("invert: expected positive modulus, got "+t);let r=I(e,t),n=t,i=w,s=b,a=b,o=w;for(;r!==w;){let e=n/r,t=n%r,c=i-a*e,u=s-o*e;n=r,r=t,i=a,s=o,a=c,o=u}if(n!==b)throw Error("invert: does not exist");return I(i,t)}function C(e,t,r){if(!e.eql(e.sqr(t),r))throw Error("Cannot find square root")}function P(e,t){let r=(e.ORDER+b)/k,n=e.pow(t,r);return C(e,n,t),n}function R(e,t){let r=(e.ORDER-_)/j,n=e.mul(t,v),i=e.pow(n,r),s=e.mul(t,i),a=e.mul(e.mul(s,v),i),o=e.mul(s,e.sub(a,e.ONE));return C(e,o,t),o}function T(e){if(e<$)throw Error("sqrt is not defined for small field");let t=e-b,r=0;for(;t%v===w;)t/=v,r++;let n=v,i=N(e);for(;1===B(i,n);)if(n++>1e3)throw Error("Cannot find square root: probably non-prime P");if(1===r)return P;let s=i.pow(n,t),a=(t+b)/v;return function(e,n){if(e.is0(n))return n;if(1!==B(e,n))throw Error("Cannot find square root");let i=r,o=e.mul(e.ONE,s),c=e.pow(n,t),u=e.pow(n,a);for(;!e.eql(c,e.ONE);){if(e.is0(c))return e.ZERO;let t=1,r=e.sqr(c);for(;!e.eql(r,e.ONE);)if(t++,r=e.sqr(r),t===i)throw Error("Cannot find square root");let n=b<<BigInt(i-t-1),s=e.pow(o,n);i=t,o=e.sqr(s),c=e.mul(c,o),u=e.mul(u,s)}return u}}let D=(e,t)=>(I(e,t)&b)===b,M=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function U(e,t,r=!1){let n=Array(t.length).fill(r?e.ZERO:void 0),i=t.reduce((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r)),e.ONE),s=e.inv(i);return t.reduceRight((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r)),s),n}function B(e,t){let r=(e.ORDER-b)/v,n=e.pow(t,r),i=e.eql(n,e.ONE),s=e.eql(n,e.ZERO),a=e.eql(n,e.neg(e.ONE));if(!i&&!s&&!a)throw Error("invalid Legendre symbol result");return i?1:s?0:-1}function N(e,t,r=!1,n={}){let s,a,o,h;if(e<=w)throw Error("invalid field: expected ORDER > 0, got "+e);let p=!1;if("object"==typeof t&&null!=t){if(n.sqrt||r)throw Error("cannot specify opts in two arguments");t.BITS&&(a=t.BITS),t.sqrt&&(o=t.sqrt),"boolean"==typeof t.isLE&&(r=t.isLE),"boolean"==typeof t.modOnDecode&&(p=t.modOnDecode),h=t.allowedLengths}else"number"==typeof t&&(a=t),n.sqrt&&(o=n.sqrt);let{nBitLength:f,nByteLength:y}=function(e,t){void 0!==t&&(0,i.k8)(t);let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}(e,a);if(y>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let m=Object.freeze({ORDER:e,isLE:r,BITS:f,BYTES:y,MASK:g(f),ZERO:w,ONE:b,allowedLengths:h,create:t=>I(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return w<=t&&t<e},is0:e=>e===w,isValidNot0:e=>!m.is0(e)&&m.isValid(e),isOdd:e=>(e&b)===b,neg:t=>I(-t,e),eql:(e,t)=>e===t,sqr:t=>I(t*t,e),add:(t,r)=>I(t+r,e),sub:(t,r)=>I(t-r,e),mul:(t,r)=>I(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<w)throw Error("invalid exponent, negatives unsupported");if(r===w)return e.ONE;if(r===b)return t;let n=e.ONE,i=t;for(;r>w;)r&b&&(n=e.mul(n,i)),i=e.sqr(i),r>>=b;return n})(m,e,t),div:(t,r)=>I(t*x(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>x(t,e),sqrt:o||(t=>(!s&&(s=e%k===$?P:e%j===_?R:e%O===E?function(e){let t=N(e),r=T(e),n=r(t,t.neg(t.ONE)),i=r(t,n),s=r(t,t.neg(n)),a=(e+S)/O;return(e,t)=>{let r=e.pow(t,a),o=e.mul(r,n),c=e.mul(r,i),u=e.mul(r,s),l=e.eql(e.sqr(o),t),d=e.eql(e.sqr(c),t);r=e.cmov(r,o,l),o=e.cmov(u,c,d);let h=e.eql(e.sqr(o),t),p=e.cmov(r,o,h);return C(e,p,t),p}}(e):T(e)),s(m,t))),toBytes:e=>r?d(e,y):l(e,y),fromBytes:(t,n=!0)=>{var s;if(h){if(!h.includes(t.length)||t.length>y)throw Error("Field.fromBytes: expected "+h+" bytes, got "+t.length);let e=new Uint8Array(y);e.set(t,r?0:e.length-t.length),t=e}if(t.length!==y)throw Error("Field.fromBytes: expected "+y+" bytes, got "+t.length);let a=r?u(t):(s=t,c((0,i.ci)(s)));if(p&&(a=I(a,e)),!n&&!m.isValid(a))throw Error("invalid field element: outside of range 0..ORDER");return a},invertBatch:e=>U(m,e),cmov:(e,t,r)=>r?t:e});return Object.freeze(m)}let V=BigInt(0),K=BigInt(1);function z(e,t){let r=t.negate();return e?r:t}function W(e,t){let r=U(e.Fp,t.map(e=>e.Z));return t.map((t,n)=>e.fromAffine(t.toAffine(r[n])))}function F(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function G(e,t){F(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1),i=2**e;return{windows:r,windowSize:n,mask:g(e),maxNumber:i,shiftBy:BigInt(e)}}function q(e,t,r){let{windowSize:n,mask:i,maxNumber:s,shiftBy:a}=r,o=Number(e&i),c=e>>a;o>n&&(o-=s,c+=K);let u=t*n,l=u+Math.abs(o)-1;return{nextN:c,offset:l,isZero:0===o,isNeg:o<0,isNegF:t%2!=0,offsetF:u}}let L=new WeakMap,X=new WeakMap;function H(e){return X.get(e)||1}function J(e){if(e!==V)throw Error("invalid wNAF")}class Z{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,r=this.ZERO){let n=e;for(;t>V;)t&K&&(r=r.add(n)),n=n.double(),t>>=K;return r}precomputeWindow(e,t){let{windows:r,windowSize:n}=G(t,this.bits),i=[],s=e,a=s;for(let e=0;e<r;e++){a=s,i.push(a);for(let e=1;e<n;e++)a=a.add(s),i.push(a);s=a.double()}return i}wNAF(e,t,r){if(!this.Fn.isValid(r))throw Error("invalid scalar");let n=this.ZERO,i=this.BASE,s=G(e,this.bits);for(let e=0;e<s.windows;e++){let{nextN:a,offset:o,isZero:c,isNeg:u,isNegF:l,offsetF:d}=q(r,e,s);r=a,c?i=i.add(z(l,t[d])):n=n.add(z(u,t[o]))}return J(r),{p:n,f:i}}wNAFUnsafe(e,t,r,n=this.ZERO){let i=G(e,this.bits);for(let e=0;e<i.windows&&r!==V;e++){let{nextN:s,offset:a,isZero:o,isNeg:c}=q(r,e,i);if(r=s,!o){let e=t[a];n=n.add(c?e.negate():e)}}return J(r),n}getPrecomputes(e,t,r){let n=L.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&("function"==typeof r&&(n=r(n)),L.set(t,n))),n}cached(e,t,r){let n=H(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)}unsafe(e,t,r,n){let i=H(e);return 1===i?this._unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)}createCache(e,t){F(t,this.bits),X.set(e,t),L.delete(e)}hasCache(e){return 1!==H(e)}}function Y(e,t,r,n){!function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}(r,e),function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(n,t);let i=r.length,o=n.length;if(i!==o)throw Error("arrays of points and scalars must have equal length");let c=e.ZERO,u=function(e){let t;for(t=0;e>s;e>>=a,t+=1);return t}(BigInt(i)),l=1;u>12?l=u-3:u>4?l=u-2:u>0&&(l=2);let d=g(l),h=Array(Number(d)+1).fill(c),p=Math.floor((t.BITS-1)/l)*l,f=c;for(let e=p;e>=0;e-=l){h.fill(c);for(let t=0;t<o;t++){let i=Number(n[t]>>BigInt(e)&d);h[i]=h[i].add(r[t])}let t=c;for(let e=h.length-1,r=c;e>0;e--)r=r.add(h[e]),t=t.add(r);if(f=f.add(t),0!==e)for(let e=0;e<l;e++)f=f.double()}return f}function Q(e,t){if(!t)return N(e);if(t.ORDER!==e)throw Error("Field.ORDER must match order: Fp == p, Fn == n");return y(t,M.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"})),t}let ee=BigInt(0),et=BigInt(1),er=BigInt(2),en=BigInt(8);class ei{constructor(e){this.ep=e}static fromBytes(e){throw Error("fromBytes must be implemented by subclass")}static fromHex(e){throw Error("fromHex must be implemented by subclass")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}clearCofactor(){return this}assertValidity(){this.ep.assertValidity()}toAffine(e){return this.ep.toAffine(e)}toRawBytes(){return this.toBytes()}toHex(){return(0,i.ci)(this.toBytes())}toString(){return this.toHex()}isTorsionFree(){return!0}isSmallOrder(){return!1}add(e){return this.assertSame(e),this.init(this.ep.add(e.ep))}subtract(e){return this.assertSame(e),this.init(this.ep.subtract(e.ep))}multiply(e){return this.init(this.ep.multiply(e))}multiplyUnsafe(e){return this.init(this.ep.multiplyUnsafe(e))}double(){return this.init(this.ep.double())}negate(){return this.init(this.ep.negate())}precompute(e,t){return this.init(this.ep.precompute(e,t))}}function es(e){if(!Number.isSafeInteger(e))throw Error("number expected")}(0,i.iY)("HashToScalar-");let ea=BigInt(0),eo=BigInt(1),ec=BigInt(2);BigInt(3);let eu=BigInt(5),el=BigInt(8),ed={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:el,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")},eh=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function ep(e,t){let r=ed.p,n=I(t*t*t,r),i=function(e){let t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=ed.p,a=e*e%s*e%s,o=A(a,ec,s)*a%s,c=A(o,eo,s)*e%s,u=A(c,eu,s)*c%s,l=A(u,t,s)*u%s,d=A(l,r,s)*l%s,h=A(d,n,s)*d%s,p=A(h,i,s)*h%s,f=A(p,i,s)*h%s,g=A(f,t,s)*u%s;return{pow_p_5_8:A(g,ec,s)*e%s,b2:a}}(e*I(n*n*t,r)).pow_p_5_8,s=I(e*n*i,r),a=I(t*s*s,r),o=s,c=I(s*eh,r),u=a===e,l=a===I(-e,r),d=a===I(-e*eh,r);return u&&(s=o),(l||d)&&(s=c),D(s,r)&&(s=I(-s,r)),{isValid:u||l,value:s}}let ef=N(ed.p,{isLE:!0}),eg=N(ed.n,{isLE:!0}),ey=function(e){let{CURVE:t,curveOpts:r,hash:n,eddsaOpts:s}=function(e){let t={a:e.a,d:e.d,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r={Fp:e.Fp,Fn:N(t.n,e.nBitLength,!0),uvRatio:e.uvRatio},n={randomBytes:e.randomBytes,adjustScalarBytes:e.adjustScalarBytes,domain:e.domain,prehash:e.prehash,mapToCurve:e.mapToCurve};return{CURVE:t,curveOpts:r,hash:e.hash,eddsaOpts:n}}(e),a=function(e,t,r){if("function"!=typeof t)throw Error('"hash" function param is required');y(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:n}=r,{BASE:s,Fp:a,Fn:c}=e,l=c.ORDER,p=r.randomBytes||i.O6,g=r.adjustScalarBytes||(e=>e),m=r.domain||((e,t,r)=>{if(o("phflag",r),t.length||r)throw Error("Contexts/pre-hash are not supported");return e});function w(e){var t;return t=u(e),c.create(t)}function b(e){let{head:r,prefix:n,scalar:i}=function(e){let r=a.BYTES;e=h("private key",e,r);let n=h("hashed private key",t(e),2*r),i=g(n.slice(0,r)),s=n.slice(r,2*r),o=w(i);return{head:i,prefix:s,scalar:o}}(e),o=s.multiply(i),c=o.toBytes();return{head:r,prefix:n,scalar:i,point:o,pointBytes:c}}function v(e){return b(e).pointBytes}function $(e=Uint8Array.of(),...r){return w(t(m((0,i.eV)(...r),h("context",e),!!n)))}let k={zip215:!0};s.precompute(8);let _=a.BYTES,S={secret:_,public:_,signature:2*_,seed:_};function j(e=p(S.seed)){return e}let E={getExtendedPublicKey:b,randomSecretKey:j,isValidSecretKey:function(e){try{return!!c.fromBytes(e,!1)}catch(e){return!1}},isValidPublicKey:function(t,r){try{return!!e.fromBytes(t,r)}catch(e){return!1}},randomPrivateKey:j,toMontgomery(t){let{y:r}=e.fromBytes(t),n=32===_;if(!n&&57!==_)throw Error("only defined for 25519 and 448");let i=n?a.div(et+r,et-r):a.div(r-et,r+et);return a.toBytes(i)},toMontgomeryPriv:e=>((0,i.gk)(e,_),g(t(e.subarray(0,_))).subarray(0,_)),precompute:(t=8,r=e.BASE)=>r.precompute(t,!1)};return Object.freeze({keygen:function(e){let t=E.randomSecretKey(e);return{secretKey:t,publicKey:v(t)}},getPublicKey:v,sign:function(e,t,r={}){var o;e=h("message",e),n&&(e=n(e));let{prefix:u,scalar:p,pointBytes:g}=b(t),y=$(r.context,u,e),m=s.multiply(y).toBytes(),w=(o=y+$(r.context,m,g,e)*p,c.create(o));f("signature.s",w,ee,l);let v=a.BYTES;return h("result",(0,i.eV)(m,d(w,v)),2*v)},verify:function(t,r,i,c=k){let l,d,p;let{context:f,zip215:g}=c,y=a.BYTES;t=h("signature",t,2*y),r=h("message",r),i=h("publicKey",i,y),void 0!==g&&o("zip215",g),n&&(r=n(r));let m=u(t.slice(y,2*y));try{l=e.fromHex(i,g),d=e.fromHex(t.slice(0,y),g),p=s.multiplyUnsafe(m)}catch(e){return!1}if(!g&&l.isSmallOrder())return!1;let w=$(f,d.toBytes(),l.toBytes(),r);return d.add(l.multiplyUnsafe(w)).subtract(p).clearCofactor().is0()},utils:E,Point:e,info:{type:"edwards",lengths:S}})}(function(e,t={}){let{Fp:r,Fn:n}=function(e,t,r={}){if(!t||"object"!=typeof t)throw Error(`expected valid ${e} CURVE object`);for(let e of["p","n","h"]){let r=t[e];if(!("bigint"==typeof r&&r>V))throw Error(`CURVE.${e} must be positive bigint`)}let n=Q(t.p,r.Fp),i=Q(t.n,r.Fn);for(let r of["Gx","Gy","a","weierstrass"===e?"b":"d"])if(!n.isValid(t[r]))throw Error(`CURVE.${r} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:i}}("edwards",e,t),{h:s,n:a}=e;y(t,{},{uvRatio:"function"});let c=er<<BigInt(8*n.BYTES)-et,l=e=>r.create(e),p=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(r.div(e,t))}}catch(e){return{isValid:!1,value:ee}}});if(!function(e,t,r,n){let i=e.sqr(r),s=e.sqr(n),a=e.add(e.mul(t.a,i),s),o=e.add(e.ONE,e.mul(t.d,e.mul(i,s)));return e.eql(a,o)}(r,e,e.Gx,e.Gy))throw Error("bad curve params: generator point");function g(e,t,r=!1){return f("coordinate "+e,t,r?et:ee,c),t}function w(e){if(!(e instanceof $))throw Error("ExtendedPoint expected")}let b=m((e,t)=>{let{X:n,Y:i,Z:s}=e,a=e.is0();null==t&&(t=a?en:r.inv(s));let o=l(n*t),c=l(i*t),u=r.mul(s,t);if(a)return{x:ee,y:et};if(u!==et)throw Error("invZ was invalid");return{x:o,y:c}}),v=m(t=>{let{a:r,d:n}=e;if(t.is0())throw Error("bad point: ZERO");let{X:i,Y:s,Z:a,T:o}=t,c=l(i*i),u=l(s*s),d=l(a*a),h=l(d*d),p=l(c*r);if(l(d*l(p+u))!==l(h+l(n*l(c*u))))throw Error("bad point: equation left != right (1)");if(l(i*s)!==l(a*o))throw Error("bad point: equation left != right (2)");return!0});class ${constructor(e,t,r,n){this.X=g("x",e),this.Y=g("y",t),this.Z=g("z",r,!0),this.T=g("t",n),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(e){return W($,e)}static msm(e,t){return Y($,n,e,t)}_setWindowSize(e){this.precompute(e)}static fromAffine(e){if(e instanceof $)throw Error("extended point not allowed");let{x:t,y:r}=e||{};return g("x",t),g("y",r),new $(t,r,et,l(t*r))}precompute(e=8,t=!0){return k.createCache(this,e),t||this.multiply(er),this}assertValidity(){v(this)}equals(e){w(e);let{X:t,Y:r,Z:n}=this,{X:i,Y:s,Z:a}=e,o=l(t*a),c=l(i*n),u=l(r*a),d=l(s*n);return o===c&&u===d}is0(){return this.equals($.ZERO)}negate(){return new $(l(-this.X),this.Y,this.Z,l(-this.T))}double(){let{a:t}=e,{X:r,Y:n,Z:i}=this,s=l(r*r),a=l(n*n),o=l(er*l(i*i)),c=l(t*s),u=r+n,d=l(l(u*u)-s-a),h=c+a,p=h-o,f=c-a,g=l(d*p),y=l(h*f),m=l(d*f);return new $(g,y,l(p*h),m)}add(t){w(t);let{a:r,d:n}=e,{X:i,Y:s,Z:a,T:o}=this,{X:c,Y:u,Z:d,T:h}=t,p=l(i*c),f=l(s*u),g=l(o*n*h),y=l(a*d),m=l((i+s)*(c+u)-p-f),b=y-g,v=y+g,k=l(f-r*p),_=l(m*b),S=l(v*k),j=l(m*k);return new $(_,S,l(b*v),j)}subtract(e){return this.add(e.negate())}multiply(e){f("scalar",e,et,a);let{p:t,f:r}=k.cached(this,e,e=>W($,e));return W($,[t,r])[0]}multiplyUnsafe(e,t=$.ZERO){return(f("scalar",e,ee,a),e===ee)?$.ZERO:this.is0()||e===et?this:k.unsafe(this,e,e=>W($,e),t)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return k.unsafe(this,a).is0()}toAffine(e){return b(this,e)}clearCofactor(){return s===et?this:this.multiplyUnsafe(s)}static fromBytes(e,t=!1){return(0,i.gk)(e),$.fromHex(e,t)}static fromHex(t,n=!1){let{d:i,a:s}=e,a=r.BYTES;t=h("pointHex",t,a),o("zip215",n);let d=t.slice(),g=t[a-1];d[a-1]=-129&g;let y=u(d);f("pointHex.y",y,ee,n?c:r.ORDER);let m=l(y*y),{isValid:w,value:b}=p(l(m-et),l(i*m-s));if(!w)throw Error("Point.fromHex: invalid y coordinate");let v=(b&et)===et,k=(128&g)!=0;if(!n&&b===ee&&k)throw Error("Point.fromHex: x=0 and x_0=1");return k!==v&&(b=l(-b)),$.fromAffine({x:b,y})}toBytes(){let{x:e,y:t}=this.toAffine(),n=d(t,r.BYTES);return n[n.length-1]|=e&et?128:0,n}toRawBytes(){return this.toBytes()}toHex(){return(0,i.ci)(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}$.BASE=new $(e.Gx,e.Gy,et,l(e.Gx*e.Gy)),$.ZERO=new $(ee,et,et,ee),$.Fp=r,$.Fn=n;let k=new Z($,8*n.BYTES);return $}(t,r),n,s);return Object.assign({},a,{ExtendedPoint:a.Point,CURVE:e})}({...ed,Fp:ef,hash:n.o,adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},uvRatio:ep}),em=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),ew=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),eb=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),ev=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),e$=e=>ep(eo,e),ek=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),e_=e=>ey.CURVE.Fp.create(u(e)&ek);function eS(e){let{d:t}=ey.CURVE,r=ey.CURVE.Fp.ORDER,n=ey.CURVE.Fp.create,i=n(eh*e*e),s=n((i+eo)*eb),a=BigInt(-1),o=n((a-t*i)*n(i+t)),{isValid:c,value:u}=ep(s,o),l=n(u*e);D(l,r)||(l=n(-l)),c||(u=l),c||(a=i);let d=n(a*(i-eo)*ev-o),h=u*u,p=n((u+u)*o),f=n(d*em),g=n(eo-h),y=n(eo+h);return new ey.Point(n(p*y),n(g*f),n(f*y),n(p*g))}class ej extends ei{constructor(e){super(e)}static fromAffine(e){return new ej(ey.Point.fromAffine(e))}assertSame(e){if(!(e instanceof ej))throw Error("RistrettoPoint expected")}init(e){return new ej(e)}static hashToCurve(e){return function(e){(0,i.gk)(e,64);let t=eS(e_(e.subarray(0,32))),r=eS(e_(e.subarray(32,64)));return new ej(t.add(r))}(h("ristrettoHash",e,64))}static fromBytes(e){(0,i.gk)(e,32);let{a:t,d:r}=ey.CURVE,n=ef.ORDER,s=ef.create,a=e_(e);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}(d(a,32),e)||D(a,n))throw Error("invalid ristretto255 encoding 1");let o=s(a*a),c=s(eo+t*o),u=s(eo-t*o),l=s(c*c),h=s(u*u),p=s(t*r*l-h),{isValid:f,value:g}=e$(s(p*h)),y=s(g*u),m=s(g*y*p),w=s((a+a)*y);D(w,n)&&(w=s(-w));let b=s(c*m),v=s(w*b);if(!f||D(v,n)||b===ea)throw Error("invalid ristretto255 encoding 2");return new ej(new ey.Point(w,b,eo,v))}static fromHex(e){return ej.fromBytes(h("ristrettoHex",e,32))}static msm(e,t){return Y(ej,ey.Point.Fn,e,t)}toBytes(){let e,{X:t,Y:r,Z:n,T:i}=this.ep,s=ef.ORDER,a=ef.create,o=a(a(n+r)*a(n-r)),c=a(t*r),u=a(c*c),{value:l}=e$(a(o*u)),h=a(l*o),p=a(l*c),f=a(h*p*i);if(D(i*f,s)){let n=a(r*eh),i=a(t*eh);t=n,r=i,e=a(h*ew)}else e=p;D(t*f,s)&&(r=a(-r));let g=a((n-r)*e);return D(g,s)&&(g=a(-g)),d(g,32)}equals(e){this.assertSame(e);let{X:t,Y:r}=this.ep,{X:n,Y:i}=e.ep,s=ef.create,a=s(t*i)===s(r*n),o=s(r*i)===s(t*n);return a||o}is0(){return this.equals(ej.ZERO)}}ej.BASE=new ej(ey.Point.BASE),ej.ZERO=new ej(ey.Point.ZERO),ej.Fp=ef,ej.Fn=eg},2783:function(e,t,r){r.d(t,{L:function(){return s},z:function(){return i}});var n=r(44501);let i=e=>n.Jq.encode(e),s=e=>n.Jq.decode(e)},97655:function(e,t,r){function n(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}function i(e){if(e.length<8192)return btoa(String.fromCharCode(...e));let t="";for(var r=0;r<e.length;r+=8192)t+=String.fromCharCode(...e.slice(r,r+8192));return btoa(t)}r.d(t,{G:function(){return n},s:function(){return i}})},73899:function(e,t,r){function n(e){let t=e.startsWith("0x")?e.slice(2):e,r=t.length%2==0?t:`0${t}`,n=r.match(/[0-9a-fA-F]{2}/g)?.map(e=>parseInt(e,16))??[];if(n.length!==r.length/2)throw Error(`Invalid hex string ${e}`);return Uint8Array.from(n)}function i(e){return e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}r.d(t,{H:function(){return n},N:function(){return i}})},97469:function(e,t,r){r.d(t,{VR:function(){return a},bc:function(){return i},iY:function(){return u},l3:function(){return s},pw:function(){return l},r$:function(){return o},u$:function(){return c}});var n=r(19661);function i(e,t,r){return e&t^~e&r}function s(e,t,r){return e&t^e&r^t&r}class a extends n.kb{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=(0,n.GL)(this.buffer)}update(e){(0,n.$h)(this),e=(0,n.O0)(e),(0,n.gk)(e);let{view:t,buffer:r,blockLen:i}=this,s=e.length;for(let a=0;a<s;){let o=Math.min(i-this.pos,s-a);if(o===i){let t=(0,n.GL)(e);for(;i<=s-a;a+=i)this.process(t,a);continue}r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.$h)(this),(0,n.eB)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:s}=this,{pos:a}=this;t[a++]=128,(0,n.ru)(this.buffer.subarray(a)),this.padOffset>i-a&&(this.process(r,0),a=0);for(let e=a;e<i;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),s=BigInt(4294967295),a=Number(r>>i&s),o=Number(r&s),c=n?4:0,u=n?0:4;e.setUint32(t+c,a,n),e.setUint32(t+u,o,n)}(r,i-8,BigInt(8*this.length),s),this.process(r,0);let o=(0,n.GL)(e),c=this.outputLen;if(c%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,l=this.get();if(u>l.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)o.setUint32(4*e,l[e],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:a}=this;return e.destroyed=s,e.finished=i,e.length=n,e.pos=a,n%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}let o=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),u=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),l=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209])},80538:function(e,t,r){r.d(t,{$m:function(){return p},$p:function(){return h},EP:function(){return g},Ev:function(){return s},FL:function(){return d},Fn:function(){return $},IH:function(){return b},Iq:function(){return c},NI:function(){return o},Ou:function(){return l},SD:function(){return m},Vl:function(){return a},Xb:function(){return k},ac:function(){return v},gm:function(){return y},j:function(){return f},m_:function(){return u},mk:function(){return w},pp:function(){return j},u8:function(){return _},zP:function(){return S}});let n=BigInt(4294967296-1),i=BigInt(32);function s(e,t=!1){return t?{h:Number(e&n),l:Number(e>>i&n)}:{h:0|Number(e>>i&n),l:0|Number(e&n)}}function a(e,t=!1){let r=e.length,n=new Uint32Array(r),i=new Uint32Array(r);for(let a=0;a<r;a++){let{h:r,l:o}=s(e[a],t);[n[a],i[a]]=[r,o]}return[n,i]}let o=(e,t,r)=>e>>>r,c=(e,t,r)=>e<<32-r|t>>>r,u=(e,t,r)=>e>>>r|t<<32-r,l=(e,t,r)=>e<<32-r|t>>>r,d=(e,t,r)=>e<<64-r|t>>>r-32,h=(e,t,r)=>e>>>r-32|t<<64-r,p=(e,t)=>t,f=(e,t)=>e,g=(e,t,r)=>e<<r|t>>>32-r,y=(e,t,r)=>t<<r|e>>>32-r,m=(e,t,r)=>t<<r-32|e>>>64-r,w=(e,t,r)=>e<<r-32|t>>>64-r;function b(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/4294967296|0)|0,l:0|i}}let v=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),$=(e,t,r,n)=>t+r+n+(e/4294967296|0)|0,k=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),_=(e,t,r,n,i)=>t+r+n+i+(e/4294967296|0)|0,S=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),j=(e,t,r,n,i,s)=>t+r+n+i+s+(e/4294967296|0)|0},55184:function(e,t,r){r.d(t,{R:function(){return f}});var n=r(19661);let i=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]);var s=r(97469),a=r(80538);let o=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),c=new Uint32Array(32);function u(e,t,r,n,i,s){let o=i[s],u=i[s+1],l=c[2*e],d=c[2*e+1],h=c[2*t],p=c[2*t+1],f=c[2*r],g=c[2*r+1],y=c[2*n],m=c[2*n+1],w=a.ac(l,h,o);d=a.Fn(w,d,p,u),l=0|w,({Dh:m,Dl:y}={Dh:m^d,Dl:y^l}),({Dh:m,Dl:y}={Dh:a.$m(m,y),Dl:a.j(m,y)}),({h:g,l:f}=a.IH(g,f,m,y)),({Bh:p,Bl:h}={Bh:p^g,Bl:h^f}),({Bh:p,Bl:h}={Bh:a.m_(p,h,24),Bl:a.Ou(p,h,24)}),c[2*e]=l,c[2*e+1]=d,c[2*t]=h,c[2*t+1]=p,c[2*r]=f,c[2*r+1]=g,c[2*n]=y,c[2*n+1]=m}function l(e,t,r,n,i,s){let o=i[s],u=i[s+1],l=c[2*e],d=c[2*e+1],h=c[2*t],p=c[2*t+1],f=c[2*r],g=c[2*r+1],y=c[2*n],m=c[2*n+1],w=a.ac(l,h,o);d=a.Fn(w,d,p,u),l=0|w,({Dh:m,Dl:y}={Dh:m^d,Dl:y^l}),({Dh:m,Dl:y}={Dh:a.m_(m,y,16),Dl:a.Ou(m,y,16)}),({h:g,l:f}=a.IH(g,f,m,y)),({Bh:p,Bl:h}={Bh:p^g,Bl:h^f}),({Bh:p,Bl:h}={Bh:a.FL(p,h,63),Bl:a.$p(p,h,63)}),c[2*e]=l,c[2*e+1]=d,c[2*t]=h,c[2*t+1]=p,c[2*r]=f,c[2*r+1]=g,c[2*n]=y,c[2*n+1]=m}class d extends n.kb{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,(0,n.k8)(e),(0,n.k8)(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=(0,n.Jq)(this.buffer)}update(e){(0,n.$h)(this),e=(0,n.O0)(e),(0,n.gk)(e);let{blockLen:t,buffer:r,buffer32:i}=this,s=e.length,a=e.byteOffset,o=e.buffer;for(let c=0;c<s;){this.pos===t&&((0,n.Ux)(i),this.compress(i,0,!1),(0,n.Ux)(i),this.pos=0);let u=Math.min(t-this.pos,s-c),l=a+c;if(u===t&&!(l%4)&&c+u<s){let e=new Uint32Array(o,l,Math.floor((s-c)/4));(0,n.Ux)(e);for(let r=0;c+t<s;r+=i.length,c+=t)this.length+=t,this.compress(e,r,!1);(0,n.Ux)(e);continue}r.set(e.subarray(c,c+u),this.pos),this.pos+=u,this.length+=u,c+=u}return this}digestInto(e){(0,n.$h)(this),(0,n.eB)(e,this);let{pos:t,buffer32:r}=this;this.finished=!0,(0,n.ru)(this.buffer.subarray(t)),(0,n.Ux)(r),this.compress(r,0,!0),(0,n.Ux)(r);let i=(0,n.Jq)(e);this.get().forEach((e,t)=>i[t]=(0,n.N$)(e))}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){let{buffer:t,length:r,finished:n,destroyed:i,outputLen:s,pos:a}=this;return e||(e=new this.constructor({dkLen:s})),e.set(...this.get()),e.buffer.set(t),e.destroyed=i,e.finished=n,e.length=r,e.pos=a,e.outputLen=s,e}clone(){return this._cloneInto()}}class h extends d{constructor(e={}){let t=void 0===e.dkLen?64:e.dkLen;super(128,t),this.v0l=0|o[0],this.v0h=0|o[1],this.v1l=0|o[2],this.v1h=0|o[3],this.v2l=0|o[4],this.v2h=0|o[5],this.v3l=0|o[6],this.v3h=0|o[7],this.v4l=0|o[8],this.v4h=0|o[9],this.v5l=0|o[10],this.v5h=0|o[11],this.v6l=0|o[12],this.v6h=0|o[13],this.v7l=0|o[14],this.v7h=0|o[15],function(e,t={},r,i,s){if((0,n.k8)(64),e<0||e>64)throw Error("outputLen bigger than keyLen");let{key:a,salt:o,personalization:c}=t;if(void 0!==a&&(a.length<1||a.length>r))throw Error("key length must be undefined or 1.."+r);if(void 0!==o&&16!==o.length)throw Error("salt must be undefined or 16");if(void 0!==c&&16!==c.length)throw Error("personalization must be undefined or 16")}(t,e,64,16,16);let{key:r,personalization:i,salt:s}=e,a=0;if(void 0!==r&&(a=(r=(0,n.O0)(r)).length),this.v0l^=this.outputLen|a<<8|16842752,void 0!==s){s=(0,n.O0)(s);let e=(0,n.Jq)(s);this.v4l^=(0,n.N$)(e[0]),this.v4h^=(0,n.N$)(e[1]),this.v5l^=(0,n.N$)(e[2]),this.v5h^=(0,n.N$)(e[3])}if(void 0!==i){i=(0,n.O0)(i);let e=(0,n.Jq)(i);this.v6l^=(0,n.N$)(e[0]),this.v6h^=(0,n.N$)(e[1]),this.v7l^=(0,n.N$)(e[2]),this.v7h^=(0,n.N$)(e[3])}if(void 0!==r){let e=new Uint8Array(this.blockLen);e.set(r),this.update(e)}}get(){let{v0l:e,v0h:t,v1l:r,v1h:n,v2l:i,v2h:s,v3l:a,v3h:o,v4l:c,v4h:u,v5l:l,v5h:d,v6l:h,v6h:p,v7l:f,v7h:g}=this;return[e,t,r,n,i,s,a,o,c,u,l,d,h,p,f,g]}set(e,t,r,n,i,s,a,o,c,u,l,d,h,p,f,g){this.v0l=0|e,this.v0h=0|t,this.v1l=0|r,this.v1h=0|n,this.v2l=0|i,this.v2h=0|s,this.v3l=0|a,this.v3h=0|o,this.v4l=0|c,this.v4h=0|u,this.v5l=0|l,this.v5h=0|d,this.v6l=0|h,this.v6h=0|p,this.v7l=0|f,this.v7h=0|g}compress(e,t,r){this.get().forEach((e,t)=>c[t]=e),c.set(o,16);let{h:s,l:d}=a.Ev(BigInt(this.length));c[24]=o[8]^d,c[25]=o[9]^s,r&&(c[28]=~c[28],c[29]=~c[29]);let h=0;for(let r=0;r<12;r++)u(0,4,8,12,e,t+2*i[h++]),l(0,4,8,12,e,t+2*i[h++]),u(1,5,9,13,e,t+2*i[h++]),l(1,5,9,13,e,t+2*i[h++]),u(2,6,10,14,e,t+2*i[h++]),l(2,6,10,14,e,t+2*i[h++]),u(3,7,11,15,e,t+2*i[h++]),l(3,7,11,15,e,t+2*i[h++]),u(0,5,10,15,e,t+2*i[h++]),l(0,5,10,15,e,t+2*i[h++]),u(1,6,11,12,e,t+2*i[h++]),l(1,6,11,12,e,t+2*i[h++]),u(2,7,8,13,e,t+2*i[h++]),l(2,7,8,13,e,t+2*i[h++]),u(3,4,9,14,e,t+2*i[h++]),l(3,4,9,14,e,t+2*i[h++]);this.v0l^=c[0]^c[16],this.v0h^=c[1]^c[17],this.v1l^=c[2]^c[18],this.v1h^=c[3]^c[19],this.v2l^=c[4]^c[20],this.v2h^=c[5]^c[21],this.v3l^=c[6]^c[22],this.v3h^=c[7]^c[23],this.v4l^=c[8]^c[24],this.v4h^=c[9]^c[25],this.v5l^=c[10]^c[26],this.v5h^=c[11]^c[27],this.v6l^=c[12]^c[28],this.v6h^=c[13]^c[29],this.v7l^=c[14]^c[30],this.v7h^=c[15]^c[31],(0,n.ru)(c)}destroy(){this.destroyed=!0,(0,n.ru)(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let p=(0,n.WV)(e=>new h(e)),f=(s.r$,p)},41870:function(e,t,r){r.d(t,{o:function(){return h}});var n=r(97469),i=r(80538),s=r(19661);n.VR;let a=i.Vl(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),o=a[0],c=a[1],u=new Uint32Array(80),l=new Uint32Array(80);class d extends n.VR{constructor(e=64){super(128,e,16,!1),this.Ah=0|n.pw[0],this.Al=0|n.pw[1],this.Bh=0|n.pw[2],this.Bl=0|n.pw[3],this.Ch=0|n.pw[4],this.Cl=0|n.pw[5],this.Dh=0|n.pw[6],this.Dl=0|n.pw[7],this.Eh=0|n.pw[8],this.El=0|n.pw[9],this.Fh=0|n.pw[10],this.Fl=0|n.pw[11],this.Gh=0|n.pw[12],this.Gl=0|n.pw[13],this.Hh=0|n.pw[14],this.Hl=0|n.pw[15]}get(){let{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:a,Dl:o,Eh:c,El:u,Fh:l,Fl:d,Gh:h,Gl:p,Hh:f,Hl:g}=this;return[e,t,r,n,i,s,a,o,c,u,l,d,h,p,f,g]}set(e,t,r,n,i,s,a,o,c,u,l,d,h,p,f,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|a,this.Dl=0|o,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|d,this.Gh=0|h,this.Gl=0|p,this.Hh=0|f,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)u[r]=e.getUint32(t),l[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|u[e-15],r=0|l[e-15],n=i.m_(t,r,1)^i.m_(t,r,8)^i.NI(t,r,7),s=i.Ou(t,r,1)^i.Ou(t,r,8)^i.Iq(t,r,7),a=0|u[e-2],o=0|l[e-2],c=i.m_(a,o,19)^i.FL(a,o,61)^i.NI(a,o,6),d=i.Ou(a,o,19)^i.$p(a,o,61)^i.Iq(a,o,6),h=i.Xb(s,d,l[e-7],l[e-16]),p=i.u8(h,n,c,u[e-7],u[e-16]);u[e]=0|p,l[e]=0|h}let{Ah:r,Al:n,Bh:s,Bl:a,Ch:d,Cl:h,Dh:p,Dl:f,Eh:g,El:y,Fh:m,Fl:w,Gh:b,Gl:v,Hh:$,Hl:k}=this;for(let e=0;e<80;e++){let t=i.m_(g,y,14)^i.m_(g,y,18)^i.FL(g,y,41),_=i.Ou(g,y,14)^i.Ou(g,y,18)^i.$p(g,y,41),S=g&m^~g&b,j=y&w^~y&v,E=i.zP(k,_,j,c[e],l[e]),O=i.pp(E,$,t,S,o[e],u[e]),I=0|E,A=i.m_(r,n,28)^i.FL(r,n,34)^i.FL(r,n,39),x=i.Ou(r,n,28)^i.$p(r,n,34)^i.$p(r,n,39),C=r&s^r&d^s&d,P=n&a^n&h^a&h;$=0|b,k=0|v,b=0|m,v=0|w,m=0|g,w=0|y,({h:g,l:y}=i.IH(0|p,0|f,0|O,0|I)),p=0|d,f=0|h,d=0|s,h=0|a,s=0|r,a=0|n;let R=i.ac(I,x,P);r=i.Fn(R,O,A,C),n=0|R}({h:r,l:n}=i.IH(0|this.Ah,0|this.Al,0|r,0|n)),({h:s,l:a}=i.IH(0|this.Bh,0|this.Bl,0|s,0|a)),({h:d,l:h}=i.IH(0|this.Ch,0|this.Cl,0|d,0|h)),({h:p,l:f}=i.IH(0|this.Dh,0|this.Dl,0|p,0|f)),({h:g,l:y}=i.IH(0|this.Eh,0|this.El,0|g,0|y)),({h:m,l:w}=i.IH(0|this.Fh,0|this.Fl,0|m,0|w)),({h:b,l:v}=i.IH(0|this.Gh,0|this.Gl,0|b,0|v)),({h:$,l:k}=i.IH(0|this.Hh,0|this.Hl,0|$,0|k)),this.set(r,n,s,a,d,h,p,f,g,y,m,w,b,v,$,k)}roundClean(){(0,s.ru)(u,l)}destroy(){(0,s.ru)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let h=(0,s.V1)(()=>new d)},68651:function(e,t,r){r.d(t,{fr:function(){return v}});var n=r(80538),i=r(19661);let s=BigInt(0),a=BigInt(1),o=BigInt(2),c=BigInt(7),u=BigInt(256),l=BigInt(113),d=[],h=[],p=[];for(let e=0,t=a,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],d.push(2*(5*n+r)),h.push((e+1)*(e+2)/2%64);let i=s;for(let e=0;e<7;e++)(t=(t<<a^(t>>c)*l)%u)&o&&(i^=a<<(a<<BigInt(e))-a);p.push(i)}let f=(0,n.Vl)(p,!0),g=f[0],y=f[1],m=(e,t,r)=>r>32?(0,n.SD)(e,t,r):(0,n.EP)(e,t,r),w=(e,t,r)=>r>32?(0,n.mk)(e,t,r):(0,n.gm)(e,t,r);class b extends i.kb{constructor(e,t,r,n=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=s,(0,i.k8)(r),!(0<e&&e<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,i.Jq)(this.state)}clone(){return this._cloneInto()}keccak(){(0,i.Ux)(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,i=(t+2)%10,s=r[i],a=r[i+1],o=m(s,a,1)^r[n],c=w(s,a,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=o,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){let n=h[r],s=m(t,i,n),a=w(t,i,n),o=d[r];t=e[o],i=e[o+1],e[o]=s,e[o+1]=a}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=g[n],e[1]^=y[n]}(0,i.ru)(r)}(this.state32,this.rounds),(0,i.Ux)(this.state32),this.posOut=0,this.pos=0}update(e){(0,i.$h)(this),e=(0,i.O0)(e),(0,i.gk)(e);let{blockLen:t,state:r}=this,n=e.length;for(let i=0;i<n;){let s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,i.$h)(this,!1),(0,i.gk)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,i.k8)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,i.eB)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,i.ru)(this.state)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new b(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}let v=(0,i.V1)(()=>new b(136,1,32))},19661:function(e,t,r){r.d(t,{kb:function(){return A},gk:function(){return a},$h:function(){return c},z3:function(){return o},k8:function(){return s},eB:function(){return u},ci:function(){return v},U5:function(){return I},ru:function(){return d},eV:function(){return O},V1:function(){return x},WV:function(){return C},GL:function(){return h},nr:function(){return _},_t:function(){return i},A0:function(){return E},O6:function(){return P},np:function(){return p},Ux:function(){return m},N$:function(){return y},O0:function(){return j},Jq:function(){return l},iY:function(){return S}});let n="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function i(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function a(e,...t){if(!i(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.createHasher");s(e.outputLen),s(e.blockLen)}function c(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function u(e,t){a(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}function l(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function d(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function h(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function p(e,t){return e<<32-t|e>>>t}let f=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function g(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}let y=f?e=>e:e=>g(e),m=f?e=>e:function(e){for(let t=0;t<e.length;t++)e[t]=g(e[t]);return e},w="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,b=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function v(e){if(a(e),w)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=b[e[r]];return t}let $={_0:48,_9:57,A:65,F:70,a:97,f:102};function k(e){return e>=$._0&&e<=$._9?e-$._0:e>=$.A&&e<=$.F?e-($.A-10):e>=$.a&&e<=$.f?e-($.a-10):void 0}function _(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(w)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=k(e.charCodeAt(i)),s=k(e.charCodeAt(i+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+s}return n}function S(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function j(e){return"string"==typeof e&&(e=S(e)),a(e),e}function E(e){return"string"==typeof e&&(e=S(e)),a(e),e}function O(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];a(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}function I(e,t){if(void 0!==t&&"[object Object]"!==({}).toString.call(t))throw Error("options should be object or undefined");return Object.assign(e,t)}class A{}function x(e){let t=t=>e().update(j(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function C(e){let t=(t,r)=>e(r).update(j(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}function P(e=32){if(n&&"function"==typeof n.getRandomValues)return n.getRandomValues(new Uint8Array(e));if(n&&"function"==typeof n.randomBytes)return Uint8Array.from(n.randomBytes(e));throw Error("crypto.getRandomValues must be defined")}},44501:function(e,t,r){var n;function i(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function a(e){if("function"!=typeof e)throw Error("function expected");return!0}function o(e,t){if("string"!=typeof t)throw Error(`${e}: string expected`);return!0}function c(e){if(!Number.isSafeInteger(e))throw Error(`invalid integer: ${e}`)}function u(e){if(!Array.isArray(e))throw Error("array expected")}function l(e,t){if(!s(!0,t))throw Error(`${e}: array of strings expected`)}function d(e,t){if(!s(!1,t))throw Error(`${e}: array of numbers expected`)}function h(...e){let t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map(e=>e.encode).reduceRight(r,t),decode:e.map(e=>e.decode).reduce(r,t)}}function p(e){let t="string"==typeof e?e.split(""):e,r=t.length;l("alphabet",t);let n=new Map(t.map((e,t)=>[e,t]));return{encode:n=>(u(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${e}`);return t[n]})),decode:t=>(u(t),t.map(t=>{o("alphabet.decode",t);let r=n.get(t);if(void 0===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}function f(e=""){return o("join",e),{encode:t=>(l("join.decode",t),t.join(e)),decode:t=>(o("join.decode",t),t.split(e))}}function g(e,t,r){if(t<2)throw Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(r<2)throw Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(u(e),!e.length)return[];let n=0,i=[],s=Array.from(e,e=>{if(c(e),e<0||e>=t)throw Error(`invalid integer: ${e}`);return e}),a=s.length;for(;;){let e=0,o=!0;for(let i=n;i<a;i++){let a=s[i],c=t*e,u=c+a;if(!Number.isSafeInteger(u)||c/t!==e||u-a!==c)throw Error("convertRadix: carry overflow");let l=u/r;e=u%r;let d=Math.floor(l);if(s[i]=d,!Number.isSafeInteger(d)||d*r+e!==u)throw Error("convertRadix: carry overflow");o&&(d?o=!1:n=i)}if(i.push(e),o)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}r.d(t,{Jq:function(){return $},gW:function(){return E}});let y=(e,t)=>0===t?e:y(t,e%t),m=(e,t)=>e+(t-y(e,t)),w=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function b(e,t,r,n){if(u(e),t<=0||t>32)throw Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw Error(`convertRadix2: wrong to=${r}`);if(m(t,r)>32)throw Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${m(t,r)}`);let i=0,s=0,a=w[t],o=w[r]-1,l=[];for(let n of e){if(c(n),n>=a)throw Error(`convertRadix2: invalid data word=${n} from=${t}`);if(i=i<<t|n,s+t>32)throw Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=r;s-=r)l.push((i>>s-r&o)>>>0);let e=w[s];if(void 0===e)throw Error("invalid carry");i&=e-1}if(i=i<<r-s&o,!n&&s>=t)throw Error("Excess padding");if(!n&&i>0)throw Error(`Non-zero padding: ${i}`);return n&&s>0&&l.push(i>>>0),l}function v(e){return a(e),function(...t){try{return e.apply(null,t)}catch(e){}}}"function"==typeof Uint8Array.from([]).toBase64&&Uint8Array.fromBase64;let $=(n="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",h((c(58),{encode:e=>{if(!i(e))throw Error("radix.encode input should be Uint8Array");return g(Array.from(e),256,58)},decode:e=>(d("radix.decode",e),Uint8Array.from(g(e,58,256)))}),p(n),f(""))),k=h(p("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),f("")),_=[996825010,642813549,513874426,1027748829,705979059];function S(e){let t=e>>25,r=(33554431&e)<<5;for(let e=0;e<_.length;e++)(t>>e&1)==1&&(r^=_[e]);return r}function j(e,t,r=1){let n=e.length,i=1;for(let t=0;t<n;t++){let r=e.charCodeAt(t);if(r<33||r>126)throw Error(`Invalid prefix (${e})`);i=S(i)^r>>5}i=S(i);for(let t=0;t<n;t++)i=S(i)^31&e.charCodeAt(t);for(let e of t)i=S(i)^e;for(let e=0;e<6;e++)i=S(i);return i^=r,k.encode(b([i%w[30]],30,5,!1))}let E=function(e){let t="bech32"===e?1:734539939,r=function(e,t=!1){if(c(5),e>32)throw Error("radix2: bits should be in (0..32]");if(m(8,e)>32||m(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!i(r))throw Error("radix2.encode input should be Uint8Array");return b(Array.from(r),8,e,!t)},decode:r=>(d("radix2.decode",r),Uint8Array.from(b(r,e,8,t)))}}(5),n=r.decode,s=r.encode,a=v(n);function u(e,r,n=90){o("bech32.encode prefix",e),i(r)&&(r=Array.from(r)),d("bech32.encode",r);let s=e.length;if(0===s)throw TypeError(`Invalid prefix length ${s}`);let a=s+7+r.length;if(!1!==n&&a>n)throw TypeError(`Length ${a} exceeds limit ${n}`);let c=e.toLowerCase(),u=j(c,r,t);return`${c}1${k.encode(r)}${u}`}function l(e,r=90){o("bech32.decode input",e);let n=e.length;if(n<8||!1!==r&&n>r)throw TypeError(`invalid string length: ${n} (${e}). Expected (8..${r})`);let i=e.toLowerCase();if(e!==i&&e!==e.toUpperCase())throw Error("String must be lowercase or uppercase");let s=i.lastIndexOf("1");if(0===s||-1===s)throw Error('Letter "1" must be present between prefix and data only');let a=i.slice(0,s),c=i.slice(s+1);if(c.length<6)throw Error("Data must be at least 6 characters long");let u=k.decode(c).slice(0,-6),l=j(a,u,t);if(!c.endsWith(l))throw Error(`Invalid checksum in ${e}: expected "${l}"`);return{prefix:a,words:u}}let h=v(l);return{encode:u,decode:l,encodeFromBytes:function(e,t){return u(e,s(t))},decodeToBytes:function(e){let{prefix:t,words:r}=l(e,!1);return{prefix:t,words:r,bytes:n(r)}},decodeUnsafe:h,fromWords:n,fromWordsUnsafe:a,toWords:s}}("bech32");"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex||a(e=>{if("string"!=typeof e||e.length%2!=0)throw TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})},94943:function(e,t,r){r.d(t,{W:function(){return i}});var n=class e{#e;#t;constructor({prefix:e,cache:t}={}){this.#e=e??[],this.#t=t??new Map}read(e,t){let r=[this.#e,...e].join(":");if(this.#t.has(r))return this.#t.get(r);let n=t();return(this.#t.set(r,n),"object"==typeof n&&null!==n&&"then"in n)?Promise.resolve(n).then(e=>(this.#t.set(r,e),e)).catch(e=>{throw this.#t.delete(r),e}):n}readSync(e,t){let r=[this.#e,...e].join(":");if(this.#t.has(r))return this.#t.get(r);let n=t();return this.#t.set(r,n),n}clear(e){let t=[...this.#e,...e??[]].join(":");if(!t){this.#t.clear();return}for(let e of this.#t.keys())e.startsWith(t)&&this.#t.delete(e)}scope(t){return new e({prefix:[...this.#e,...Array.isArray(t)?t:[t]],cache:this.#t})}},i=class{constructor({network:e,base:t,cache:r=t?.cache??new n}){this.network=e,this.base=t??this,this.cache=r}$extend(...e){let t=Object.fromEntries(e.map(e=>[e.name,e.register(this)])),r=new Map;return new Proxy(this,{get(e,n,i){if("string"==typeof n&&n in t)return t[n];let s=Reflect.get(e,n,i);return"function"==typeof s?"$extend"===n?s.bind(i):(r.has(n)||r.set(n,s.bind(e)),r.get(n)):s}})}}},91644:function(e,t,r){r.d(t,{A:function(){return d}});var n=r(11747),i=r(58691),s=r(15014),a=r(94943),o=r(6945),c=r(16609),u=r(531);let l={mainnet:"https://mainnet.mvr.mystenlabs.com",testnet:"https://testnet.mvr.mystenlabs.com"};var d=class extends a.W{constructor(e){super(e),this.core=this,this.mvr=new u.vW({cache:this.cache.scope("core.mvr"),url:e.mvr?.url??l[this.network],pageSize:e.mvr?.pageSize,overrides:e.mvr?.overrides})}async getObject(e){let{objectId:t}=e,{objects:[r]}=await this.getObjects({objectIds:[t],signal:e.signal,include:e.include});if(r instanceof Error)throw r;return{object:r}}async getDynamicField(e){let t=i.X.parseFromStr((await this.core.mvr.resolveType({type:e.name.type})).type),r=function(e,t,r){let n=s.$5.Address.serialize(e).toBytes(),i=s.$5.TypeTag.serialize(t).toBytes(),a=s.$5.u64().serialize(r.length).toBytes(),u=c.Rg.create({dkLen:32});return u.update(new Uint8Array([240])),u.update(n),u.update(a),u.update(r),u.update(i),`0x${(0,o.N)(u.digest().slice(0,32))}`}(e.parentId,t,e.name.bcs),{objects:[a]}=await this.getObjects({objectIds:[r],signal:e.signal,include:{previousTransaction:!0,content:!0}});if(a instanceof Error)throw a;let u=(0,n.$A)(a.type),l=await a.content;return{dynamicField:{fieldId:a.objectId,digest:a.digest,version:a.version,type:a.type,previousTransaction:a.previousTransaction,name:{type:"string"==typeof u.typeParams[0]?u.typeParams[0]:(0,n.kX)(u.typeParams[0]),bcs:e.name.bcs},value:{type:"string"==typeof u.typeParams[1]?u.typeParams[1]:(0,n.kX)(u.typeParams[1]),bcs:l.slice(n.kT+e.name.bcs.length)}}}}async getDynamicObjectField(e){let t=`0x2::dynamic_object_field::Wrapper<${(await this.core.mvr.resolveType({type:e.name.type})).type}>`,{dynamicField:r}=await this.getDynamicField({parentId:e.parentId,name:{type:t,bcs:e.name.bcs},signal:e.signal}),{object:n}=await this.getObject({objectId:s.$5.Address.parse(r.value.bcs),signal:e.signal,include:e.include});return{object:n}}async waitForTransaction(e){let{signal:t,timeout:r=6e4,include:n}=e,i="result"in e&&e.result?(e.result.Transaction??e.result.FailedTransaction).digest:e.digest,s=t?AbortSignal.any([AbortSignal.timeout(r),t]):AbortSignal.timeout(r),a=new Promise((e,t)=>{s.addEventListener("abort",()=>t(s.reason))});for(a.catch(()=>{});;){s.throwIfAborted();try{return await this.getTransaction({digest:i,include:n,signal:s})}catch{await Promise.race([new Promise(e=>setTimeout(e,2e3)),a])}}}async signAndExecuteTransaction({transaction:e,signer:t,additionalSignatures:r=[],...n}){let i;e instanceof Uint8Array?i=e:(e.setSenderIfNotSet(t.toSuiAddress()),i=await e.build({client:this}));let{signature:s}=await t.signTransaction(i);return this.executeTransaction({transaction:i,signatures:[s,...r],...n})}}},42021:function(e,t,r){r.d(t,{R:function(){return K}});var n=r(12449),i=r(35392),s=r(11747),a=r(94943),o=r(531),c=r(91238);let u={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};var l=class extends Error{},d=class extends l{constructor(e,t){super(e),this.code=t,this.type=u[t]??"ServerError"}},h=class extends l{constructor(e,t,r){super(e),this.status=t,this.statusText=r}};let p={WebSocketConstructor:"undefined"!=typeof WebSocket?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};var f=class{#r=0;#n=0;#i=null;#s=null;#a=new Set;#o=new Map;constructor(e,t={}){if(this.endpoint=e,this.options={...p,...t},!this.options.WebSocketConstructor)throw Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=function(e){let t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}(this.endpoint))}async makeRequest(e,t,r){let n=await this.#c();return new Promise((i,s)=>{this.#r+=1,this.#o.set(this.#r,{resolve:i,reject:s,timeout:setTimeout(()=>{this.#o.delete(this.#r),s(Error(`Request timeout: ${e}`))},this.options.callTimeout)}),r?.addEventListener("abort",()=>{this.#o.delete(this.#r),s(r.reason)}),n.send(JSON.stringify({jsonrpc:"2.0",id:this.#r,method:e,params:t}))}).then(({error:e,result:t})=>{if(e)throw new d(e.message,e.code);return t})}#c(){return this.#s||(this.#s=new Promise(e=>{this.#i?.close(),this.#i=new this.options.WebSocketConstructor(this.endpoint),this.#i.addEventListener("open",()=>{this.#n=0,e(this.#i)}),this.#i.addEventListener("close",()=>{this.#n++,this.#n<=this.options.maxReconnects&&setTimeout(()=>{this.#u()},this.options.reconnectTimeout)}),this.#i.addEventListener("message",({data:e})=>{let t;try{t=JSON.parse(e)}catch(t){console.error(Error(`Failed to parse RPC message: ${e}`,{cause:t}));return}if("id"in t&&null!=t.id&&this.#o.has(t.id)){let{resolve:e,timeout:r}=this.#o.get(t.id);clearTimeout(r),e(t)}else if("params"in t){let{params:e}=t;this.#a.forEach(t=>{t.subscriptionId===e.subscription&&e.subscription===t.subscriptionId&&t.onMessage(e.result)})}})})),this.#s}async #u(){return this.#i?.close(),this.#s=null,Promise.allSettled([...this.#a].map(e=>e.subscribe(this)))}async subscribe(e){let t=new g(e);return this.#a.add(t),await t.subscribe(this),()=>t.unsubscribe(this)}},g=class{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){let{subscriptionId:t}=this;return this.subscribed=!1,null!=t&&(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[t]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;let t=await e.makeRequest(this.input.method,this.input.params,this.input.signal);this.subscribed&&(this.subscriptionId=t)}},y=class{#r=0;#l;#d;constructor(e){this.#l=e}fetch(e,t){let r=this.#l.fetch??fetch;if(!r)throw Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return r(e,t)}#h(){if(!this.#d){let e=this.#l.WebSocketConstructor??WebSocket;if(!e)throw Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");this.#d=new f(this.#l.websocket?.url??this.#l.url,{WebSocketConstructor:e,...this.#l.websocket})}return this.#d}async request(e){this.#r+=1;let t=await this.fetch(this.#l.rpc?.url??this.#l.url,{method:"POST",signal:e.signal,headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":c.l,"Client-Target-Api-Version":c.P,"Client-Request-Method":e.method,...this.#l.rpc?.headers},body:JSON.stringify({jsonrpc:"2.0",id:this.#r,method:e.method,params:e.params})});if(!t.ok)throw new h(`Unexpected status code: ${t.status}`,t.status,t.statusText);let r=await t.json();if("error"in r&&null!=r.error)throw new d(r.error.message,r.error.code);return r.result}async subscribe(e){let t=await this.#h().subscribe(e);return e.signal&&(e.signal.throwIfAborted(),e.signal.addEventListener("abort",()=>{t()})),async()=>!!await t()}},m=r(13439),w=r(58691),b=r(15014),v=r(91644),$=r(20867),k=r(22429),_=r(21590),S=r(78369),j=r(63522),E=r(29395),O=r(74823);function I(e,t){if("success"===e.status)return{success:!0,error:null};let r=e.error??"Unknown";if(t){let e=r.match(/in command (\d+)/),n=e?parseInt(e[1],10):void 0,i=r.match(/instruction:\s*(\d+)/),a=i?parseInt(i[1],10):void 0,o=t.module_id?.split("::")??[],c=o[0]?(0,s.yT)(o[0]):void 0,u=o[1];return{success:!1,error:{$kind:"MoveAbort",message:(0,k.sm)({command:n,location:c&&u?{package:c,module:u,functionName:t.function??void 0,instruction:a}:void 0,abortCode:String(t.error_code??0),cleverError:null!=t.line?{lineNumber:t.line}:void 0}),command:n,MoveAbort:{abortCode:String(t.error_code??0),location:t.module_id?{package:(0,s.yT)(t.module_id.split("::")[0]??""),module:t.module_id.split("::")[1]??"",functionName:t.function??void 0,instruction:a}:void 0}}}}return{success:!1,error:{$kind:"Unknown",message:r,Unknown:null}}}var A=class extends v.A{#p;constructor({jsonRpcClient:e,mvr:t}){super({network:e.network,base:e,mvr:t}),this.#p=e}async getObjects(e){let t=(0,O.y)(e.objectIds,50),r=[];for(let n of t)for(let[t,i]of(await this.#p.multiGetObjects({ids:n,options:{showOwner:!0,showType:!0,showBcs:!!(e.include?.content||e.include?.objectBcs),showPreviousTransaction:!!(e.include?.previousTransaction||e.include?.objectBcs),showStorageRebate:e.include?.objectBcs??!1,showContent:e.include?.json??!1},signal:e.signal})).entries())i.error?r.push(_.E.fromResponse(i.error,n[t])):r.push(x(i.data,e.include));return{objects:r}}async listOwnedObjects(e){let t=null;if(e.type){let r=e.type.split("::");t=1===r.length?{Package:e.type}:2===r.length?{MoveModule:{package:r[0],module:r[1]}}:{StructType:e.type}}let r=await this.#p.getOwnedObjects({owner:e.owner,limit:e.limit,cursor:e.cursor,options:{showOwner:!0,showType:!0,showBcs:!!(e.include?.content||e.include?.objectBcs),showPreviousTransaction:!!(e.include?.previousTransaction||e.include?.objectBcs),showStorageRebate:e.include?.objectBcs??!1,showContent:e.include?.json??!1},filter:t,signal:e.signal});return{objects:r.data.map(t=>{if(t.error)throw _.E.fromResponse(t.error);return x(t.data,e.include)}),hasNextPage:r.hasNextPage,cursor:r.nextCursor??null}}async listCoins(e){let t=await this.#p.getCoins({owner:e.owner,coinType:e.coinType,limit:e.limit,cursor:e.cursor,signal:e.signal});return{objects:t.data.map(t=>({objectId:t.coinObjectId,version:t.version,digest:t.digest,balance:t.balance,type:(0,s.kX)(`0x2::coin::Coin<${t.coinType}>`),owner:{$kind:"AddressOwner",AddressOwner:e.owner}})),hasNextPage:t.hasNextPage,cursor:t.nextCursor??null}}async getBalance(e){let t=await this.#p.getBalance({owner:e.owner,coinType:e.coinType,signal:e.signal}),r=t.fundsInAddressBalance??"0",n=String(BigInt(t.totalBalance)-BigInt(r));return{balance:{coinType:(0,s.kX)(t.coinType),balance:t.totalBalance,coinBalance:n,addressBalance:r}}}async getCoinMetadata(e){let t=(await this.mvr.resolveType({type:e.coinType})).type,r=await this.#p.getCoinMetadata({coinType:t,signal:e.signal});return r?{coinMetadata:{id:r.id??null,decimals:r.decimals,name:r.name,symbol:r.symbol,description:r.description,iconUrl:r.iconUrl??null}}:{coinMetadata:null}}async listBalances(e){return{balances:(await this.#p.getAllBalances({owner:e.owner,signal:e.signal})).map(e=>{let t=e.fundsInAddressBalance??"0",r=String(BigInt(e.totalBalance)-BigInt(t));return{coinType:(0,s.kX)(e.coinType),balance:e.totalBalance,coinBalance:r,addressBalance:t}}),hasNextPage:!1,cursor:null}}async getTransaction(e){return R(await this.#p.getTransactionBlock({digest:e.digest,options:{showRawInput:!0,showEffects:!0,showObjectChanges:e.include?.objectTypes??!1,showRawEffects:e.include?.effects??!1,showEvents:e.include?.events??!1,showBalanceChanges:e.include?.balanceChanges??!1},signal:e.signal}),e.include)}async executeTransaction(e){return R(await this.#p.executeTransactionBlock({transactionBlock:e.transaction,signature:e.signatures,options:{showRawInput:!0,showEffects:!0,showRawEffects:e.include?.effects??!1,showEvents:e.include?.events??!1,showObjectChanges:e.include?.objectTypes??!1,showBalanceChanges:e.include?.balanceChanges??!1},signal:e.signal}),e.include)}async simulateTransaction(e){let t;e.transaction instanceof Uint8Array||await e.transaction.prepareForSerialization({client:this});let r=m.Y.from(e.transaction),n=e.transaction instanceof Uint8Array?null:$.D.restore(e.transaction.getData()),i=n?n.build({overrides:{gasData:{budget:n.gasData.budget??String(5e10),price:n.gasData.price??String(await this.#p.getReferenceGasPrice()),payment:n.gasData.payment??[]}}}):e.transaction,a=await this.#p.dryRunTransactionBlock({transactionBlock:i,signal:e.signal}),{effects:o,objectTypes:c}=function({bytes:e,effects:t,objectChanges:r}){let n=[],i={};return r?.forEach(e=>{switch(e.type){case"published":n.push({objectId:e.packageId,inputState:"DoesNotExist",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"PackageWrite",outputVersion:e.version,outputDigest:e.digest,outputOwner:null,idOperation:"Created"});break;case"transferred":n.push({objectId:e.objectId,inputState:"Exists",inputVersion:e.version,inputDigest:e.digest,inputOwner:{$kind:"AddressOwner",AddressOwner:e.sender},outputState:"ObjectWrite",outputVersion:e.version,outputDigest:e.digest,outputOwner:C(e.recipient),idOperation:"None"}),i[e.objectId]=s.kX(e.objectType);break;case"mutated":n.push({objectId:e.objectId,inputState:"Exists",inputVersion:e.previousVersion,inputDigest:null,inputOwner:C(e.owner),outputState:"ObjectWrite",outputVersion:e.version,outputDigest:e.digest,outputOwner:C(e.owner),idOperation:"None"}),i[e.objectId]=s.kX(e.objectType);break;case"deleted":n.push({objectId:e.objectId,inputState:"Exists",inputVersion:e.version,inputDigest:t.deleted?.find(t=>t.objectId===e.objectId)?.digest??null,inputOwner:null,outputState:"DoesNotExist",outputVersion:null,outputDigest:null,outputOwner:null,idOperation:"Deleted"}),i[e.objectId]=s.kX(e.objectType);break;case"wrapped":n.push({objectId:e.objectId,inputState:"Exists",inputVersion:e.version,inputDigest:null,inputOwner:{$kind:"AddressOwner",AddressOwner:e.sender},outputState:"ObjectWrite",outputVersion:e.version,outputDigest:t.wrapped?.find(t=>t.objectId===e.objectId)?.digest??null,outputOwner:{$kind:"ObjectOwner",ObjectOwner:e.sender},idOperation:"None"}),i[e.objectId]=s.kX(e.objectType);break;case"created":n.push({objectId:e.objectId,inputState:"DoesNotExist",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"ObjectWrite",outputVersion:e.version,outputDigest:e.digest,outputOwner:C(e.owner),idOperation:"Created"}),i[e.objectId]=s.kX(e.objectType)}}),{objectTypes:i,effects:{bcs:e??null,version:2,status:I(t.status,t.abortError),gasUsed:t.gasUsed,transactionDigest:t.transactionDigest,gasObject:{objectId:t.gasObject?.reference.objectId,inputState:"Exists",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"ObjectWrite",outputVersion:t.gasObject.reference.version,outputDigest:t.gasObject.reference.digest,outputOwner:C(t.gasObject.owner),idOperation:"None"},eventsDigest:t.eventsDigest??null,dependencies:t.dependencies??[],lamportVersion:t.gasObject.reference.version,changedObjects:n,unchangedConsensusObjects:[],auxiliaryDataDigest:null}}}({effects:a.effects,objectChanges:a.objectChanges}),u={digest:$.D.getDigestFromBytes(i),epoch:null,status:o.status,effects:e.include?.effects?o:void 0,objectTypes:e.include?.objectTypes?c:void 0,signatures:[],transaction:e.include?.transaction?(0,k.sA)(e.transaction instanceof Uint8Array?e.transaction:await e.transaction.build({client:this}).catch(()=>null)):void 0,bcs:e.include?.bcs?i:void 0,balanceChanges:e.include?.balanceChanges?a.balanceChanges.map(e=>({coinType:(0,s.kX)(e.coinType),address:P(e.owner),amount:e.amount})):void 0,events:e.include?.events?a.events?.map(e=>({packageId:e.packageId,module:e.transactionModule,sender:e.sender,eventType:e.type,bcs:"bcs"in e?E.G(e.bcs):new Uint8Array}))??[]:void 0};if(e.include?.commandResults)try{let n=r.getData().sender??(0,s.yT)("0x0"),i=await this.#p.devInspectTransactionBlock({sender:n,transactionBlock:r,signal:e.signal});i.results&&(t=i.results.map(e=>({returnValues:(e.returnValues??[]).map(([e])=>({bcs:new Uint8Array(e)})),mutatedReferences:(e.mutableReferenceOutputs??[]).map(([,e])=>({bcs:new Uint8Array(e)}))})))}catch{}return o.status.success?{$kind:"Transaction",Transaction:u,commandResults:t}:{$kind:"FailedTransaction",FailedTransaction:u,commandResults:t}}async getReferenceGasPrice(e){return{referenceGasPrice:String(await this.#p.getReferenceGasPrice({signal:e?.signal}))}}async getCurrentSystemState(e){let t=await this.#p.getLatestSuiSystemState({signal:e?.signal});return{systemState:{systemStateVersion:t.systemStateVersion,epoch:t.epoch,protocolVersion:t.protocolVersion,referenceGasPrice:t.referenceGasPrice?.toString()??null,epochStartTimestampMs:t.epochStartTimestampMs,safeMode:t.safeMode,safeModeStorageRewards:t.safeModeStorageRewards,safeModeComputationRewards:t.safeModeComputationRewards,safeModeStorageRebates:t.safeModeStorageRebates,safeModeNonRefundableStorageFee:t.safeModeNonRefundableStorageFee,parameters:{epochDurationMs:t.epochDurationMs,stakeSubsidyStartEpoch:t.stakeSubsidyStartEpoch,maxValidatorCount:t.maxValidatorCount,minValidatorJoiningStake:t.minValidatorJoiningStake,validatorLowStakeThreshold:t.validatorLowStakeThreshold,validatorLowStakeGracePeriod:t.validatorLowStakeGracePeriod},storageFund:{totalObjectStorageRebates:t.storageFundTotalObjectStorageRebates,nonRefundableBalance:t.storageFundNonRefundableBalance},stakeSubsidy:{balance:t.stakeSubsidyBalance,distributionCounter:t.stakeSubsidyDistributionCounter,currentDistributionAmount:t.stakeSubsidyCurrentDistributionAmount,stakeSubsidyPeriodLength:t.stakeSubsidyPeriodLength,stakeSubsidyDecreaseRate:t.stakeSubsidyDecreaseRate}}}}async listDynamicFields(e){let t=await this.#p.getDynamicFields({parentId:e.parentId,limit:e.limit,cursor:e.cursor});return{dynamicFields:t.data.map(e=>{let t="DynamicObject"===e.type?`0x2::dynamic_field::Field<0x2::dynamic_object_field::Wrapper<${e.name.type}>, 0x2::object::ID>`:`0x2::dynamic_field::Field<${e.name.type}, ${e.objectType}>`;return{fieldId:e.objectId,type:(0,s.kX)(t),name:{type:e.name.type,bcs:(0,E.G)(e.bcsName)},valueType:e.objectType}}),hasNextPage:t.hasNextPage,cursor:t.nextCursor}}async verifyZkLoginSignature(e){let t=await this.#p.verifyZkLoginSignature({bytes:e.bytes,signature:e.signature,intentScope:e.intentScope,author:e.address});return{success:t.success,errors:t.errors}}async defaultNameServiceName(e){return{data:{name:(await this.#p.resolveNameServiceNames(e)).data[0]}}}resolveTransactionPlugin(){return j.W}async getMoveFunction(e){let t=(await this.mvr.resolvePackage({package:e.packageId})).package,r=await this.#p.getNormalizedMoveFunction({package:t,module:e.moduleName,function:e.name});return{function:{packageId:(0,s.yT)(t),moduleName:e.moduleName,name:e.name,visibility:function(e){switch(e){case"Public":return"public";case"Private":return"private";case"Friend":return"friend";default:return"unknown"}}(r.visibility),isEntry:r.isEntry,typeParameters:r.typeParameters.map(e=>({isPhantom:!1,constraints:e.abilities.map(e=>{switch(e){case"Copy":return"copy";case"Drop":return"drop";case"Store":return"store";case"Key":return"key";default:return"unknown"}})})),parameters:r.parameters.map(e=>T(e)),returns:r.return.map(e=>T(e))}}}async getChainIdentifier(e){return this.cache.read(["chainIdentifier"],async()=>({chainIdentifier:(await this.#p.getCheckpoint({id:"0"})).digest}))}};function x(e,t){let r=e.bcs?.dataType==="moveObject"?(0,E.G)(e.bcs.bcsBytes):void 0,n=t?.objectBcs?function(e){if(e.bcs?.dataType==="moveObject")try{let t;let r=(0,s.kX)(e.bcs.type),n=(0,s.yT)(S.Nf),i=(0,s.kX)(`${S.Nf}::coin::Coin<${S.Nf}::sui::SUI>`),a=(0,s.kX)(`${S.aS}::staking_pool::StakedSui`),o=`${n}::coin::Coin<`;if(r===i)t={GasCoin:null};else if(r===a)t={StakedSui:null};else if(r.startsWith(o)){let e=r.match(RegExp(`${n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}::coin::Coin<(.+)>$`));if(e)t={Coin:w.X.parseFromStr(e[1],!0)};else throw Error("Failed to parse Coin type")}else{let e=w.X.parseFromStr(r,!0);if("object"!=typeof e||!("struct"in e))throw Error("Expected struct type tag");t={Other:e.struct}}let c=(0,E.G)(e.bcs.bcsBytes),u=function(e){if("Immutable"===e)return{Immutable:null};if("AddressOwner"in e)return{AddressOwner:e.AddressOwner};if("ObjectOwner"in e)return{ObjectOwner:e.ObjectOwner};if("Shared"in e)return{Shared:{initialSharedVersion:e.Shared.initial_shared_version}};if("object"==typeof e&&null!==e&&"ConsensusAddressOwner"in e)return{ConsensusAddressOwner:{startVersion:e.ConsensusAddressOwner.start_version,owner:e.ConsensusAddressOwner.owner}};throw Error(`Unknown owner type: ${JSON.stringify(e)}`)}(e.owner);return b.$5.Object.serialize({data:{Move:{type:t,hasPublicTransfer:e.bcs.hasPublicTransfer,version:e.bcs.version,contents:c}},owner:u,previousTransaction:e.previousTransaction,storageRebate:e.storageRebate}).toBytes()}catch{return}}(e):void 0,i=e.type&&e.type.includes("::")?(0,s.kX)(e.type):e.type??"",a=t?.json&&e.content?.dataType==="moveObject"?e.content.fields:t?.json?null:void 0;return{objectId:e.objectId,version:e.version,digest:e.digest,type:i,content:t?.content?r:void 0,owner:C(e.owner),previousTransaction:t?.previousTransaction?e.previousTransaction??void 0:void 0,objectBcs:n,json:a}}function C(e){if("Immutable"===e)return{$kind:"Immutable",Immutable:!0};if("ConsensusAddressOwner"in e)return{$kind:"ConsensusAddressOwner",ConsensusAddressOwner:{owner:e.ConsensusAddressOwner.owner,startVersion:e.ConsensusAddressOwner.start_version}};if("AddressOwner"in e)return{$kind:"AddressOwner",AddressOwner:e.AddressOwner};if("ObjectOwner"in e)return{$kind:"ObjectOwner",ObjectOwner:e.ObjectOwner};if("Shared"in e)return{$kind:"Shared",Shared:{initialSharedVersion:e.Shared.initial_shared_version}};throw Error(`Unknown owner type: ${JSON.stringify(e)}`)}function P(e){if("Immutable"===e)return null;if("ConsensusAddressOwner"in e)return e.ConsensusAddressOwner.owner;if("AddressOwner"in e)return e.AddressOwner;if("ObjectOwner"in e)return e.ObjectOwner;if("Shared"in e)return null;throw Error(`Unknown owner type: ${JSON.stringify(e)}`)}function R(e,t){let r,n;let i={};t?.objectTypes&&e.objectChanges?.forEach(e=>{"published"!==e.type&&(i[e.objectId]=s.kX(e.objectType))});let a=[];if(e.rawTransaction){let i=b.$5.SenderSignedData.parse((0,E.G)(e.rawTransaction))[0];if(a=i.txSignatures,t?.transaction||t?.bcs){let e=b.$5.TransactionData.serialize(i.intentMessage.value).toBytes();t?.bcs&&(n=e),t?.transaction&&(r={...$.D.restore({version:2,sender:i.intentMessage.value.V1.sender,expiration:i.intentMessage.value.V1.expiration,gasData:i.intentMessage.value.V1.gasData,inputs:i.intentMessage.value.V1.kind.ProgrammableTransaction.inputs,commands:i.intentMessage.value.V1.kind.ProgrammableTransaction.commands})})}}let o=e.effects?.status?I(e.effects.status,e.effects.abortError):{success:!1,error:{$kind:"Unknown",message:"Unknown",Unknown:null}},c=e.rawEffects?new Uint8Array(e.rawEffects):null,u={digest:e.digest,epoch:e.effects?.executedEpoch??null,status:o,effects:t?.effects&&c?(0,k.vq)(c):void 0,objectTypes:t?.objectTypes?i:void 0,transaction:r,bcs:n,signatures:a,balanceChanges:t?.balanceChanges?e.balanceChanges?.map(e=>({coinType:s.kX(e.coinType),address:P(e.owner),amount:e.amount}))??[]:void 0,events:t?.events?e.events?.map(e=>({packageId:e.packageId,module:e.transactionModule,sender:e.sender,eventType:e.type,bcs:"bcs"in e?E.G(e.bcs):new Uint8Array}))??[]:void 0};return o.success?{$kind:"Transaction",Transaction:u}:{$kind:"FailedTransaction",FailedTransaction:u}}function T(e){if("string"!=typeof e){if("Reference"in e)return{reference:"immutable",body:D(e.Reference)};if("MutableReference"in e)return{reference:"mutable",body:D(e.MutableReference)}}return{reference:null,body:D(e)}}function D(e){switch(e){case"Address":return{$kind:"address"};case"Bool":return{$kind:"bool"};case"U8":return{$kind:"u8"};case"U16":return{$kind:"u16"};case"U32":return{$kind:"u32"};case"U64":return{$kind:"u64"};case"U128":return{$kind:"u128"};case"U256":return{$kind:"u256"}}if("string"==typeof e)throw Error(`Unknown type: ${e}`);if("Vector"in e)return{$kind:"vector",vector:D(e.Vector)};if("Struct"in e)return{$kind:"datatype",datatype:{typeName:`${(0,s.yT)(e.Struct.address)}::${e.Struct.module}::${e.Struct.name}`,typeParameters:e.Struct.typeArguments.map(e=>D(e))}};if("TypeParameter"in e)return{$kind:"typeParameter",index:e.TypeParameter};throw Error(`Unknown type: ${JSON.stringify(e)}`)}var M=r(3563),U=r(6945);let B=Symbol.for("@mysten/SuiJsonRpcClient"),N=new Uint8Array([172,172,172,172,172,172,172,172,172,172,172,172,172,172,172,172,172,172,172,172]);function V(e){return(0,M.L)(e).slice(12,32).every((e,t)=>e===N[t])}var K=class extends a.W{get[B](){return!0}constructor(e){super({network:e.network}),this.jsonRpc=this,this.transport=e.transport??new y({url:e.url}),this.core=new A({jsonRpcClient:this,mvr:e.mvr})}async getRpcApiVersion({signal:e}={}){return(await this.transport.request({method:"rpc.discover",params:[],signal:e})).info.version}async getCoins({coinType:e,owner:t,cursor:r,limit:n,signal:i}){if(!t||!(0,s.oI)((0,s.yT)(t)))throw Error("Invalid Sui address");e&&(0,o.vv)(e)&&(e=(await this.core.mvr.resolveType({type:e})).type);let a=await this.transport.request({method:"suix_getCoins",params:[t,e,r,n],signal:i});return{...a,data:a.data.filter(e=>!V(e.digest))}}async getAllCoins(e){if(!e.owner||!(0,s.oI)((0,s.yT)(e.owner)))throw Error("Invalid Sui address");let t=await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit],signal:e.signal});return{...t,data:t.data.filter(e=>!V(e.digest))}}async getBalance({owner:e,coinType:t,signal:r}){if(!e||!(0,s.oI)((0,s.yT)(e)))throw Error("Invalid Sui address");return t&&(0,o.vv)(t)&&(t=(await this.core.mvr.resolveType({type:t})).type),await this.transport.request({method:"suix_getBalance",params:[e,t],signal:r})}async getAllBalances(e){if(!e.owner||!(0,s.oI)((0,s.yT)(e.owner)))throw Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner],signal:e.signal})}async getCoinMetadata({coinType:e,signal:t}){return e&&(0,o.vv)(e)&&(e=(await this.core.mvr.resolveType({type:e})).type),await this.transport.request({method:"suix_getCoinMetadata",params:[e],signal:t})}async getTotalSupply({coinType:e,signal:t}){return e&&(0,o.vv)(e)&&(e=(await this.core.mvr.resolveType({type:e})).type),await this.transport.request({method:"suix_getTotalSupply",params:[e],signal:t})}async call(e,t,{signal:r}={}){return await this.transport.request({method:e,params:t,signal:r})}async getMoveFunctionArgTypes({package:e,module:t,function:r,signal:n}){return e&&(0,i.Y)(e)&&(e=(await this.core.mvr.resolvePackage({package:e})).package),await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e,t,r],signal:n})}async getNormalizedMoveModulesByPackage({package:e,signal:t}){return e&&(0,i.Y)(e)&&(e=(await this.core.mvr.resolvePackage({package:e})).package),await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e],signal:t})}async getNormalizedMoveModule({package:e,module:t,signal:r}){return e&&(0,i.Y)(e)&&(e=(await this.core.mvr.resolvePackage({package:e})).package),await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e,t],signal:r})}async getNormalizedMoveFunction({package:e,module:t,function:r,signal:n}){return e&&(0,i.Y)(e)&&(e=(await this.core.mvr.resolvePackage({package:e})).package),await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e,t,r],signal:n})}async getNormalizedMoveStruct({package:e,module:t,struct:r,signal:n}){return e&&(0,i.Y)(e)&&(e=(await this.core.mvr.resolvePackage({package:e})).package),await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e,t,r],signal:n})}async getOwnedObjects(e){if(!e.owner||!(0,s.oI)((0,s.yT)(e.owner)))throw Error("Invalid Sui address");let t=e.filter?{...e.filter}:void 0;return t&&"MoveModule"in t&&(0,i.Y)(t.MoveModule.package)?t.MoveModule={module:t.MoveModule.module,package:(await this.core.mvr.resolvePackage({package:t.MoveModule.package})).package}:t&&"StructType"in t&&(0,o.vv)(t.StructType)&&(t.StructType=(await this.core.mvr.resolveType({type:t.StructType})).type),await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:t,options:e.options},e.cursor,e.limit],signal:e.signal})}async getObject(e){if(!e.id||!(0,s.uV)((0,s.Fw)(e.id)))throw Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options],signal:e.signal})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options],signal:e.signal})}async multiGetObjects(e){if(e.ids.forEach(e=>{if(!e||!(0,s.uV)((0,s.Fw)(e)))throw Error(`Invalid Sui Object id ${e}`)}),e.ids.length!==new Set(e.ids).size)throw Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options],signal:e.signal})}async queryTransactionBlocks({filter:e,options:t,cursor:r,limit:n,order:s,signal:a}){return e&&"MoveFunction"in e&&(0,i.Y)(e.MoveFunction.package)&&(e={...e,MoveFunction:{package:(await this.core.mvr.resolvePackage({package:e.MoveFunction.package})).package}}),await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e,options:t},r,n,"descending"===(s||"descending")],signal:a})}async getTransactionBlock(e){if(!(0,s.iI)(e.digest))throw Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options],signal:e.signal})}async multiGetTransactionBlocks(e){if(e.digests.forEach(e=>{if(!(0,s.iI)(e))throw Error(`Invalid Transaction digest ${e}`)}),e.digests.length!==new Set(e.digests).size)throw Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options],signal:e.signal})}async executeTransactionBlock({transactionBlock:e,signature:t,options:r,signal:n}){return await this.transport.request({method:"sui_executeTransactionBlock",params:["string"==typeof e?e:(0,E.s)(e),Array.isArray(t)?t:[t],r],signal:n})}async signAndExecuteTransaction({transaction:e,signer:t,...r}){let n;e instanceof Uint8Array?n=e:(e.setSenderIfNotSet(t.toSuiAddress()),n=await e.build({client:this}));let{signature:i,bytes:s}=await t.signTransaction(n);return this.executeTransactionBlock({transactionBlock:s,signature:i,...r})}async getTotalTransactionBlocks({signal:e}={}){return BigInt(await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[],signal:e}))}async getReferenceGasPrice({signal:e}={}){return BigInt(await this.transport.request({method:"suix_getReferenceGasPrice",params:[],signal:e}))}async getStakes(e){if(!e.owner||!(0,s.oI)((0,s.yT)(e.owner)))throw Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner],signal:e.signal})}async getStakesByIds(e){return e.stakedSuiIds.forEach(e=>{if(!e||!(0,s.uV)((0,s.Fw)(e)))throw Error(`Invalid Sui Stake id ${e}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds],signal:e.signal})}async getLatestSuiSystemState({signal:e}={}){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[],signal:e})}async queryEvents({query:e,cursor:t,limit:r,order:n,signal:s}){return e&&"MoveEventType"in e&&(0,o.vv)(e.MoveEventType)&&(e={...e,MoveEventType:(await this.core.mvr.resolveType({type:e.MoveEventType})).type}),e&&"MoveEventModule"in e&&(0,i.Y)(e.MoveEventModule.package)&&(e={...e,MoveEventModule:{module:e.MoveEventModule.module,package:(await this.core.mvr.resolvePackage({package:e.MoveEventModule.package})).package}}),"MoveModule"in e&&(0,i.Y)(e.MoveModule.package)&&(e={...e,MoveModule:{module:e.MoveModule.module,package:(await this.core.mvr.resolvePackage({package:e.MoveModule.package})).package}}),await this.transport.request({method:"suix_queryEvents",params:[e,t,r,"descending"===(n||"descending")],signal:s})}async devInspectTransactionBlock(e){let t;if((0,m.h)(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),t=(0,E.s)(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if("string"==typeof e.transactionBlock)t=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)t=(0,E.s)(e.transactionBlock);else throw Error("Unknown transaction block format.");return e.signal?.throwIfAborted(),await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,t,e.gasPrice?.toString(),e.epoch],signal:e.signal})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:["string"==typeof e.transactionBlock?e.transactionBlock:(0,E.s)(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!(0,s.uV)((0,s.Fw)(e.parentId)))throw Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit],signal:e.signal})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name],signal:e.signal})}async getLatestCheckpointSequenceNumber({signal:e}={}){return String(await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[],signal:e}))}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id],signal:e.signal})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e?.limit,e.descendingOrder],signal:e.signal})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e?.epoch],signal:e?.signal})}async getNetworkMetrics({signal:e}={}){return await this.transport.request({method:"suix_getNetworkMetrics",params:[],signal:e})}async getAddressMetrics({signal:e}={}){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[],signal:e})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e?.cursor,e?.limit,e?.descendingOrder],signal:e?.signal})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e?.descendingOrder],signal:e?.signal})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e?.cursor,e?.limit,e?.descendingOrder],signal:e?.signal})}async getMoveCallMetrics({signal:e}={}){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[],signal:e})}async getCurrentEpoch({signal:e}={}){return await this.transport.request({method:"suix_getCurrentEpoch",params:[],signal:e})}async getValidatorsApy({signal:e}={}){return await this.transport.request({method:"suix_getValidatorsApy",params:[],signal:e})}async getChainIdentifier({signal:e}={}){return(0,U.N)((0,M.L)((await this.getCheckpoint({id:"0",signal:e})).digest).slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name],signal:e.signal})}async resolveNameServiceNames({format:e="dot",...t}){let{nextCursor:r,hasNextPage:i,data:s}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[t.address,t.cursor,t.limit],signal:t.signal});return{hasNextPage:i,nextCursor:r,data:s.map(t=>(0,n.S)(t,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e?.version],signal:e?.signal})}async verifyZkLoginSignature(e){return await this.transport.request({method:"sui_verifyZkLoginSignature",params:[e.bytes,e.signature,e.intentScope,e.author],signal:e.signal})}async waitForTransaction({signal:e,timeout:t=6e4,pollInterval:r=2e3,...n}){let i=AbortSignal.timeout(t),s=new Promise((e,t)=>{i.addEventListener("abort",()=>t(i.reason))});for(s.catch(()=>{});!i.aborted;){e?.throwIfAborted();try{return await this.getTransactionBlock(n)}catch{await Promise.race([new Promise(e=>setTimeout(e,r)),s])}}throw i.throwIfAborted(),Error("Unexpected error while waiting for transaction block.")}}},57586:function(e,t,r){r.d(t,{M:function(){return b}});var n=r(57437),i=r(2265),s=r(58881),a=r(53576),o=r(11534),c=r(64252),u=r(13537),l=r(45750);function d(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class h extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let e=t.offsetParent,r=(0,u.R)(e)&&e.offsetWidth||0,n=(0,u.R)(e)&&e.offsetHeight||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=r-i.width-i.left,i.bottom=n-i.height-i.top}return null}componentDidUpdate(){}render(){return this.props.children}}function p(e){var t,r;let{children:s,isPresent:a,anchorX:o,anchorY:c,root:u,pop:p}=e,f=(0,i.useId)(),g=(0,i.useRef)(null),y=(0,i.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:m}=(0,i.useContext)(l._),w=function(...e){return i.useCallback(function(...e){return t=>{let r=!1,n=e.map(e=>{let n=d(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():d(e[t],null)}}}}(...e),e)}(g,null!==(r=null===(t=s.props)||void 0===t?void 0:t.ref)&&void 0!==r?r:null==s?void 0:s.ref);return(0,i.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:n,right:i,bottom:s}=y.current;if(a||!1===p||!g.current||!e||!t)return;g.current.dataset.motionPopId=f;let l=document.createElement("style");m&&(l.nonce=m);let d=null!=u?u:document.head;return d.appendChild(l),l.sheet&&l.sheet.insertRule('\n          [data-motion-pop-id="'.concat(f,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===o?"left: ".concat(n):"right: ".concat(i),"px !important;\n            ").concat("bottom"===c?"bottom: ".concat(s):"top: ".concat(r),"px !important;\n          }\n        ")),()=>{d.contains(l)&&d.removeChild(l)}},[a]),(0,n.jsx)(h,{isPresent:a,childRef:g,sizeRef:y,pop:p,children:!1===p?s:i.cloneElement(s,{ref:w})})}let f=e=>{let{children:t,initial:r,isPresent:s,onExitComplete:o,custom:u,presenceAffectsLayout:l,mode:d,anchorX:h,anchorY:f,root:y}=e,m=(0,a.h)(g),w=(0,i.useId)(),b=!0,v=(0,i.useMemo)(()=>(b=!1,{id:w,initial:r,isPresent:s,custom:u,onExitComplete:e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;o&&o()},register:e=>(m.set(e,!1),()=>m.delete(e))}),[s,m,o]);return l&&b&&(v={...v}),(0,i.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[s]),i.useEffect(()=>{s||m.size||!o||o()},[s]),t=(0,n.jsx)(p,{pop:"popLayout"===d,isPresent:s,anchorX:h,anchorY:f,root:y,children:t}),(0,n.jsx)(c.O.Provider,{value:v,children:t})};function g(){return new Map}var y=r(49637);let m=e=>e.key||"";function w(e){let t=[];return i.Children.forEach(e,e=>{(0,i.isValidElement)(e)&&t.push(e)}),t}let b=e=>{let{children:t,custom:r,initial:c=!0,onExitComplete:u,presenceAffectsLayout:l=!0,mode:d="sync",propagate:h=!1,anchorX:p="left",anchorY:g="top",root:b}=e,[v,$]=(0,y.oO)(h),k=(0,i.useMemo)(()=>w(t),[t]),_=h&&!v?[]:k.map(m),S=(0,i.useRef)(!0),j=(0,i.useRef)(k),E=(0,a.h)(()=>new Map),O=(0,i.useRef)(new Set),[I,A]=(0,i.useState)(k),[x,C]=(0,i.useState)(k);(0,o.L)(()=>{S.current=!1,j.current=k;for(let e=0;e<x.length;e++){let t=m(x[e]);_.includes(t)?(E.delete(t),O.current.delete(t)):!0!==E.get(t)&&E.set(t,!1)}},[x,_.length,_.join("-")]);let P=[];if(k!==I){let e=[...k];for(let t=0;t<x.length;t++){let r=x[t],n=m(r);_.includes(n)||(e.splice(t,0,r),P.push(r))}return"wait"===d&&P.length&&(e=P),C(w(e)),A(k),null}let{forceRender:R}=(0,i.useContext)(s.p);return(0,n.jsx)(n.Fragment,{children:x.map(e=>{let t=m(e),i=(!h||!!v)&&(k===x||_.includes(t));return(0,n.jsx)(f,{isPresent:i,initial:(!S.current||!!c)&&void 0,custom:r,presenceAffectsLayout:l,mode:d,root:b,onExitComplete:i?void 0:()=>{if(O.current.has(t)||(O.current.add(t),!E.has(t)))return;E.set(t,!0);let e=!0;E.forEach(t=>{t||(e=!1)}),e&&(null==R||R(),C(j.current),h&&(null==$||$()),u&&u())},anchorX:p,anchorY:g,children:e},t)})})}}}]);